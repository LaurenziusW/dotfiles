# ═══════════════════════════════════════════════════════════
# UNIFIED KEYBOARD ENVIRONMENT - GIT CONFIGURATION
# Cross-platform Git config
# ═══════════════════════════════════════════════════════════

[user]
	# IMPORTANT: Replace with your information!
	name = Your Name
	email = your.email@example.com

[core]
	# Use nvim as default editor
	editor = nvim
	
	# Prevent line ending issues
	autocrlf = input
	
	# Better diff algorithm
	algorithm = histogram
	
	# Global gitignore
	excludesfile = ~/.gitignore_global

[init]
	# Default branch name
	defaultBranch = main

[pull]
	# Rebase instead of merge when pulling
	rebase = true

[push]
	# Push current branch to upstream
	default = current
	
	# Automatically set up remote tracking
	autoSetupRemote = true

[fetch]
	# Prune deleted remote branches
	prune = true

[merge]
	# Show common ancestor in conflict markers
	conflictstyle = diff3
	
	# Tool for merge conflicts
	tool = nvim

[diff]
	# Better word diff
	algorithm = histogram
	
	# Color moved lines
	colorMoved = default

[color]
	ui = auto

[color "branch"]
	current = yellow reverse
	local = yellow
	remote = green

[color "diff"]
	meta = yellow bold
	frag = magenta bold
	old = red bold
	new = green bold

[color "status"]
	added = green
	changed = yellow
	untracked = red

# ───────────────────────────────────────────────────────────
# Aliases - Productivity Boosters
# ───────────────────────────────────────────────────────────
[alias]
	# Status
	s = status -sb
	st = status
	
	# Commits
	c = commit
	cm = commit -m
	ca = commit --amend
	can = commit --amend --no-edit
	
	# Add
	a = add
	aa = add --all
	ap = add --patch
	
	# Checkout
	co = checkout
	cob = checkout -b
	com = checkout main
	
	# Branch
	b = branch
	ba = branch -a
	bd = branch -d
	bD = branch -D
	
	# Log
	l = log --oneline --graph --decorate
	lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	last = log -1 HEAD --stat
	
	# Diff
	d = diff
	ds = diff --staged
	dw = diff --word-diff
	
	# Push/Pull
	p = push
	pf = push --force-with-lease
	pl = pull
	
	# Stash
	sh = stash
	sha = stash apply
	shl = stash list
	shp = stash pop
	
	# Remote
	r = remote
	rv = remote -v
	
	# Reset
	unstage = reset HEAD --
	undo = reset --soft HEAD^
	
	# Show
	show-aliases = config --get-regexp alias
	
	# Workflow shortcuts
	save = !git add -A && git commit -m 'SAVEPOINT'
	wip = !git add -u && git commit -m 'WIP'
	undo-commit = reset HEAD~1 --mixed
	
	# Clean up
	cleanup = !git branch --merged | grep -v '\\*\\|main\\|master\\|develop' | xargs -n 1 git branch -d
	
	# Pretty log
	tree = log --graph --oneline --decorate --all
	
	# Find commits
	find = log --pretty=\"format:%Cgreen%H %Cblue%s\" --name-status --grep
	
	# Show contributors
	contributors = shortlog --summary --numbered

# ───────────────────────────────────────────────────────────
# Dotfiles-Specific Helpers
# ───────────────────────────────────────────────────────────
[alias]
	# Quick dotfiles commit
	dots-save = !git add -A && git commit -m \"Update configs $(date +'%Y-%m-%d %H:%M')\"
	
	# See what changed in dotfiles
	dots-diff = diff --name-status
	
	# Sync dotfiles
	dots-sync = !git pull --rebase && git push

# ───────────────────────────────────────────────────────────
# Better Diff & Merge Tools
# ───────────────────────────────────────────────────────────
[difftool]
	prompt = false

[difftool "nvim"]
	cmd = nvim -d \"$LOCAL\" \"$REMOTE\"

[mergetool]
	prompt = false
	keepBackup = false

[mergetool "nvim"]
	cmd = nvim -d \"$LOCAL\" \"$MERGED\" \"$REMOTE\" -c 'wincmd J'

# ───────────────────────────────────────────────────────────
# Platform-Specific Settings
# ───────────────────────────────────────────────────────────

# macOS: Use keychain for credentials
[credential]
	helper = osxkeychain

# Linux: Use libsecret for credentials
# [credential]
# 	helper = /usr/lib/git-core/git-credential-libsecret

# ───────────────────────────────────────────────────────────
# Performance & Behavior
# ───────────────────────────────────────────────────────────
[help]
	# Autocorrect typos after 2 seconds
	autocorrect = 20

[rerere]
	# Remember conflict resolutions
	enabled = true

[rebase]
	# Automatically stash before rebasing
	autoStash = true
	
	# Automatically squash fixup commits
	autoSquash = true

# ───────────────────────────────────────────────────────────
# GitHub-Specific (if using GitHub)
# ───────────────────────────────────────────────────────────
[github]
	user = YOUR_GITHUB_USERNAME

# ───────────────────────────────────────────────────────────
# URL Shortcuts
# ───────────────────────────────────────────────────────────
[url "git@github.com:"]
	insteadOf = gh:
	pushInsteadOf = github:
	pushInsteadOf = git://github.com/

[url "git@gitlab.com:"]
	insteadOf = gl:
	pushInsteadOf = gitlab:
	pushInsteadOf = git://gitlab.com/

# ───────────────────────────────────────────────────────────
# Include Local Config
# ───────────────────────────────────────────────────────────
# Put machine-specific config in ~/.gitconfig.local
# (not tracked in dotfiles)
[include]
	path = ~/.gitconfig.local
