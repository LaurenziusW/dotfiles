
================================================================================
DIRECTORY STRUCTURE
================================================================================
uke
‚îú‚îÄ‚îÄ .DS_Store
‚îú‚îÄ‚îÄ .stow-local-ignore
‚îú‚îÄ‚îÄ bin
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-backup
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-bunch
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-debug
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-doctor
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-gather
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-launch
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-logs
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-scratchpad
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ uke-session
‚îú‚îÄ‚îÄ bunches
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ bunch-manager.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ coding.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ email.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ guitar.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lib-os-detect.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ reading.sh
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ study.sh
‚îú‚îÄ‚îÄ config
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ registry.yaml
‚îú‚îÄ‚îÄ docs
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ README.md
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ security
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ MACOS-SIP.md
‚îú‚îÄ‚îÄ gen
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ hyprland
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ hyprland.conf
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ skhd
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ skhdrc
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ yabai
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ yabairc
‚îú‚îÄ‚îÄ lib
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ core.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ gen.sh
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ wm.sh
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ scripts
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ arch-packages.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ install.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ keyd-setup.sh
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ uke-detect.sh
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ uke-wipe.sh
‚îú‚îÄ‚îÄ stow
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ keyd
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ .config
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ keyd
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ default.conf
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ nvim
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ .config
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ nvim
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ doc
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kickstart.txt
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ tags
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ init.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ lazy-lock.json
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ LICENSE.md
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ custom
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ plugins
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ init.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ kickstart
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ health.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ plugins
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ autopairs.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ debug.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ gitsigns.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ indent_line.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ lint.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ neo-tree.lua
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ README.md
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ tmux
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ .tmux.conf
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ wezterm
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ .wezterm.lua
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ zsh
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ .zshrc
‚îú‚îÄ‚îÄ templates
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ bunch-template.sh
‚îî‚îÄ‚îÄ uke_full_context.txt

29 directories, 54 files



################################################################################
FILE PATH: uke/bunches/guitar.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: Guitar
# Description: Guitar practice environment
# ==============================================================================

source "$(dirname "$0")/lib-os-detect.sh"

BUNCH_NAME="guitar"
PRIMARY_SPACE=7

echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to media workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications
launch_app "spotify"
sleep 1
launch_app "browser"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE (Media)"



################################################################################
FILE PATH: uke/bunches/email.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: Email
# Description: Communication and admin environment
# ==============================================================================

source "$(dirname "$0")/lib-os-detect.sh"

BUNCH_NAME="email"
PRIMARY_SPACE=9

echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to communication workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications
launch_app "mail"
sleep 1
launch_app "slack"
sleep 1
launch_app "browser"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE (Communication)"



################################################################################
FILE PATH: uke/bunches/study.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: Study
# Description: Math and study environment
# ==============================================================================

source "$(dirname "$0")/lib-os-detect.sh"

BUNCH_NAME="study"
PRIMARY_SPACE=2

echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to notes workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications
launch_app "obsidian"
sleep 1
launch_app "browser"
sleep 1
launch_app "terminal"
sleep 0.5
launch_app "pdf"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE (Notes)"



################################################################################
FILE PATH: uke/bunches/coding.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: Coding
# Description: Development environment
# ==============================================================================

source "$(dirname "$0")/lib-os-detect.sh"

BUNCH_NAME="coding"
PRIMARY_SPACE=3

echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to code workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications
launch_app "terminal"
sleep 1
launch_app "code"
sleep 1
launch_app "browser"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE (Code)"



################################################################################
FILE PATH: uke/bunches/lib-os-detect.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE OS Detection Library v6.3
# ==============================================================================
# Provides cross-platform helpers for bunches and scripts
# Source this in any bunch script: source "$(dirname "$0")/lib-os-detect.sh"
# ==============================================================================

# ------------------------------------------------------------------------------
# OS Detection
# ------------------------------------------------------------------------------
detect_os() {
    case "$(uname -s)" in
        Darwin*) echo "macos" ;;
        Linux*)  echo "linux" ;;
        *)       echo "unknown" ;;
    esac
}

OS_TYPE=$(detect_os)

# ------------------------------------------------------------------------------
# Distro Detection (Linux only)
# ------------------------------------------------------------------------------
detect_distro() {
    if [[ "$OS_TYPE" != "linux" ]]; then
        echo ""
        return
    fi
    
    if [[ -f /etc/arch-release ]]; then
        echo "arch"
    elif [[ -f /etc/debian_version ]]; then
        echo "debian"
    elif [[ -f /etc/fedora-release ]]; then
        echo "fedora"
    else
        echo "unknown"
    fi
}

DISTRO=$(detect_distro)

# ------------------------------------------------------------------------------
# Window Manager Commands (set based on OS)
# ------------------------------------------------------------------------------
setup_os_commands() {
    if [ "$OS_TYPE" = "macos" ]; then
        WM_FOCUS_SPACE="yabai -m space --focus"
        WM_SEND_WINDOW="yabai -m window --space"
        WM_QUERY_SPACE="yabai -m query --spaces --space"
    else
        WM_FOCUS_SPACE="hyprctl dispatch workspace"
        WM_SEND_WINDOW="hyprctl dispatch movetoworkspace"
        WM_QUERY_SPACE="hyprctl activeworkspace"
    fi
    export WM_FOCUS_SPACE WM_SEND_WINDOW WM_QUERY_SPACE
}

# ------------------------------------------------------------------------------
# App Name Mapping
# ------------------------------------------------------------------------------
# Returns the correct app name/command for the current OS
get_app_command() {
    local app_key="$1"
    
    case "$app_key" in
        browser|brave)
            [ "$OS_TYPE" = "macos" ] && echo "Brave Browser" || echo "brave" ;;
        safari)
            [ "$OS_TYPE" = "macos" ] && echo "Safari" || echo "" ;;
        firefox)
            echo "firefox" ;;
        chromium)
            [ "$OS_TYPE" = "macos" ] && echo "Chromium" || echo "chromium" ;;
        notes|obsidian)
            [ "$OS_TYPE" = "macos" ] && echo "Obsidian" || echo "obsidian" ;;
        terminal|wezterm)
            [ "$OS_TYPE" = "macos" ] && echo "WezTerm" || echo "wezterm" ;;
        alacritty)
            [ "$OS_TYPE" = "macos" ] && echo "Alacritty" || echo "alacritty" ;;
        kitty)
            echo "kitty" ;;
        code|vscode)
            [ "$OS_TYPE" = "macos" ] && echo "Code" || echo "code" ;;
        codium|vscodium)
            [ "$OS_TYPE" = "macos" ] && echo "VSCodium" || echo "codium" ;;
        music|spotify)
            [ "$OS_TYPE" = "macos" ] && echo "Spotify" || echo "spotify" ;;
        pdf|preview)
            [ "$OS_TYPE" = "macos" ] && echo "Preview" || echo "evince" ;;
        zathura)
            echo "zathura" ;;
        okular)
            echo "okular" ;;
        slack)
            [ "$OS_TYPE" = "macos" ] && echo "Slack" || echo "slack" ;;
        discord)
            [ "$OS_TYPE" = "macos" ] && echo "Discord" || echo "discord" ;;
        mail)
            [ "$OS_TYPE" = "macos" ] && echo "Mail" || echo "thunderbird" ;;
        telegram)
            [ "$OS_TYPE" = "macos" ] && echo "Telegram" || echo "telegram-desktop" ;;
        signal)
            [ "$OS_TYPE" = "macos" ] && echo "Signal" || echo "signal-desktop" ;;
        raindrop)
            [ "$OS_TYPE" = "macos" ] && echo "Raindrop.io" || echo "raindrop" ;;
        word)
            [ "$OS_TYPE" = "macos" ] && echo "Microsoft Word" || echo "libreoffice --writer" ;;
        excel)
            [ "$OS_TYPE" = "macos" ] && echo "Microsoft Excel" || echo "libreoffice --calc" ;;
        powerpoint)
            [ "$OS_TYPE" = "macos" ] && echo "Microsoft PowerPoint" || echo "libreoffice --impress" ;;
        libreoffice)
            echo "libreoffice" ;;
        files|finder)
            [ "$OS_TYPE" = "macos" ] && echo "Finder" || echo "thunar" ;;
        nautilus)
            echo "nautilus" ;;
        thunar)
            echo "thunar" ;;
        dolphin)
            echo "dolphin" ;;
        *)
            echo "$app_key" ;;
    esac
}

# ------------------------------------------------------------------------------
# App Launcher
# ------------------------------------------------------------------------------
launch_app() {
    local app_key="$1"
    local app_name
    app_name=$(get_app_command "$app_key")
    
    if [ -z "$app_name" ]; then
        echo "‚ö†Ô∏è  App '$app_key' not available on $OS_TYPE"
        return 1
    fi
    
    if [ "$OS_TYPE" = "macos" ]; then
        open -a "$app_name" 2>/dev/null &
    else
        # Linux: try to find and run the command
        local cmd="${app_name,,}"  # lowercase
        
        # Handle commands with arguments (like libreoffice --writer)
        if [[ "$app_name" == *" "* ]]; then
            $app_name &>/dev/null &
        elif command -v "$cmd" &>/dev/null; then
            "$cmd" &>/dev/null &
        elif command -v "$app_name" &>/dev/null; then
            "$app_name" &>/dev/null &
        else
            echo "‚ö†Ô∏è  Could not launch: $app_name"
            return 1
        fi
    fi
    
    echo "‚úì Launched: $app_name"
}

# ------------------------------------------------------------------------------
# Gather Functions
# ------------------------------------------------------------------------------
get_current_workspace() {
    if [ "$OS_TYPE" = "macos" ]; then
        yabai -m query --spaces --space | jq -r '.index'
    else
        hyprctl activeworkspace -j | jq -r '.id'
    fi
}

# Move windows of specific app to a workspace
gather_app_to_space() {
    local app_name="$1"
    local target_space="$2"
    
    if [ "$OS_TYPE" = "macos" ]; then
        yabai -m query --windows | jq -r ".[] | select(.app == \"$app_name\") | .id" | \
            xargs -I {} yabai -m window {} --space "$target_space" 2>/dev/null
    else
        # On Linux, use class name matching
        hyprctl clients -j | jq -r ".[] | select(.class | test(\"$app_name\"; \"i\")) | .address" | \
            while read -r addr; do
                hyprctl dispatch movetoworkspacesilent "$target_space,address:$addr" 2>/dev/null
            done
    fi
}

# ------------------------------------------------------------------------------
# Notification Helper
# ------------------------------------------------------------------------------
notify() {
    local title="$1"
    local message="${2:-}"
    
    if [ "$OS_TYPE" = "macos" ]; then
        osascript -e "display notification \"$message\" with title \"$title\"" 2>/dev/null || true
    else
        if command -v notify-send &>/dev/null; then
            notify-send "$title" "$message" 2>/dev/null || true
        fi
    fi
}

# ------------------------------------------------------------------------------
# Clipboard Helper
# ------------------------------------------------------------------------------
clipboard_copy() {
    if [ "$OS_TYPE" = "macos" ]; then
        pbcopy
    else
        if command -v wl-copy &>/dev/null; then
            wl-copy
        elif command -v xclip &>/dev/null; then
            xclip -selection clipboard
        fi
    fi
}

clipboard_paste() {
    if [ "$OS_TYPE" = "macos" ]; then
        pbpaste
    else
        if command -v wl-paste &>/dev/null; then
            wl-paste
        elif command -v xclip &>/dev/null; then
            xclip -selection clipboard -o
        fi
    fi
}

# ------------------------------------------------------------------------------
# Auto-setup when sourced
# ------------------------------------------------------------------------------
setup_os_commands



################################################################################
FILE PATH: uke/bunches/bunch-manager.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Bunch Manager
# Create and manage environment bunches
# ==============================================================================

BUNCHES_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TEMPLATES_DIR="$(dirname "$BUNCHES_DIR")/templates"

source "$BUNCHES_DIR/lib-os-detect.sh"

show_help() {
    cat << 'HELP'
Bunch Manager - Environment Management System

Usage:
  bunch-manager.sh list                    List all available bunches
  bunch-manager.sh create <name>           Create new bunch from template
  bunch-manager.sh run <name>              Run a bunch
  bunch-manager.sh edit <name>             Edit a bunch script
  bunch-manager.sh help                    Show this help

Examples:
  bunch-manager.sh create deep-work
  bunch-manager.sh run study
  bunch-manager.sh list

HELP
}

list_bunches() {
    echo "Available Bunches:"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
    for script in "$BUNCHES_DIR"/*.sh; do
        if [[ -f "$script" && -x "$script" ]]; then
            name=$(basename "$script" .sh)
            # Skip library files
            [[ "$name" == "lib-os-detect" || "$name" == "bunch-manager" ]] && continue
            echo "  ‚Ä¢ $name"
        fi
    done
    echo ""
    echo "Run with: bunch-manager.sh run <name>"
    echo "Or via hotkey: Cmd+Ctrl+1-5 (macOS) / Alt+Ctrl+1-5 (Linux)"
}

create_bunch() {
    local name=$1
    if [[ -z "$name" ]]; then
        echo "Error: Bunch name required"
        echo "Usage: bunch-manager.sh create <name>"
        exit 1
    fi
    
    local filepath="$BUNCHES_DIR/${name}.sh"
    if [[ -f "$filepath" ]]; then
        echo "Error: Bunch '$name' already exists at $filepath"
        exit 1
    fi
    
    local template="$TEMPLATES_DIR/bunch-template.sh"
    if [[ ! -f "$template" ]]; then
        echo "Error: Template not found at $template"
        exit 1
    fi
    
    # Copy and customize template
    sed -e "s/\[BUNCH_NAME\]/$name/g" \
        -e "s/\[DESCRIPTION\]/Custom environment for $name/g" \
        "$template" > "$filepath"
    
    chmod +x "$filepath"
    echo "‚úÖ Created bunch: $filepath"
    echo ""
    echo "Edit it with:"
    echo "  \$EDITOR $filepath"
    echo ""
    echo "Or run: bunch-manager.sh edit $name"
}

run_bunch() {
    local name=$1
    if [[ -z "$name" ]]; then
        echo "Error: Bunch name required"
        list_bunches
        exit 1
    fi
    
    local filepath="$BUNCHES_DIR/${name}.sh"
    if [[ ! -f "$filepath" ]]; then
        echo "Error: Bunch '$name' not found"
        echo ""
        list_bunches
        exit 1
    fi
    
    echo "üöÄ Running bunch: $name"
    "$filepath"
}

edit_bunch() {
    local name=$1
    if [[ -z "$name" ]]; then
        echo "Error: Bunch name required"
        exit 1
    fi
    
    local filepath="$BUNCHES_DIR/${name}.sh"
    if [[ ! -f "$filepath" ]]; then
        echo "Error: Bunch '$name' not found"
        echo "Create it with: bunch-manager.sh create $name"
        exit 1
    fi
    
    ${EDITOR:-nvim} "$filepath"
}

case "${1:-help}" in
    list|ls)    list_bunches ;;
    create|new) create_bunch "$2" ;;
    run)        run_bunch "$2" ;;
    edit)       edit_bunch "$2" ;;
    help|--help|-h|*) show_help ;;
esac



################################################################################
FILE PATH: uke/bunches/reading.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: Reading
# Description: Focused reading environment
# ==============================================================================

source "$(dirname "$0")/lib-os-detect.sh"

BUNCH_NAME="reading"
PRIMARY_SPACE=5

echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to documents workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications
launch_app "pdf"
sleep 1
launch_app "obsidian"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE (Documents)"



################################################################################
FILE PATH: uke/uke_full_context.txt
################################################################################


================================================================================
DIRECTORY STRUCTURE
================================================================================
uke  [error opening dir]

0 directories, 0 files






################################################################################
FILE PATH: uke/bin/uke-debug
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Debug - Diagnostics
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"
source "$UKE_ROOT/lib/wm.sh"

dump_system() {
    cat << EOF
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    UKE Debug Report                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Generated: $(date)

SYSTEM
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  OS:       $(uname -s) $(uname -r)
  Platform: $UKE_OS
  Shell:    $SHELL
  User:     $USER
  Home:     $HOME

UKE
‚îÄ‚îÄ‚îÄ‚îÄ
  Version:  $UKE_VERSION
  Root:     $UKE_ROOT
  Config:   $UKE_CONFIG
  Gen:      $UKE_GEN

DEPENDENCIES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
EOF

    for cmd in stow jq git yabai skhd hyprctl borders; do
        if command -v $cmd &>/dev/null; then
            printf "  ‚úì %-12s %s\n" "$cmd:" "$(command -v $cmd)"
        else
            printf "  ‚úó %-12s %s\n" "$cmd:" "not found"
        fi
    done

    cat << EOF

WINDOW MANAGER
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  Running:   $(wm_running && echo "yes" || echo "no")
  Workspace: $(wm_current_workspace 2>/dev/null || echo "unknown")

FILES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  Registry: $(ls -lh "$UKE_CONFIG/registry.yaml" 2>/dev/null | awk '{print $5, $6, $7, $8}' || echo "missing")
EOF

    if is_macos; then
        echo "  skhdrc:   $(ls -lh "$UKE_GEN/skhd/skhdrc" 2>/dev/null | awk '{print $5, $6, $7, $8}' || echo "missing")"
        echo "  yabairc:  $(ls -lh "$UKE_GEN/yabai/yabairc" 2>/dev/null | awk '{print $5, $6, $7, $8}' || echo "missing")"
    else
        echo "  hyprland: $(ls -lh "$UKE_GEN/hyprland/hyprland.conf" 2>/dev/null | awk '{print $5, $6, $7, $8}' || echo "missing")"
    fi

    cat << EOF

RECENT LOGS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
EOF
    tail -n 15 "$UKE_LOG_FILE" 2>/dev/null || echo "  No logs available"
    
    echo ""
    echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
}

trace_key() {
    local key="$1"
    log_info "Tracing keybinding: $key"
    
    echo ""
    echo "In generated skhd config:"
    grep -n "$key" "$UKE_GEN/skhd/skhdrc" 2>/dev/null || echo "  Not found"
}

case "${1:-dump}" in
    dump)  dump_system ;;
    trace) trace_key "${2:-h}" ;;
    *)     echo "Usage: uke-debug [dump|trace <key>]" ;;
esac



################################################################################
FILE PATH: uke/bin/uke-backup
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Backup - Config backup utility
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

BACKUP_ROOT="$HOME/.uke-backups"

create_backup() {
    local timestamp=$(date +%Y%m%d-%H%M%S)
    local backup_dir="$BACKUP_ROOT/$timestamp"
    
    log_info "Creating backup: $backup_dir"
    mkdir -p "$backup_dir"
    
    # Backup registry
    cp "$UKE_CONFIG/registry.yaml" "$backup_dir/" && ok "Backed up registry.yaml"
    
    # Backup generated configs
    if is_macos; then
        [[ -f "$UKE_GEN/skhd/skhdrc" ]] && cp "$UKE_GEN/skhd/skhdrc" "$backup_dir/"
        [[ -f "$UKE_GEN/yabai/yabairc" ]] && cp "$UKE_GEN/yabai/yabairc" "$backup_dir/"
    else
        [[ -f "$UKE_GEN/hyprland/hyprland.conf" ]] && cp "$UKE_GEN/hyprland/hyprland.conf" "$backup_dir/"
    fi
    
    # Create manifest
    cat > "$backup_dir/MANIFEST.txt" << EOF
UKE Backup
Created: $(date)
Platform: $UKE_OS
Version: $UKE_VERSION

Files:
$(ls -1 "$backup_dir" | grep -v MANIFEST)
EOF
    
    ok "Backup complete: $backup_dir"
}

list_backups() {
    if [[ ! -d "$BACKUP_ROOT" ]]; then
        log_info "No backups found"
        return 0
    fi
    
    echo "Available backups:"
    for backup in "$BACKUP_ROOT"/*; do
        [[ -d "$backup" ]] || continue
        echo "  $(basename "$backup")"
    done
}

restore_backup() {
    local name="$1"
    local backup_dir="$BACKUP_ROOT/$name"
    
    [[ -d "$backup_dir" ]] || log_fatal "Backup not found: $name"
    
    log_warn "This will overwrite your current configs!"
    read -p "Continue? (y/N) " -n 1 -r
    echo
    [[ $REPLY =~ ^[Yy]$ ]] || { log_info "Aborted"; return 1; }
    
    [[ -f "$backup_dir/registry.yaml" ]] && {
        cp "$backup_dir/registry.yaml" "$UKE_CONFIG/"
        ok "Restored registry.yaml"
    }
    
    log_info "Run 'uke gen && uke reload' to apply"
}

case "${1:-}" in
    create|"") create_backup ;;
    list|ls)   list_backups ;;
    restore)   restore_backup "${2:-}" ;;
    *)         echo "Usage: uke-backup [create|list|restore <name>]" ;;
esac



################################################################################
FILE PATH: uke/bin/uke-scratchpad
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Scratchpad - Toggle dropdown/floating windows
# ==============================================================================
# Supports both macOS (yabai) and Linux (Hyprland special workspaces)
# ==============================================================================
set -euo pipefail

# Resolve symlink to find true source location
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

SCRATCH_STATE="$UKE_STATE/scratchpads"
mkdir -p "$SCRATCH_STATE"

# ==============================================================================
# Scratchpad Definitions (hardcoded for reliability)
# ==============================================================================
declare -A SCRATCH_APPS_MACOS=(
    [terminal]="WezTerm"
    [notes]="Obsidian"
    [music]="Spotify"
    [calc]="Calculator"
)

declare -A SCRATCH_APPS_LINUX=(
    [terminal]="wezterm"
    [notes]="obsidian"
    [music]="spotify"
    [calc]="gnome-calculator"
)

declare -A SCRATCH_SIZE=(
    [terminal]="80:40:top"      # width%:height%:position
    [notes]="70:80:center"
    [music]="60:70:center"
    [calc]="30:40:center"
)

# ==============================================================================
# macOS Implementation (yabai)
# ==============================================================================
scratchpad_macos() {
    local name="$1"
    local app_name="${SCRATCH_APPS_MACOS[$name]:-}"
    
    [[ -z "$app_name" ]] && log_fatal "Unknown scratchpad: $name"
    
    # Parse size config
    IFS=':' read -r width height position <<< "${SCRATCH_SIZE[$name]:-80:40:top}"
    
    local state_file="$SCRATCH_STATE/${name}.id"
    
    # Get display dimensions
    local display_info=$(yabai -m query --displays --display)
    local display_w=$(echo "$display_info" | jq -r '.frame.w | floor')
    local display_h=$(echo "$display_info" | jq -r '.frame.h | floor')
    local display_x=$(echo "$display_info" | jq -r '.frame.x | floor')
    local display_y=$(echo "$display_info" | jq -r '.frame.y | floor')
    
    # Calculate window dimensions
    local win_w=$((display_w * width / 100))
    local win_h=$((display_h * height / 100))
    local win_x=$((display_x + (display_w - win_w) / 2))
    local win_y
    
    case "$position" in
        top)    win_y=$((display_y + 40)) ;;
        bottom) win_y=$((display_y + display_h - win_h - 20)) ;;
        center) win_y=$((display_y + (display_h - win_h) / 2)) ;;
        *)      win_y=$((display_y + 40)) ;;
    esac
    
    local window_id=""
    
    # Check saved ID
    if [[ -f "$state_file" ]]; then
        local saved_id=$(cat "$state_file")
        if yabai -m query --windows --window "$saved_id" &>/dev/null; then
            window_id="$saved_id"
        fi
    fi
    
    # Find by app name
    if [[ -z "$window_id" ]]; then
        window_id=$(yabai -m query --windows | jq -r ".[] | select(.app == \"$app_name\") | .id" | head -1)
    fi
    
    # Launch if needed
    if [[ -z "$window_id" || "$window_id" == "null" ]]; then
        log_info "Launching $app_name..."
        open -a "$app_name"
        
        for i in {1..25}; do
            sleep 0.2
            window_id=$(yabai -m query --windows | jq -r ".[] | select(.app == \"$app_name\") | .id" | head -1)
            [[ -n "$window_id" && "$window_id" != "null" ]] && break
        done
        
        [[ -z "$window_id" ]] && log_fatal "Failed to launch $app_name"
    fi
    
    echo "$window_id" > "$state_file"

    # Toggle Logic
    local window_info=$(yabai -m query --windows --window "$window_id")
    local is_minimized=$(echo "$window_info" | jq -r '.["is-minimized"]')
    local current_space=$(yabai -m query --spaces --space | jq -r '.index')
    local window_space=$(echo "$window_info" | jq -r '.space')
    local has_focus=$(echo "$window_info" | jq -r '.["has-focus"]')

    if [[ "$has_focus" == "true" ]]; then
        # Hide it
        yabai -m window "$window_id" --minimize
    else
        # Show it
        if [[ "$window_space" != "$current_space" ]]; then
            yabai -m window "$window_id" --space "$current_space"
        fi

        if [[ "$is_minimized" == "true" ]]; then
            yabai -m window "$window_id" --deminimize
        fi

        # Float and position
        yabai -m window "$window_id" --toggle float 2>/dev/null || true
        yabai -m window "$window_id" --move abs:${win_x}:${win_y}
        yabai -m window "$window_id" --resize abs:${win_w}:${win_h}
        yabai -m window "$window_id" --focus
    fi
}

# ==============================================================================
# Linux Implementation (Hyprland Special Workspaces)
# ==============================================================================
scratchpad_linux() {
    local name="$1"
    local app_cmd="${SCRATCH_APPS_LINUX[$name]:-}"
    
    [[ -z "$app_cmd" ]] && log_fatal "Unknown scratchpad: $name"
    
    # Hyprland special workspace name
    local special_ws="special:$name"
    
    # Parse size config
    IFS=':' read -r width height position <<< "${SCRATCH_SIZE[$name]:-80:40:top}"
    
    # Check if window exists in special workspace
    local existing=$(hyprctl clients -j | jq -r ".[] | select(.workspace.name == \"$special_ws\") | .address" | head -1)
    
    if [[ -n "$existing" ]]; then
        # Toggle the special workspace
        hyprctl dispatch togglespecialworkspace "$name"
    else
        # Check if app is running anywhere
        local app_class="${app_cmd%% *}"  # Get first word (app name without args)
        local running=$(hyprctl clients -j | jq -r ".[] | select(.class | test(\"$app_class\"; \"i\")) | .address" | head -1)
        
        if [[ -n "$running" ]]; then
            # Move existing window to special workspace
            hyprctl dispatch movetoworkspacesilent "$special_ws,address:$running"
            hyprctl dispatch togglespecialworkspace "$name"
        else
            # Launch app in special workspace
            # First, create a window rule for the app
            local rule_class="$app_class"
            
            # Add temporary rule to send to special workspace
            hyprctl keyword windowrulev2 "workspace $special_ws silent,class:^($rule_class)$"
            
            # Launch
            $app_cmd &
            disown
            
            # Wait a moment then show
            sleep 0.5
            hyprctl dispatch togglespecialworkspace "$name"
            
            # Remove the temporary rule after launch
            sleep 1
            hyprctl keyword windowrulev2 "unset,class:^($rule_class)$" 2>/dev/null || true
        fi
    fi
    
    # Apply size/position via animation settings (Hyprland handles special workspace sizing)
    # For custom sizing, we'd need to set it in the static config
}

# ==============================================================================
# List Available Scratchpads
# ==============================================================================
list_scratchpads() {
    echo "Available scratchpads:"
    echo ""
    for name in "${!SCRATCH_SIZE[@]}"; do
        IFS=':' read -r width height position <<< "${SCRATCH_SIZE[$name]}"
        if is_macos; then
            local app="${SCRATCH_APPS_MACOS[$name]:-unknown}"
        else
            local app="${SCRATCH_APPS_LINUX[$name]:-unknown}"
        fi
        printf "  %-12s ‚Üí %-20s (%s%% x %s%%, %s)\n" "$name" "$app" "$width" "$height" "$position"
    done
}

# ==============================================================================
# Main
# ==============================================================================
case "${1:-}" in
    ""|list|ls|help|-h|--help)
        list_scratchpads
        ;;
    *)
        if is_macos; then
            scratchpad_macos "$1"
        else
            scratchpad_linux "$1"
        fi
        ;;
esac



################################################################################
FILE PATH: uke/bin/uke-logs
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Logs - Live log viewer for all components
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

show_help() {
    cat << 'EOF'
UKE Logs - Live log viewer

Usage: uke-logs [component]

Components:
  uke       UKE internal logs
  yabai     Yabai window manager (macOS)
  skhd      skhd hotkey daemon (macOS)
  hyprland  Hyprland compositor (Linux)
  all       All logs combined (requires multitail)

Examples:
  uke-logs uke          # Tail UKE logs
  uke-logs yabai        # Tail yabai logs
  uke-logs all          # Combined view
EOF
}

tail_log() {
    local name="$1" path="$2"
    [[ -f "$path" ]] || { echo "No $name log at $path"; return 1; }
    echo "Tailing: $path (Ctrl+C to stop)"
    echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
    tail -f "$path"
}

tail_all() {
    if command -v multitail &>/dev/null; then
        local logs=()
        [[ -f "$HOME/.local/state/uke/uke.log" ]] && logs+=("$HOME/.local/state/uke/uke.log")
        if is_macos; then
            local y=$(ls /tmp/yabai_*.err.log 2>/dev/null | head -1)
            local s=$(ls /tmp/skhd_*.err.log 2>/dev/null | head -1)
            [[ -f "$y" ]] && logs+=("$y")
            [[ -f "$s" ]] && logs+=("$s")
        else
            [[ -f "$HOME/.local/share/hyprland/hyprland.log" ]] && logs+=("$HOME/.local/share/hyprland/hyprland.log")
        fi
        multitail "${logs[@]}"
    else
        echo "Install 'multitail' for combined view:"
        echo "  macOS: brew install multitail"
        echo "  Linux: sudo pacman -S multitail"
        echo ""
        echo "Or tail individually: uke-logs uke|yabai|skhd|hyprland"
    fi
}

case "${1:-help}" in
    uke)      tail_log "UKE" "$HOME/.local/state/uke/uke.log" ;;
    yabai)    tail_log "yabai" "$(ls /tmp/yabai_*.err.log 2>/dev/null | head -1)" ;;
    skhd)     tail_log "skhd" "$(ls /tmp/skhd_*.err.log 2>/dev/null | head -1)" ;;
    hyprland) tail_log "Hyprland" "$HOME/.local/share/hyprland/hyprland.log" ;;
    all)      tail_all ;;
    help|--help|-h) show_help ;;
    *)        echo "Unknown: $1"; show_help; exit 1 ;;
esac



################################################################################
FILE PATH: uke/bin/uke-bunch
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Bunch Runner
# ==============================================================================
# Runs environment presets from the bunches/ directory
# Usage: uke-bunch <n> or uke-bunch list
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

BUNCHES_DIR="$UKE_ROOT/bunches"

list_bunches() {
    echo "Available bunches:"
    echo ""
    for script in "$BUNCHES_DIR"/*.sh; do
        [[ -f "$script" ]] || continue
        local name=$(basename "$script" .sh)
        # Skip library files
        [[ "$name" == "lib-os-detect" || "$name" == "bunch-manager" ]] && continue
        echo "  ‚Ä¢ $name"
    done
    echo ""
    echo "Run with: uke-bunch <n>"
    echo "Or via hotkey: Cmd+Ctrl+1-5 (macOS) / Alt+Ctrl+1-5 (Linux)"
}

run_bunch() {
    local name="$1"
    local script="$BUNCHES_DIR/${name}.sh"
    
    if [[ ! -f "$script" ]]; then
        log_error "Bunch not found: $name"
        echo ""
        list_bunches
        exit 1
    fi
    
    if [[ ! -x "$script" ]]; then
        chmod +x "$script"
    fi
    
    "$script"
}

case "${1:-}" in
    "") list_bunches ;;
    list|ls) list_bunches ;;
    help|--help|-h) 
        echo "Usage: uke-bunch <n>"
        echo ""
        list_bunches
        ;;
    *) run_bunch "$1" ;;
esac



################################################################################
FILE PATH: uke/bin/uke-session
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Session - Save and restore window layouts
# ==============================================================================
# Usage:
#   uke-session save <n>     Save current layout
#   uke-session restore <n>  Restore a saved layout
#   uke-session list            List saved sessions
#   uke-session delete <n>   Delete a session
#   uke-session export <n>   Export session to stdout (JSON)
# ==============================================================================
set -euo pipefail

# Resolve symlink to find true source location
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

# Session storage
SESSION_DIR="$UKE_STATE/sessions"
mkdir -p "$SESSION_DIR"

# ==============================================================================
# Save Session (macOS)
# ==============================================================================
save_session_macos() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    log_info "Saving session: $name"
    
    # Query all windows
    local windows=$(yabai -m query --windows)
    
    # Query all spaces
    local spaces=$(yabai -m query --spaces)
    
    # Query displays
    local displays=$(yabai -m query --displays)
    
    # Build session data
    local session_data=$(jq -n \
        --arg name "$name" \
        --arg timestamp "$(date -Iseconds)" \
        --argjson windows "$windows" \
        --argjson spaces "$spaces" \
        --argjson displays "$displays" \
        '{
            name: $name,
            timestamp: $timestamp,
            platform: "macos",
            displays: $displays,
            spaces: $spaces,
            windows: [
                $windows[] | select(.["is-floating"] == false or .["is-floating"] == true) | {
                    id: .id,
                    app: .app,
                    title: .title,
                    space: .space,
                    display: .display,
                    frame: .frame,
                    is_floating: .["is-floating"],
                    is_fullscreen: .["has-fullscreen-zoom"],
                    is_minimized: .["is-minimized"],
                    split_type: .["split-type"],
                    stack_index: .["stack-index"]
                }
            ]
        }')
    
    echo "$session_data" > "$session_file"
    
    local window_count=$(echo "$session_data" | jq '.windows | length')
    local space_count=$(echo "$session_data" | jq '[.windows[].space] | unique | length')
    
    ok "Session saved: $name ($window_count windows across $space_count spaces)"
    echo "   File: $session_file"
}

# ==============================================================================
# Restore Session (macOS)
# ==============================================================================
restore_session_macos() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    [[ -f "$session_file" ]] || log_fatal "Session not found: $name"
    
    log_info "Restoring session: $name"
    
    local session_data=$(cat "$session_file")
    local timestamp=$(echo "$session_data" | jq -r '.timestamp')
    
    echo "Session from: $timestamp"
    echo ""
    
    # Get saved windows
    local saved_windows=$(echo "$session_data" | jq -c '.windows[]')
    
    # Track which apps we need to launch
    declare -A apps_to_launch
    declare -A app_spaces
    
    while IFS= read -r window; do
        local app=$(echo "$window" | jq -r '.app')
        local space=$(echo "$window" | jq -r '.space')
        local is_floating=$(echo "$window" | jq -r '.is_floating')
        local frame=$(echo "$window" | jq -c '.frame')
        
        # Check if app is running
        local current_window=$(yabai -m query --windows | jq -r ".[] | select(.app == \"$app\")" | head -1)
        
        if [[ -z "$current_window" ]]; then
            apps_to_launch["$app"]=1
            app_spaces["$app"]="$space"
            echo "  ‚è≥ Will launch: $app ‚Üí space $space"
        else
            local window_id=$(echo "$current_window" | jq -r '.id')
            local current_space=$(echo "$current_window" | jq -r '.space')
            
            # Move to correct space if needed
            if [[ "$current_space" != "$space" ]]; then
                yabai -m window "$window_id" --space "$space" 2>/dev/null || true
                echo "  ‚Üó Moved: $app ‚Üí space $space"
            else
                echo "  ‚úì Already: $app on space $space"
            fi
            
            # Restore floating state
            local current_floating=$(yabai -m query --windows --window "$window_id" | jq -r '.["is-floating"]')
            if [[ "$is_floating" == "true" && "$current_floating" != "true" ]]; then
                yabai -m window "$window_id" --toggle float 2>/dev/null || true
            elif [[ "$is_floating" == "false" && "$current_floating" == "true" ]]; then
                yabai -m window "$window_id" --toggle float 2>/dev/null || true
            fi
            
            # Restore position for floating windows
            if [[ "$is_floating" == "true" && "$frame" != "null" ]]; then
                local x=$(echo "$frame" | jq -r '.x')
                local y=$(echo "$frame" | jq -r '.y')
                local w=$(echo "$frame" | jq -r '.w')
                local h=$(echo "$frame" | jq -r '.h')
                yabai -m window "$window_id" --move abs:${x}:${y} 2>/dev/null || true
                yabai -m window "$window_id" --resize abs:${w}:${h} 2>/dev/null || true
            fi
        fi
    done <<< "$saved_windows"
    
    # Launch missing apps
    for app in "${!apps_to_launch[@]}"; do
        echo "  üöÄ Launching: $app"
        open -a "$app"
        sleep 0.5
        
        # Move to correct space after launch
        local space="${app_spaces[$app]}"
        sleep 0.5
        local new_window=$(yabai -m query --windows | jq -r ".[] | select(.app == \"$app\")" | head -1)
        if [[ -n "$new_window" ]]; then
            local window_id=$(echo "$new_window" | jq -r '.id')
            yabai -m window "$window_id" --space "$space" 2>/dev/null || true
        fi
    done
    
    echo ""
    ok "Session restored: $name"
}

# ==============================================================================
# Save Session (Linux)
# ==============================================================================
save_session_linux() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    log_info "Saving session: $name"
    
    local clients=$(hyprctl clients -j)
    local monitors=$(hyprctl monitors -j)
    local workspaces=$(hyprctl workspaces -j)
    
    local session_data=$(jq -n \
        --arg name "$name" \
        --arg timestamp "$(date -Iseconds)" \
        --argjson clients "$clients" \
        --argjson monitors "$monitors" \
        --argjson workspaces "$workspaces" \
        '{
            name: $name,
            timestamp: $timestamp,
            platform: "linux",
            monitors: $monitors,
            workspaces: $workspaces,
            windows: [
                $clients[] | {
                    address: .address,
                    class: .class,
                    title: .title,
                    workspace: .workspace.id,
                    monitor: .monitor,
                    at: .at,
                    size: .size,
                    floating: .floating,
                    fullscreen: .fullscreen
                }
            ]
        }')
    
    echo "$session_data" > "$session_file"
    
    local window_count=$(echo "$session_data" | jq '.windows | length')
    ok "Session saved: $name ($window_count windows)"
}

# ==============================================================================
# Restore Session (Linux)
# ==============================================================================
restore_session_linux() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    [[ -f "$session_file" ]] || log_fatal "Session not found: $name"
    
    log_info "Restoring session: $name"
    
    local session_data=$(cat "$session_file")
    
    echo "$session_data" | jq -c '.windows[]' | while IFS= read -r window; do
        local class=$(echo "$window" | jq -r '.class')
        local workspace=$(echo "$window" | jq -r '.workspace')
        local floating=$(echo "$window" | jq -r '.floating')
        
        # Check if app is running
        local current=$(hyprctl clients -j | jq -r ".[] | select(.class == \"$class\")" | head -1)
        
        if [[ -z "$current" ]]; then
            echo "  ‚è≥ Launching: $class"
            hyprctl dispatch exec "$class" 2>/dev/null || true
            sleep 0.5
        fi
        
        # Move to workspace
        hyprctl dispatch movetoworkspacesilent "$workspace,class:$class" 2>/dev/null || true
        echo "  ‚úì $class ‚Üí workspace $workspace"
    done
    
    ok "Session restored: $name"
}

# ==============================================================================
# List Sessions
# ==============================================================================
list_sessions() {
    echo "Saved sessions:"
    echo ""
    
    if [[ ! -d "$SESSION_DIR" ]] || [[ -z "$(ls -A "$SESSION_DIR" 2>/dev/null)" ]]; then
        echo "  (no sessions saved)"
        echo ""
        echo "Save with: uke-session save <n>"
        return 0
    fi
    
    for session in "$SESSION_DIR"/*.json; do
        [[ -f "$session" ]] || continue
        local name=$(basename "$session" .json)
        local data=$(cat "$session")
        local timestamp=$(echo "$data" | jq -r '.timestamp')
        local window_count=$(echo "$data" | jq '.windows | length')
        local platform=$(echo "$data" | jq -r '.platform')
        
        printf "  %-20s %s windows  (%s) [%s]\n" "$name" "$window_count" "$timestamp" "$platform"
    done
    
    echo ""
    echo "Restore with: uke-session restore <n>"
}

# ==============================================================================
# Delete Session
# ==============================================================================
delete_session() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    [[ -f "$session_file" ]] || log_fatal "Session not found: $name"
    
    rm "$session_file"
    ok "Session deleted: $name"
}

# ==============================================================================
# Export Session
# ==============================================================================
export_session() {
    local name="$1"
    local session_file="$SESSION_DIR/${name}.json"
    
    [[ -f "$session_file" ]] || log_fatal "Session not found: $name"
    
    cat "$session_file"
}

# ==============================================================================
# Quick Save/Restore (numbered slots)
# ==============================================================================
quick_save() {
    local slot="${1:-1}"
    if is_macos; then
        save_session_macos "quick-$slot"
    else
        save_session_linux "quick-$slot"
    fi
}

quick_restore() {
    local slot="${1:-1}"
    if is_macos; then
        restore_session_macos "quick-$slot"
    else
        restore_session_linux "quick-$slot"
    fi
}

# ==============================================================================
# Help
# ==============================================================================
show_help() {
    cat << 'EOF'
UKE Session - Save and restore window layouts

Usage:
  uke-session save <n>       Save current layout
  uke-session restore <n>    Restore a saved layout
  uke-session list              List saved sessions
  uke-session delete <n>     Delete a session
  uke-session export <n>     Export session as JSON
  uke-session quick-save [n]    Quick save to slot (1-9)
  uke-session quick-restore [n] Quick restore from slot

Examples:
  uke-session save deep-work
  uke-session restore deep-work
  uke-session quick-save 1
  uke-session quick-restore 1

Sessions are stored in: ~/.local/state/uke/sessions/
EOF
}

# ==============================================================================
# Main
# ==============================================================================
case "${1:-list}" in
    save)
        [[ -n "${2:-}" ]] || log_fatal "Usage: uke-session save <n>"
        if is_macos; then
            save_session_macos "$2"
        else
            save_session_linux "$2"
        fi
        ;;
    restore)
        [[ -n "${2:-}" ]] || log_fatal "Usage: uke-session restore <n>"
        if is_macos; then
            restore_session_macos "$2"
        else
            restore_session_linux "$2"
        fi
        ;;
    list|ls)
        list_sessions
        ;;
    delete|rm)
        [[ -n "${2:-}" ]] || log_fatal "Usage: uke-session delete <n>"
        delete_session "$2"
        ;;
    export)
        [[ -n "${2:-}" ]] || log_fatal "Usage: uke-session export <n>"
        export_session "$2"
        ;;
    quick-save|qs)
        quick_save "${2:-1}"
        ;;
    quick-restore|qr)
        quick_restore "${2:-1}"
        ;;
    help|--help|-h)
        show_help
        ;;
    *)
        log_error "Unknown command: $1"
        show_help
        exit 1
        ;;
esac



################################################################################
FILE PATH: uke/bin/uke-doctor
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Doctor - Health Check (Arch Linux Ready)
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

# ==============================================================================
# Dependency Check
# ==============================================================================
check_deps() {
    local status=0
    echo "Checking dependencies..."
    
    # Universal dependencies
    for cmd in stow jq git; do
        if command -v $cmd &>/dev/null; then
            ok "$cmd installed"
        else
            fail "$cmd not found"
            status=1
        fi
    done
    
    if is_macos; then
        # macOS-specific
        for cmd in yabai skhd; do
            if command -v $cmd &>/dev/null; then
                ok "$cmd installed"
            else
                fail "$cmd not found"
                status=1
            fi
        done
        
        if command -v borders &>/dev/null; then
            ok "borders installed"
        else
            log_warn "borders not found (optional, for window borders)"
        fi
        
        if command -v yq &>/dev/null; then
            ok "yq installed"
        else
            log_warn "yq not found (needed for config generation from registry.yaml)"
        fi
    else
        # Linux-specific
        if command -v hyprctl &>/dev/null; then
            ok "hyprland installed"
        else
            fail "hyprland not found"
            status=1
        fi
        
        if command -v keyd &>/dev/null; then
            ok "keyd installed"
        else
            log_warn "keyd not found (needed for Caps Lock remapping)"
        fi
        
        # Optional Hyprland ecosystem tools
        local optional_linux=(waybar dunst wofi grim slurp wl-copy)
        local missing_optional=()
        
        for cmd in "${optional_linux[@]}"; do
            if ! command -v $cmd &>/dev/null; then
                missing_optional+=("$cmd")
            fi
        done
        
        if [[ ${#missing_optional[@]} -gt 0 ]]; then
            log_warn "Optional tools not found: ${missing_optional[*]}"
            echo "      Install with: sudo pacman -S ${missing_optional[*]}"
        fi
    fi
    
    return $status
}

# ==============================================================================
# Config Check
# ==============================================================================
check_configs() {
    local status=0
    echo ""
    echo "Checking configurations..."
    
    [[ -f "$UKE_CONFIG/registry.yaml" ]] && ok "registry.yaml exists" || { fail "registry.yaml missing"; status=1; }
    
    if is_macos; then
        [[ -f "$UKE_GEN/skhd/skhdrc" ]] && ok "skhd config generated" || { fail "skhd config missing - run 'uke gen'"; status=1; }
        [[ -f "$UKE_GEN/yabai/yabairc" ]] && ok "yabai config generated" || { fail "yabai config missing - run 'uke gen'"; status=1; }
    else
        [[ -f "$UKE_GEN/hyprland/hyprland.conf" ]] && ok "hyprland config generated" || { fail "hyprland config missing - run 'uke gen'"; status=1; }
        
        # Check keyd config
        if [[ -f "$UKE_STOW/keyd/.config/keyd/default.conf" ]]; then
            ok "keyd config exists in stow"
            
            if [[ -L /etc/keyd/default.conf ]]; then
                ok "keyd config linked to /etc/keyd/"
            elif [[ -f /etc/keyd/default.conf ]]; then
                log_warn "/etc/keyd/default.conf exists but is not a symlink"
            else
                log_warn "keyd config not linked - run 'scripts/keyd-setup.sh'"
            fi
        else
            log_warn "keyd config not found in stow/keyd/"
        fi
    fi
    
    return $status
}

# ==============================================================================
# Symlink Check
# ==============================================================================
check_links() {
    local status=0
    echo ""
    echo "Checking symlinks..."
    
    # Check binaries
    for bin in uke uke-bunch uke-gather uke-logs uke-scratchpad uke-session; do
        if [[ -x "$HOME/.local/bin/$bin" ]]; then
            ok "$bin linked"
        else
            fail "$bin not in ~/.local/bin"
            status=1
        fi
    done
    
    # Check config symlinks
    echo ""
    echo "Checking config symlinks..."
    
    if is_macos; then
        if [[ -L "$HOME/.config/skhd/skhdrc" ]]; then
            ok "skhdrc linked"
        else
            fail "skhdrc not linked"
            status=1
        fi
        
        if [[ -L "$HOME/.config/yabai/yabairc" ]]; then
            ok "yabairc linked"
        else
            fail "yabairc not linked"
            status=1
        fi
    else
        if [[ -L "$HOME/.config/hypr/hyprland.conf" ]]; then
            ok "hyprland.conf linked"
        else
            fail "hyprland.conf not linked"
            status=1
        fi
    fi
    
    # Check stowed dotfiles
    echo ""
    echo "Checking stowed dotfiles..."
    
    local dotfiles=(".wezterm.lua" ".tmux.conf" ".zshrc")
    for dot in "${dotfiles[@]}"; do
        if [[ -L "$HOME/$dot" ]]; then
            ok "$dot stowed"
        elif [[ -f "$HOME/$dot" ]]; then
            log_warn "$dot exists but not a symlink"
        else
            log_warn "$dot not found"
        fi
    done
    
    if [[ -L "$HOME/.config/nvim" ]] || [[ -d "$HOME/.config/nvim" ]]; then
        ok "nvim config exists"
    else
        log_warn "nvim config not found"
    fi
    
    return $status
}

# ==============================================================================
# Service Check
# ==============================================================================
check_services() {
    echo ""
    echo "Checking services..."
    
    if is_macos; then
        if pgrep -q yabai; then
            ok "yabai running"
        else
            fail "yabai not running"
        fi
        
        if pgrep -q skhd; then
            ok "skhd running"
        else
            fail "skhd not running"
        fi
    else
        if [[ -n "${HYPRLAND_INSTANCE_SIGNATURE:-}" ]]; then
            ok "hyprland running"
        else
            log_warn "hyprland not running (or not in Hyprland session)"
        fi
        
        # Check keyd service
        if command -v keyd &>/dev/null; then
            if systemctl is-active keyd &>/dev/null; then
                ok "keyd service active"
            else
                log_warn "keyd service not running - run 'sudo systemctl enable --now keyd'"
            fi
        fi
        
        # Check optional services
        if pgrep -x waybar &>/dev/null; then
            ok "waybar running"
        else
            log_warn "waybar not running (optional)"
        fi
        
        if pgrep -x dunst &>/dev/null; then
            ok "dunst running"
        else
            log_warn "dunst not running (optional)"
        fi
    fi
}

# ==============================================================================
# Arch-specific Checks
# ==============================================================================
check_arch() {
    if [[ ! -f /etc/arch-release ]]; then
        return 0
    fi
    
    echo ""
    echo "Arch Linux specific checks..."
    
    # Check if user is in input group (needed for keyd)
    if groups | grep -q '\binput\b'; then
        ok "User in 'input' group"
    else
        log_warn "User not in 'input' group (may be needed for keyd)"
        echo "      Add with: sudo usermod -aG input \$USER"
    fi
    
    # Check if Hyprland is in path
    if [[ -n "${XDG_SESSION_TYPE:-}" ]]; then
        echo "  Session type: $XDG_SESSION_TYPE"
    fi
    
    if [[ -n "${XDG_CURRENT_DESKTOP:-}" ]]; then
        echo "  Desktop: $XDG_CURRENT_DESKTOP"
    fi
}

# ==============================================================================
# Main
# ==============================================================================
main() {
    echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo "‚ïë     UKE Doctor - Health Check        ‚ïë"
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    echo ""
    echo "Platform: $UKE_OS"
    echo "UKE Root: $UKE_ROOT"
    echo "UKE Version: $UKE_VERSION"
    echo ""
    
    local overall=0
    
    check_deps || overall=1
    check_configs || overall=1
    check_links || overall=1
    check_services
    check_arch
    
    echo ""
    if [[ $overall -eq 0 ]]; then
        echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
        ok "All checks passed!"
    else
        echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
        fail "Some checks failed - see above"
        echo ""
        echo "Quick fixes:"
        echo "  uke gen           # Regenerate configs"
        echo "  uke install       # Re-run installer"
        echo "  uke reload        # Reload window manager"
    fi
    
    return $overall
}

main "$@"



################################################################################
FILE PATH: uke/bin/uke-launch
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Launch - Smart App Launcher
# ==============================================================================
# Opens apps AND switches to their designated workspace
# Usage: uke-launch <app>
# ==============================================================================
set -euo pipefail

SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
export UKE_ROOT="${SCRIPT_DIR%/bin}"
source "$UKE_ROOT/lib/core.sh"

# ==============================================================================
# App ‚Üí Workspace Mapping
# ==============================================================================
declare -A APP_WORKSPACE=(
    # Workspace 1: Browser
    [brave]=1 [safari]=1 [firefox]=1 [chromium]=1 [chrome]=1
    # Workspace 2: Notes
    [obsidian]=2 [notion]=2 [bear]=2
    # Workspace 3: Code
    [wezterm]=3 [terminal]=3 [alacritty]=3 [kitty]=3
    [code]=3 [vscode]=3 [codium]=3 [xcode]=3 [cursor]=3
    [intellij]=3 [webstorm]=3 [pycharm]=3
    # Workspace 4: Catch-all (no assignment)
    # Workspace 5: Documents
    [preview]=5 [evince]=5 [zathura]=5 [okular]=5 [pdf]=5
    # Workspace 6: Raindrop
    [raindrop]=6
    # Workspace 7: Media
    [spotify]=7 [music]=7 [apple-music]=7
    # Workspace 8: Office
    [word]=8 [excel]=8 [powerpoint]=8 [libreoffice]=8 [pages]=8 [numbers]=8 [keynote]=8
    # Workspace 9: Communication
    [slack]=9 [discord]=9 [mail]=9 [thunderbird]=9 [telegram]=9 [whatsapp]=9 [messages]=9 [teams]=9
    # Workspace 10: AI
    [claude]=10 [perplexity]=10 [chatgpt]=10
)

# ==============================================================================
# App Name ‚Üí Launch Command
# ==============================================================================
get_launch_cmd() {
    local app="$1"
    
    if is_macos; then
        case "$app" in
            brave)       echo "open -a 'Brave Browser'" ;;
            safari)      echo "open -a Safari" ;;
            firefox)     echo "open -a Firefox" ;;
            chrome)      echo "open -a 'Google Chrome'" ;;
            obsidian)    echo "open -a Obsidian" ;;
            notion)      echo "open -a Notion" ;;
            wezterm)     echo "open -a WezTerm" ;;
            terminal)    echo "open -a Terminal" ;;
            alacritty)   echo "open -a Alacritty" ;;
            code)        echo "open -a 'Visual Studio Code'" ;;
            xcode)       echo "open -a Xcode" ;;
            cursor)      echo "open -a Cursor" ;;
            preview)     echo "open -a Preview" ;;
            spotify)     echo "open -a Spotify" ;;
            music)       echo "open -a Music" ;;
            word)        echo "open -a 'Microsoft Word'" ;;
            excel)       echo "open -a 'Microsoft Excel'" ;;
            powerpoint)  echo "open -a 'Microsoft PowerPoint'" ;;
            pages)       echo "open -a Pages" ;;
            numbers)     echo "open -a Numbers" ;;
            keynote)     echo "open -a Keynote" ;;
            slack)       echo "open -a Slack" ;;
            discord)     echo "open -a Discord" ;;
            mail)        echo "open -a Mail" ;;
            telegram)    echo "open -a Telegram" ;;
            whatsapp)    echo "open -a WhatsApp" ;;
            messages)    echo "open -a Messages" ;;
            teams)       echo "open -a 'Microsoft Teams'" ;;
            raindrop)    echo "open -a Raindrop.io" ;;
            claude)      echo "open -a Claude" ;;
            perplexity)  echo "open -a Perplexity" ;;
            *)           echo "open -a '$app'" ;;
        esac
    else
        case "$app" in
            brave)       echo "brave" ;;
            firefox)     echo "firefox" ;;
            chromium)    echo "chromium" ;;
            chrome)      echo "google-chrome-stable" ;;
            obsidian)    echo "obsidian" ;;
            notion)      echo "notion-app" ;;
            wezterm)     echo "wezterm" ;;
            terminal)    echo "wezterm" ;;
            alacritty)   echo "alacritty" ;;
            kitty)       echo "kitty" ;;
            code)        echo "code" ;;
            codium)      echo "codium" ;;
            cursor)      echo "cursor" ;;
            evince)      echo "evince" ;;
            zathura)     echo "zathura" ;;
            okular)      echo "okular" ;;
            spotify)     echo "spotify" ;;
            libreoffice) echo "libreoffice" ;;
            word)        echo "libreoffice --writer" ;;
            excel)       echo "libreoffice --calc" ;;
            powerpoint)  echo "libreoffice --impress" ;;
            slack)       echo "slack" ;;
            discord)     echo "discord" ;;
            thunderbird) echo "thunderbird" ;;
            mail)        echo "thunderbird" ;;
            telegram)    echo "telegram-desktop" ;;
            signal)      echo "signal-desktop" ;;
            raindrop)    echo "raindrop" ;;
            claude)      echo "claude" ;;
            *)           echo "$app" ;;
        esac
    fi
}

# ==============================================================================
# Switch Workspace
# ==============================================================================
switch_workspace() {
    local ws="$1"
    if is_macos; then
        yabai -m space --focus "$ws" 2>/dev/null || true
    else
        hyprctl dispatch workspace "$ws" 2>/dev/null || true
    fi
}

# ==============================================================================
# Launch App
# ==============================================================================
launch_app() {
    local app="$1"
    local workspace="${APP_WORKSPACE[$app]:-}"
    local cmd=$(get_launch_cmd "$app")
    
    # Switch to workspace first (if assigned)
    if [[ -n "$workspace" ]]; then
        log_info "Switching to workspace $workspace..."
        switch_workspace "$workspace"
        sleep 0.1
    fi
    
    # Launch the app
    log_info "Launching $app..."
    if is_macos; then
        eval "$cmd"
    else
        # Launch in background, detached
        nohup $cmd >/dev/null 2>&1 &
        disown
    fi
    
    ok "Launched $app" ${workspace:+"‚Üí workspace $workspace"}
}

# ==============================================================================
# List Apps
# ==============================================================================
list_apps() {
    echo "Available apps with workspace assignments:"
    echo ""
    printf "%-15s %s\n" "APP" "WORKSPACE"
    printf "%-15s %s\n" "---" "---------"
    
    # Sort by workspace
    for app in $(echo "${!APP_WORKSPACE[@]}" | tr ' ' '\n' | sort); do
        printf "%-15s %s\n" "$app" "${APP_WORKSPACE[$app]}"
    done
}

# ==============================================================================
# Main
# ==============================================================================
case "${1:-}" in
    ""|list|ls|-l)
        list_apps
        ;;
    -h|--help|help)
        cat << 'EOF'
UKE Launch - Smart App Launcher

Usage:
  uke-launch <app>     Launch app and switch to its workspace
  uke-launch list      List all apps and their workspaces

Examples:
  uke-launch brave     ‚Üí Opens Brave and switches to WS 1
  uke-launch obsidian  ‚Üí Opens Obsidian and switches to WS 2
  uke-launch code      ‚Üí Opens VS Code and switches to WS 3
EOF
        ;;
    *)
        launch_app "$1"
        ;;
esac



################################################################################
FILE PATH: uke/bin/uke
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE - Unified Keyboard Environment CLI v6.1
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export UKE_ROOT="${SCRIPT_DIR%/bin}"

source "$UKE_ROOT/lib/core.sh"
source "$UKE_ROOT/lib/wm.sh"

cmd_gen() {
    bash "$UKE_LIB/gen.sh" "${1:-all}"
}

cmd_reload() {
    wm_reload
}

cmd_status() {
    echo "UKE v$UKE_VERSION"
    echo "Platform: $UKE_OS"
    echo "Root: $UKE_ROOT"
    echo ""
    wm_running && ok "Window manager running" || fail "Window manager not running"
    echo "Current workspace: $(wm_current_workspace 2>/dev/null || echo 'unknown')"
}

cmd_validate() {
    log_info "Validating configuration..."
    require_file "$UKE_CONFIG/registry.yaml"
    
    if is_macos; then
        [[ -f "$UKE_GEN/skhd/skhdrc" ]] && ok "skhd config exists" || fail "skhd config missing"
        [[ -f "$UKE_GEN/yabai/yabairc" ]] && ok "yabai config exists" || fail "yabai config missing"
    else
        [[ -f "$UKE_GEN/hyprland/hyprland.conf" ]] && ok "hyprland config exists" || fail "hyprland config missing"
    fi
}

cmd_edit() {
    local target="${1:-registry}"
    local file
    
    case "$target" in
        registry|reg) file="$UKE_CONFIG/registry.yaml" ;;
        skhd)         file="$UKE_GEN/skhd/skhdrc" ;;
        yabai)        file="$UKE_GEN/yabai/yabairc" ;;
        hyprland)     file="$UKE_GEN/hyprland/hyprland.conf" ;;
        *)            log_fatal "Unknown target: $target" ;;
    esac
    
    ${EDITOR:-nvim} "$file"
}

cmd_log() {
    case "${1:-tail}" in
        tail)  tail -n "${2:-50}" "$UKE_LOG_FILE" 2>/dev/null || echo "No logs" ;;
        clear) : > "$UKE_LOG_FILE" && ok "Log cleared" ;;
        path)  echo "$UKE_LOG_FILE" ;;
        *)     log_fatal "Unknown: $1" ;;
    esac
}

cmd_install() {
    bash "$UKE_SCRIPTS/install.sh" "$@"
}

cmd_help() {
    cat << EOF
UKE v$UKE_VERSION - Unified Keyboard Environment

Usage: uke <command> [args]

Commands:
  gen [target]     Generate configs (skhd|yabai|hyprland|all)
  reload           Reload window manager
  status           Show status
  validate         Validate configuration
  edit [target]    Edit config (registry|skhd|yabai|hyprland)
  log [cmd]        Manage logs (tail|clear|path)
  install [opts]   Run installer
  help             Show this help

Examples:
  uke gen                    # Generate all configs
  uke edit                   # Edit registry.yaml
  uke gen && uke reload      # Apply changes

Companion commands:
  uke-gather                 # Organize windows to workspaces
  uke-bunch <n>           # Run environment preset
  uke-scratchpad <n>      # Toggle scratchpad window
  uke-session <cmd>          # Save/restore window layouts
  uke-doctor                 # Health check
  uke-backup                 # Backup configs
  uke-debug                  # Diagnostics
  uke-logs [component]       # Live log viewer
EOF
}

case "${1:-help}" in
    gen|generate)  shift; cmd_gen "$@" ;;
    reload)        cmd_reload ;;
    status)        cmd_status ;;
    validate)      cmd_validate ;;
    edit)          shift; cmd_edit "$@" ;;
    log)           shift; cmd_log "$@" ;;
    install)       shift; cmd_install "$@" ;;
    help|--help|-h) cmd_help ;;
    version|--version|-v) echo "UKE v$UKE_VERSION" ;;
    *) log_error "Unknown command: $1"; cmd_help; exit 1 ;;
esac



################################################################################
FILE PATH: uke/bin/uke-gather
################################################################################

#!/usr/bin/env bash
set -euo pipefail

# Resolve symlink to find true source location
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
export UKE_ROOT="${SCRIPT_DIR%/bin}"

source "$UKE_ROOT/lib/core.sh"
require_cmd jq

gather_macos() {
    local current_space
    current_space=$(yabai -m query --spaces --space | jq -r '.index')
    log_info "Gathering windows for space $current_space..."
    
    case $current_space in
        1)
            yabai -m query --windows | jq -r '.[] | select(.app == "Safari" or .app == "Brave Browser") | .id' | \
                xargs -I {} yabai -m window {} --space 1 2>/dev/null || true
            ;;
        2)
            yabai -m query --windows | jq -r '.[] | select(.app == "Obsidian") | .id' | \
                xargs -I {} yabai -m window {} --space 2 2>/dev/null || true
            ;;
        3)
            yabai -m query --windows | jq -r '.[] | select(.app == "WezTerm" or .app == "Code" or .app == "Xcode") | .id' | \
                xargs -I {} yabai -m window {} --space 3 2>/dev/null || true
            ;;
        5)
            yabai -m query --windows | jq -r '.[] | select(.app == "Preview" or .app == "PDF Expert") | .id' | \
                xargs -I {} yabai -m window {} --space 5 2>/dev/null || true
            ;;
        6)
            yabai -m query --windows | jq -r '.[] | select(.app == "Raindrop.io") | .id' | \
                xargs -I {} yabai -m window {} --space 6 2>/dev/null || true
            ;;
        7)
            yabai -m query --windows | jq -r '.[] | select(.app == "Spotify") | .id' | \
                xargs -I {} yabai -m window {} --space 7 2>/dev/null || true
            ;;
        8)
            yabai -m query --windows | jq -r '.[] | select(.app == "Microsoft Word" or .app == "Microsoft Excel" or .app == "Microsoft PowerPoint") | .id' | \
                xargs -I {} yabai -m window {} --space 8 2>/dev/null || true
            ;;
        9)
            yabai -m query --windows | jq -r '.[] | select(.app == "Slack" or .app == "Discord" or .app == "Mail") | .id' | \
                xargs -I {} yabai -m window {} --space 9 2>/dev/null || true
            ;;
        10)
            yabai -m query --windows | jq -r '.[] | select(.app == "Claude" or .app == "Perplexity") | .id' | \
                xargs -I {} yabai -m window {} --space 10 2>/dev/null || true
            ;;
        *)
            log_info "No gather action for space $current_space"
            ;;
    esac
    ok "Windows gathered"
}

gather_linux() {
    local current_ws
    current_ws=$(hyprctl activeworkspace -j | jq -r '.id')
    log_info "Gathering windows for workspace $current_ws..."
    
    case $current_ws in
        1)
            hyprctl clients -j | jq -r '.[] | select(.class | test("brave|firefox|chromium"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "1,address:$addr" 2>/dev/null; done
            ;;
        2)
            hyprctl clients -j | jq -r '.[] | select(.class | test("obsidian"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "2,address:$addr" 2>/dev/null; done
            ;;
        3)
            hyprctl clients -j | jq -r '.[] | select(.class | test("wezterm|code|alacritty|kitty"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "3,address:$addr" 2>/dev/null; done
            ;;
        5)
            hyprctl clients -j | jq -r '.[] | select(.class | test("evince|zathura|okular"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "5,address:$addr" 2>/dev/null; done
            ;;
        6)
            hyprctl clients -j | jq -r '.[] | select(.class | test("raindrop"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "6,address:$addr" 2>/dev/null; done
            ;;
        7)
            hyprctl clients -j | jq -r '.[] | select(.class | test("spotify"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "7,address:$addr" 2>/dev/null; done
            ;;
        8)
            hyprctl clients -j | jq -r '.[] | select(.class | test("libreoffice|soffice"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "8,address:$addr" 2>/dev/null; done
            ;;
        9)
            hyprctl clients -j | jq -r '.[] | select(.class | test("slack|discord|thunderbird|telegram"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "9,address:$addr" 2>/dev/null; done
            ;;
        10)
            hyprctl clients -j | jq -r '.[] | select(.class | test("claude"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "10,address:$addr" 2>/dev/null; done
            ;;
        *)
            log_info "No gather action for workspace $current_ws"
            ;;
    esac
    ok "Windows gathered"
}

is_macos && gather_macos || gather_linux



################################################################################
FILE PATH: uke/config/registry.yaml
################################################################################

# ==============================================================================
# UKE Registry v6.2
# ==============================================================================
# Single source of truth for the Unified Keyboard Environment
# Edit this file, then run: uke gen && uke reload
# ==============================================================================

version: "6.2.0"

# ==============================================================================
# Modifiers
# ==============================================================================
# Maps logical modifier names to physical keys per platform
modifiers:
  primary:        { macos: "cmd",           linux: "ALT" }
  primary_shift:  { macos: "cmd + shift",   linux: "ALT SHIFT" }
  secondary:      { macos: "alt",           linux: "SUPER" }
  tertiary:       { macos: "alt + shift",   linux: "SUPER SHIFT" }
  quaternary:     { macos: "ctrl",          linux: "CTRL" }
  bunch:          { macos: "cmd + ctrl",    linux: "ALT CTRL" }
  launcher:       { macos: "cmd + alt",     linux: "ALT SUPER" }

# ==============================================================================
# Applications
# ==============================================================================
# Maps app nicknames to actual app names per platform
apps:
  # Browsers
  safari:      { macos: "Safari",           linux: "" }
  brave:       { macos: "Brave Browser",    linux: "brave" }
  
  # Notes & Documents
  obsidian:    { macos: "Obsidian",         linux: "obsidian" }
  preview:     { macos: "Preview",          linux: "evince" }
  pdfexpert:   { macos: "PDF Expert",       linux: "" }
  
  # Development
  wezterm:     { macos: "WezTerm",          linux: "wezterm" }
  code:        { macos: "Code",             linux: "code" }
  xcode:       { macos: "Xcode",            linux: "" }
  
  # Media
  spotify:     { macos: "Spotify",          linux: "spotify" }
  raindrop:    { macos: "Raindrop.io",      linux: "raindrop" }
  
  # Office
  word:        { macos: "Microsoft Word",       linux: "libreoffice-writer" }
  excel:       { macos: "Microsoft Excel",      linux: "libreoffice-calc" }
  powerpoint:  { macos: "Microsoft PowerPoint", linux: "libreoffice-impress" }
  
  # Communication
  slack:       { macos: "Slack",            linux: "slack" }
  discord:     { macos: "Discord",          linux: "discord" }
  mail:        { macos: "Mail",             linux: "thunderbird" }
  telegram:    { macos: "Telegram",         linux: "telegram" }
  whatsapp:    { macos: "WhatsApp",         linux: "" }
  
  # AI
  claude:      { macos: "Claude",           linux: "" }
  perplexity:  { macos: "Perplexity",       linux: "" }

# ==============================================================================
# Workspaces
# ==============================================================================
# Defines what apps belong on which workspace
workspaces:
  1:  { name: "browser",   apps: [safari, brave] }
  2:  { name: "notes",     apps: [obsidian] }
  3:  { name: "code",      apps: [wezterm, code, xcode] }
  4:  { name: "catch-all", apps: [] }
  5:  { name: "documents", apps: [preview, pdfexpert] }
  6:  { name: "raindrop",  apps: [raindrop] }
  7:  { name: "media",     apps: [spotify] }
  8:  { name: "office",    apps: [word, excel, powerpoint] }
  9:  { name: "comms",     apps: [slack, discord, mail, telegram, whatsapp] }
  10: { name: "ai",        apps: [claude, perplexity] }

# ==============================================================================
# Scratchpads
# ==============================================================================
# Dropdown/toggle windows that appear on demand (Cmd+` style)
# Key bindings use PRIMARY modifier by default
scratchpads:
  terminal:
    app: wezterm
    key: "grave"           # backtick key (`)
    size: { width: 80, height: 40 }  # percentage of screen
    position: "top"        # top, bottom, center
    
  notes:
    app: obsidian
    key: "n"
    size: { width: 60, height: 70 }
    position: "center"
    modifier: "cmd + alt"  # override default modifier
    
  # spotify:
  #   app: spotify
  #   key: "m"
  #   size: { width: 50, height: 60 }
  #   position: "center"

# ==============================================================================
# Window Rules
# ==============================================================================
# Fine-grained control over window behavior
window_rules:
  # System apps that should always float
  - match: { app: "System Settings" }
    float: true
    center: true
    
  - match: { app: "Calculator" }
    float: true
    size: { width: 300, height: 400 }
    sticky: true           # follows across workspaces
    
  - match: { app: "Finder" }
    float: true
    size: { width: 900, height: 600 }
    center: true
    
  - match: { app: "App Store" }
    float: true
    
  - match: { app: "Karabiner-Elements" }
    float: true
    
  - match: { app: "Karabiner-EventViewer" }
    float: true

  # Video calls - always visible
  - match: { app: "zoom.us" }
    float: true
    sticky: true
    opacity: 1.0
    
  - match: { app: "FaceTime" }
    float: true
    sticky: true

  # Picture-in-picture style
  - match: { title: "Picture in Picture" }
    float: true
    sticky: true
    topmost: true
    size: { width: 400, height: 225 }
    position: { x: "right", y: "bottom" }

  # Development tools
  - match: { app: "Code", title: "Settings" }
    float: true
    center: true

  # Dialogs and popups (by title pattern)
  - match: { title: "Preferences" }
    float: true
    center: true
    
  - match: { title: "Settings" }
    float: true
    center: true

# ==============================================================================
# Monitors
# ==============================================================================
# Multi-monitor workspace assignment
# Use 'uke-detect monitors' to see available displays
monitors:
  enabled: true
  
  # Assignment strategy: "static" or "dynamic"
  # static: workspaces stay on assigned monitor
  # dynamic: workspaces follow focus
  strategy: "static"
  
  displays:
    # Built-in display (laptop screen)
    - name: "Built-in Retina Display"
      index: 1                    # yabai display index
      workspaces: [1, 2, 3, 4, 5]
      
    # External monitor
    - name: "External"
      index: 2
      workspaces: [6, 7, 8, 9, 10]
      
  # Fallback: if monitor not connected, where do its workspaces go?
  fallback_display: 1

# ==============================================================================
# Sessions
# ==============================================================================
# Saved window layouts that can be restored
sessions:
  # Session storage location
  storage: "~/.local/state/uke/sessions"
  
  # Auto-save current session periodically
  autosave:
    enabled: false
    interval: 300          # seconds
    name: "autosave"
    
  # Predefined session templates (optional)
  templates:
    deep-work:
      description: "Focused coding with no distractions"
      workspaces: [2, 3]   # Only these workspaces are restored
      apps:
        - { app: wezterm, workspace: 3, layout: "main" }
        - { app: code, workspace: 3, layout: "secondary" }
        - { app: obsidian, workspace: 2 }
        
    research:
      description: "Research and note-taking"
      workspaces: [1, 2, 5, 10]
      apps:
        - { app: brave, workspace: 1 }
        - { app: obsidian, workspace: 2 }
        - { app: preview, workspace: 5 }
        - { app: claude, workspace: 10 }

# ==============================================================================
# Bunches
# ==============================================================================
# Environment presets (Cmd+Ctrl+1-5 on macOS, Alt+Ctrl+1-5 on Linux)
bunches:
  study:
    focus: 2
    apps: [obsidian, brave, wezterm, preview]
    
  guitar:
    focus: 7
    apps: [spotify, brave]
    
  coding:
    focus: 3
    apps: [wezterm, code, brave]
    
  email:
    focus: 9
    apps: [mail, slack, brave]
    
  reading:
    focus: 5
    apps: [preview, obsidian]

# ==============================================================================
# Window Manager Settings
# ==============================================================================
window_manager:
  macos:
    layout: bsp
    padding: 4
    gap: 4
    mouse_follows_focus: false
    focus_follows_mouse: false
    borders:
      enabled: true
      width: 3
      active_color: "0xff88c0d0"
      inactive_color: "0xff3b4252"
  linux:
    layout: dwindle
    gaps_in: 4
    gaps_out: 8
    border_size: 2
    active_border: "rgba(88c0d0ee)"
    inactive_border: "rgba(3b4252aa)"

# ==============================================================================
# Float Rules (Legacy - prefer window_rules above)
# ==============================================================================
# Apps that should always float (not be tiled)
float_rules:
  - "System Settings"
  - "System Preferences"
  - "Calculator"
  - "Finder"
  - "App Store"
  - "Karabiner-Elements"
  - "Karabiner-EventViewer"



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/LICENSE.md
################################################################################

MIT License

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/init.lua
################################################################################

--[[

=====================================================================
==================== READ THIS BEFORE CONTINUING ====================
=====================================================================
========                                    .-----.          ========
========         .----------------------.   | === |          ========
========         |.-""""""""""""""""""-.|   |-----|          ========
========         ||                    ||   | === |          ========
========         ||   KICKSTART.NVIM   ||   |-----|          ========
========         ||                    ||   | === |          ========
========         ||                    ||   |-----|          ========
========         ||:Tutor              ||   |:::::|          ========
========         |'-..................-'|   |____o|          ========
========         `"")----------------(""`   ___________      ========
========        /::::::::::|  |::::::::::\  \ no mouse \     ========
========       /:::========|  |==hjkl==:::\  \ required \    ========
========      '""""""""""""'  '""""""""""""'  '""""""""""'   ========
========                                                     ========
=====================================================================
=====================================================================

What is Kickstart?

  Kickstart.nvim is *not* a distribution.

  Kickstart.nvim is a starting point for your own configuration.
    The goal is that you can read every line of code, top-to-bottom, understand
    what your configuration is doing, and modify it to suit your needs.

    Once you've done that, you can start exploring, configuring and tinkering to
    make Neovim your own! That might mean leaving Kickstart just the way it is for a while
    or immediately breaking it into modular pieces. It's up to you!

    If you don't know anything about Lua, I recommend taking some time to read through
    a guide. One possible example which will only take 10-15 minutes:
      - https://learnxinyminutes.com/docs/lua/

    After understanding a bit more about Lua, you can use `:help lua-guide` as a
    reference for how Neovim integrates Lua.
    - :help lua-guide
    - (or HTML version): https://neovim.io/doc/user/lua-guide.html

Kickstart Guide:

  TODO: The very first thing you should do is to run the command `:Tutor` in Neovim.

    If you don't know what this means, type the following:
      - <escape key>
      - :
      - Tutor
      - <enter key>

    (If you already know the Neovim basics, you can skip this step.)

  Once you've completed that, you can continue working through **AND READING** the rest
  of the kickstart init.lua.

  Next, run AND READ `:help`.
    This will open up a help window with some basic information
    about reading, navigating and searching the builtin help documentation.

    This should be the first place you go to look when you're stuck or confused
    with something. It's one of my favorite Neovim features.

    MOST IMPORTANTLY, we provide a keymap "<space>sh" to [s]earch the [h]elp documentation,
    which is very useful when you're not exactly sure of what you're looking for.

  I have left several `:help X` comments throughout the init.lua
    These are hints about where to find more information about the relevant settings,
    plugins or Neovim features used in Kickstart.

   NOTE: Look for lines like this

    Throughout the file. These are for you, the reader, to help you understand what is happening.
    Feel free to delete them once you know what you're doing, but they should serve as a guide
    for when you are first encountering a few different constructs in your Neovim config.

If you experience any errors while trying to install kickstart, run `:checkhealth` for more info.

I hope you enjoy your Neovim journey,
- TJ

P.S. You can delete this when you're done too. It's your config now! :)
--]]

-- Set <space> as the leader key
-- See `:help mapleader`
--  NOTE: Must happen before plugins are loaded (otherwise wrong leader will be used)
vim.g.mapleader = ' '
vim.g.maplocalleader = ' '

-- Set to true if you have a Nerd Font installed and selected in the terminal
vim.g.have_nerd_font = false

-- [[ Setting options ]]
-- See `:help vim.o`
-- NOTE: You can change these options as you wish!
--  For more options, you can see `:help option-list`

-- Make line numbers default
vim.o.number = true
-- You can also add relative line numbers, to help with jumping.
--  Experiment for yourself to see if you like it!
-- vim.o.relativenumber = true

-- Enable mouse mode, can be useful for resizing splits for example!
vim.o.mouse = 'a'

-- Don't show the mode, since it's already in the status line
vim.o.showmode = false

-- Sync clipboard between OS and Neovim.
--  Schedule the setting after `UiEnter` because it can increase startup-time.
--  Remove this option if you want your OS clipboard to remain independent.
--  See `:help 'clipboard'`
vim.schedule(function()
  vim.o.clipboard = 'unnamedplus'
end)

-- Enable break indent
vim.o.breakindent = true

-- Save undo history
vim.o.undofile = true

-- Case-insensitive searching UNLESS \C or one or more capital letters in the search term
vim.o.ignorecase = true
vim.o.smartcase = true

-- Keep signcolumn on by default
vim.o.signcolumn = 'yes'

-- Decrease update time
vim.o.updatetime = 250

-- Decrease mapped sequence wait time
vim.o.timeoutlen = 300

-- Configure how new splits should be opened
vim.o.splitright = true
vim.o.splitbelow = true

-- Sets how neovim will display certain whitespace characters in the editor.
--  See `:help 'list'`
--  and `:help 'listchars'`
--
--  Notice listchars is set using `vim.opt` instead of `vim.o`.
--  It is very similar to `vim.o` but offers an interface for conveniently interacting with tables.
--   See `:help lua-options`
--   and `:help lua-options-guide`
vim.o.list = true
vim.opt.listchars = { tab = '¬ª ', trail = '¬∑', nbsp = '‚ê£' }

-- Preview substitutions live, as you type!
vim.o.inccommand = 'split'

-- Show which line your cursor is on
vim.o.cursorline = true

-- Minimal number of screen lines to keep above and below the cursor.
vim.o.scrolloff = 10

-- if performing an operation that would fail due to unsaved changes in the buffer (like `:q`),
-- instead raise a dialog asking if you wish to save the current file(s)
-- See `:help 'confirm'`
vim.o.confirm = true

-- [[ Basic Keymaps ]]
--  See `:help vim.keymap.set()`

-- Clear highlights on search when pressing <Esc> in normal mode
--  See `:help hlsearch`
vim.keymap.set('n', '<Esc>', '<cmd>nohlsearch<CR>')

-- Diagnostic keymaps
vim.keymap.set('n', '<leader>q', vim.diagnostic.setloclist, { desc = 'Open diagnostic [Q]uickfix list' })

-- Exit terminal mode in the builtin terminal with a shortcut that is a bit easier
-- for people to discover. Otherwise, you normally need to press <C-\><C-n>, which
-- is not what someone will guess without a bit more experience.
--
-- NOTE: This won't work in all terminal emulators/tmux/etc. Try your own mapping
-- or just use <C-\><C-n> to exit terminal mode
vim.keymap.set('t', '<Esc><Esc>', '<C-\\><C-n>', { desc = 'Exit terminal mode' })

-- TIP: Disable arrow keys in normal mode
-- vim.keymap.set('n', '<left>', '<cmd>echo "Use h to move!!"<CR>')
-- vim.keymap.set('n', '<right>', '<cmd>echo "Use l to move!!"<CR>')
-- vim.keymap.set('n', '<up>', '<cmd>echo "Use k to move!!"<CR>')
-- vim.keymap.set('n', '<down>', '<cmd>echo "Use j to move!!"<CR>')

-- Keybinds to make split navigation easier.
--  Use CTRL+<hjkl> to switch between windows
--
--  See `:help wincmd` for a list of all window commands
vim.keymap.set('n', '<C-h>', '<C-w><C-h>', { desc = 'Move focus to the left window' })
vim.keymap.set('n', '<C-l>', '<C-w><C-l>', { desc = 'Move focus to the right window' })
vim.keymap.set('n', '<C-j>', '<C-w><C-j>', { desc = 'Move focus to the lower window' })
vim.keymap.set('n', '<C-k>', '<C-w><C-k>', { desc = 'Move focus to the upper window' })

-- NOTE: Some terminals have colliding keymaps or are not able to send distinct keycodes
-- vim.keymap.set("n", "<C-S-h>", "<C-w>H", { desc = "Move window to the left" })
-- vim.keymap.set("n", "<C-S-l>", "<C-w>L", { desc = "Move window to the right" })
-- vim.keymap.set("n", "<C-S-j>", "<C-w>J", { desc = "Move window to the lower" })
-- vim.keymap.set("n", "<C-S-k>", "<C-w>K", { desc = "Move window to the upper" })

-- [[ Basic Autocommands ]]
--  See `:help lua-guide-autocommands`

-- Highlight when yanking (copying) text
--  Try it with `yap` in normal mode
--  See `:help vim.hl.on_yank()`
vim.api.nvim_create_autocmd('TextYankPost', {
  desc = 'Highlight when yanking (copying) text',
  group = vim.api.nvim_create_augroup('kickstart-highlight-yank', { clear = true }),
  callback = function()
    vim.hl.on_yank()
  end,
})

-- [[ Install `lazy.nvim` plugin manager ]]
--    See `:help lazy.nvim.txt` or https://github.com/folke/lazy.nvim for more info
local lazypath = vim.fn.stdpath 'data' .. '/lazy/lazy.nvim'
if not (vim.uv or vim.loop).fs_stat(lazypath) then
  local lazyrepo = 'https://github.com/folke/lazy.nvim.git'
  local out = vim.fn.system { 'git', 'clone', '--filter=blob:none', '--branch=stable', lazyrepo, lazypath }
  if vim.v.shell_error ~= 0 then
    error('Error cloning lazy.nvim:\n' .. out)
  end
end

---@type vim.Option
local rtp = vim.opt.rtp
rtp:prepend(lazypath)

-- [[ Configure and install plugins ]]
--
--  To check the current status of your plugins, run
--    :Lazy
--
--  You can press `?` in this menu for help. Use `:q` to close the window
--
--  To update plugins you can run
--    :Lazy update
--
-- NOTE: Here is where you install your plugins.
require('lazy').setup({
  -- NOTE: Plugins can be added with a link (or for a github repo: 'owner/repo' link).
  'NMAC427/guess-indent.nvim', -- Detect tabstop and shiftwidth automatically

  -- NOTE: Plugins can also be added by using a table,
  -- with the first argument being the link and the following
  -- keys can be used to configure plugin behavior/loading/etc.
  --
  -- Use `opts = {}` to automatically pass options to a plugin's `setup()` function, forcing the plugin to be loaded.
  --

  -- Alternatively, use `config = function() ... end` for full control over the configuration.
  -- If you prefer to call `setup` explicitly, use:
  --    {
  --        'lewis6991/gitsigns.nvim',
  --        config = function()
  --            require('gitsigns').setup({
  --                -- Your gitsigns configuration here
  --            })
  --        end,
  --    }
  --
  -- Here is a more advanced example where we pass configuration
  -- options to `gitsigns.nvim`.
  --
  -- See `:help gitsigns` to understand what the configuration keys do
  { -- Adds git related signs to the gutter, as well as utilities for managing changes
    'lewis6991/gitsigns.nvim',
    opts = {
      signs = {
        add = { text = '+' },
        change = { text = '~' },
        delete = { text = '_' },
        topdelete = { text = '‚Äæ' },
        changedelete = { text = '~' },
      },
    },
  },

  -- NOTE: Plugins can also be configured to run Lua code when they are loaded.
  --
  -- This is often very useful to both group configuration, as well as handle
  -- lazy loading plugins that don't need to be loaded immediately at startup.
  --
  -- For example, in the following configuration, we use:
  --  event = 'VimEnter'
  --
  -- which loads which-key before all the UI elements are loaded. Events can be
  -- normal autocommands events (`:help autocmd-events`).
  --
  -- Then, because we use the `opts` key (recommended), the configuration runs
  -- after the plugin has been loaded as `require(MODULE).setup(opts)`.

  { -- Useful plugin to show you pending keybinds.
    'folke/which-key.nvim',
    event = 'VimEnter', -- Sets the loading event to 'VimEnter'
    opts = {
      -- delay between pressing a key and opening which-key (milliseconds)
      -- this setting is independent of vim.o.timeoutlen
      delay = 0,
      icons = {
        -- set icon mappings to true if you have a Nerd Font
        mappings = vim.g.have_nerd_font,
        -- If you are using a Nerd Font: set icons.keys to an empty table which will use the
        -- default which-key.nvim defined Nerd Font icons, otherwise define a string table
        keys = vim.g.have_nerd_font and {} or {
          Up = '<Up> ',
          Down = '<Down> ',
          Left = '<Left> ',
          Right = '<Right> ',
          C = '<C-‚Ä¶> ',
          M = '<M-‚Ä¶> ',
          D = '<D-‚Ä¶> ',
          S = '<S-‚Ä¶> ',
          CR = '<CR> ',
          Esc = '<Esc> ',
          ScrollWheelDown = '<ScrollWheelDown> ',
          ScrollWheelUp = '<ScrollWheelUp> ',
          NL = '<NL> ',
          BS = '<BS> ',
          Space = '<Space> ',
          Tab = '<Tab> ',
          F1 = '<F1>',
          F2 = '<F2>',
          F3 = '<F3>',
          F4 = '<F4>',
          F5 = '<F5>',
          F6 = '<F6>',
          F7 = '<F7>',
          F8 = '<F8>',
          F9 = '<F9>',
          F10 = '<F10>',
          F11 = '<F11>',
          F12 = '<F12>',
        },
      },

      -- Document existing key chains
      spec = {
        { '<leader>s', group = '[S]earch' },
        { '<leader>t', group = '[T]oggle' },
        { '<leader>h', group = 'Git [H]unk', mode = { 'n', 'v' } },
      },
    },
  },

  -- NOTE: Plugins can specify dependencies.
  --
  -- The dependencies are proper plugin specifications as well - anything
  -- you do for a plugin at the top level, you can do for a dependency.
  --
  -- Use the `dependencies` key to specify the dependencies of a particular plugin

  { -- Fuzzy Finder (files, lsp, etc)
    'nvim-telescope/telescope.nvim',
    event = 'VimEnter',
    dependencies = {
      'nvim-lua/plenary.nvim',
      { -- If encountering errors, see telescope-fzf-native README for installation instructions
        'nvim-telescope/telescope-fzf-native.nvim',

        -- `build` is used to run some command when the plugin is installed/updated.
        -- This is only run then, not every time Neovim starts up.
        build = 'make',

        -- `cond` is a condition used to determine whether this plugin should be
        -- installed and loaded.
        cond = function()
          return vim.fn.executable 'make' == 1
        end,
      },
      { 'nvim-telescope/telescope-ui-select.nvim' },

      -- Useful for getting pretty icons, but requires a Nerd Font.
      { 'nvim-tree/nvim-web-devicons', enabled = vim.g.have_nerd_font },
    },
    config = function()
      -- Telescope is a fuzzy finder that comes with a lot of different things that
      -- it can fuzzy find! It's more than just a "file finder", it can search
      -- many different aspects of Neovim, your workspace, LSP, and more!
      --
      -- The easiest way to use Telescope, is to start by doing something like:
      --  :Telescope help_tags
      --
      -- After running this command, a window will open up and you're able to
      -- type in the prompt window. You'll see a list of `help_tags` options and
      -- a corresponding preview of the help.
      --
      -- Two important keymaps to use while in Telescope are:
      --  - Insert mode: <c-/>
      --  - Normal mode: ?
      --
      -- This opens a window that shows you all of the keymaps for the current
      -- Telescope picker. This is really useful to discover what Telescope can
      -- do as well as how to actually do it!

      -- [[ Configure Telescope ]]
      -- See `:help telescope` and `:help telescope.setup()`
      require('telescope').setup {
        -- You can put your default mappings / updates / etc. in here
        --  All the info you're looking for is in `:help telescope.setup()`
        --
        -- defaults = {
        --   mappings = {
        --     i = { ['<c-enter>'] = 'to_fuzzy_refine' },
        --   },
        -- },
        -- pickers = {}
        extensions = {
          ['ui-select'] = {
            require('telescope.themes').get_dropdown(),
          },
        },
      }

      -- Enable Telescope extensions if they are installed
      pcall(require('telescope').load_extension, 'fzf')
      pcall(require('telescope').load_extension, 'ui-select')

      -- See `:help telescope.builtin`
      local builtin = require 'telescope.builtin'
      vim.keymap.set('n', '<leader>sh', builtin.help_tags, { desc = '[S]earch [H]elp' })
      vim.keymap.set('n', '<leader>sk', builtin.keymaps, { desc = '[S]earch [K]eymaps' })
      vim.keymap.set('n', '<leader>sf', builtin.find_files, { desc = '[S]earch [F]iles' })
      vim.keymap.set('n', '<leader>ss', builtin.builtin, { desc = '[S]earch [S]elect Telescope' })
      vim.keymap.set('n', '<leader>sw', builtin.grep_string, { desc = '[S]earch current [W]ord' })
      vim.keymap.set('n', '<leader>sg', builtin.live_grep, { desc = '[S]earch by [G]rep' })
      vim.keymap.set('n', '<leader>sd', builtin.diagnostics, { desc = '[S]earch [D]iagnostics' })
      vim.keymap.set('n', '<leader>sr', builtin.resume, { desc = '[S]earch [R]esume' })
      vim.keymap.set('n', '<leader>s.', builtin.oldfiles, { desc = '[S]earch Recent Files ("." for repeat)' })
      vim.keymap.set('n', '<leader><leader>', builtin.buffers, { desc = '[ ] Find existing buffers' })

      -- Slightly advanced example of overriding default behavior and theme
      vim.keymap.set('n', '<leader>/', function()
        -- You can pass additional configuration to Telescope to change the theme, layout, etc.
        builtin.current_buffer_fuzzy_find(require('telescope.themes').get_dropdown {
          winblend = 10,
          previewer = false,
        })
      end, { desc = '[/] Fuzzily search in current buffer' })

      -- It's also possible to pass additional configuration options.
      --  See `:help telescope.builtin.live_grep()` for information about particular keys
      vim.keymap.set('n', '<leader>s/', function()
        builtin.live_grep {
          grep_open_files = true,
          prompt_title = 'Live Grep in Open Files',
        }
      end, { desc = '[S]earch [/] in Open Files' })

      -- Shortcut for searching your Neovim configuration files
      vim.keymap.set('n', '<leader>sn', function()
        builtin.find_files { cwd = vim.fn.stdpath 'config' }
      end, { desc = '[S]earch [N]eovim files' })
    end,
  },

  -- LSP Plugins
  {
    -- `lazydev` configures Lua LSP for your Neovim config, runtime and plugins
    -- used for completion, annotations and signatures of Neovim apis
    'folke/lazydev.nvim',
    ft = 'lua',
    opts = {
      library = {
        -- Load luvit types when the `vim.uv` word is found
        { path = '${3rd}/luv/library', words = { 'vim%.uv' } },
      },
    },
  },
  {
    -- Main LSP Configuration
    'neovim/nvim-lspconfig',
    dependencies = {
      -- Automatically install LSPs and related tools to stdpath for Neovim
      -- Mason must be loaded before its dependents so we need to set it up here.
      -- NOTE: `opts = {}` is the same as calling `require('mason').setup({})`
      { 'mason-org/mason.nvim', opts = {} },
      'mason-org/mason-lspconfig.nvim',
      'WhoIsSethDaniel/mason-tool-installer.nvim',

      -- Useful status updates for LSP.
      { 'j-hui/fidget.nvim', opts = {} },

      -- Allows extra capabilities provided by blink.cmp
      'saghen/blink.cmp',
    },
    config = function()
      -- Brief aside: **What is LSP?**
      --
      -- LSP is an initialism you've probably heard, but might not understand what it is.
      --
      -- LSP stands for Language Server Protocol. It's a protocol that helps editors
      -- and language tooling communicate in a standardized fashion.
      --
      -- In general, you have a "server" which is some tool built to understand a particular
      -- language (such as `gopls`, `lua_ls`, `rust_analyzer`, etc.). These Language Servers
      -- (sometimes called LSP servers, but that's kind of like ATM Machine) are standalone
      -- processes that communicate with some "client" - in this case, Neovim!
      --
      -- LSP provides Neovim with features like:
      --  - Go to definition
      --  - Find references
      --  - Autocompletion
      --  - Symbol Search
      --  - and more!
      --
      -- Thus, Language Servers are external tools that must be installed separately from
      -- Neovim. This is where `mason` and related plugins come into play.
      --
      -- If you're wondering about lsp vs treesitter, you can check out the wonderfully
      -- and elegantly composed help section, `:help lsp-vs-treesitter`

      --  This function gets run when an LSP attaches to a particular buffer.
      --    That is to say, every time a new file is opened that is associated with
      --    an lsp (for example, opening `main.rs` is associated with `rust_analyzer`) this
      --    function will be executed to configure the current buffer
      vim.api.nvim_create_autocmd('LspAttach', {
        group = vim.api.nvim_create_augroup('kickstart-lsp-attach', { clear = true }),
        callback = function(event)
          -- NOTE: Remember that Lua is a real programming language, and as such it is possible
          -- to define small helper and utility functions so you don't have to repeat yourself.
          --
          -- In this case, we create a function that lets us more easily define mappings specific
          -- for LSP related items. It sets the mode, buffer and description for us each time.
          local map = function(keys, func, desc, mode)
            mode = mode or 'n'
            vim.keymap.set(mode, keys, func, { buffer = event.buf, desc = 'LSP: ' .. desc })
          end

          -- Rename the variable under your cursor.
          --  Most Language Servers support renaming across files, etc.
          map('grn', vim.lsp.buf.rename, '[R]e[n]ame')

          -- Execute a code action, usually your cursor needs to be on top of an error
          -- or a suggestion from your LSP for this to activate.
          map('gra', vim.lsp.buf.code_action, '[G]oto Code [A]ction', { 'n', 'x' })

          -- Find references for the word under your cursor.
          map('grr', require('telescope.builtin').lsp_references, '[G]oto [R]eferences')

          -- Jump to the implementation of the word under your cursor.
          --  Useful when your language has ways of declaring types without an actual implementation.
          map('gri', require('telescope.builtin').lsp_implementations, '[G]oto [I]mplementation')

          -- Jump to the definition of the word under your cursor.
          --  This is where a variable was first declared, or where a function is defined, etc.
          --  To jump back, press <C-t>.
          map('grd', require('telescope.builtin').lsp_definitions, '[G]oto [D]efinition')

          -- WARN: This is not Goto Definition, this is Goto Declaration.
          --  For example, in C this would take you to the header.
          map('grD', vim.lsp.buf.declaration, '[G]oto [D]eclaration')

          -- Fuzzy find all the symbols in your current document.
          --  Symbols are things like variables, functions, types, etc.
          map('gO', require('telescope.builtin').lsp_document_symbols, 'Open Document Symbols')

          -- Fuzzy find all the symbols in your current workspace.
          --  Similar to document symbols, except searches over your entire project.
          map('gW', require('telescope.builtin').lsp_dynamic_workspace_symbols, 'Open Workspace Symbols')

          -- Jump to the type of the word under your cursor.
          --  Useful when you're not sure what type a variable is and you want to see
          --  the definition of its *type*, not where it was *defined*.
          map('grt', require('telescope.builtin').lsp_type_definitions, '[G]oto [T]ype Definition')

          -- This function resolves a difference between neovim nightly (version 0.11) and stable (version 0.10)
          ---@param client vim.lsp.Client
          ---@param method vim.lsp.protocol.Method
          ---@param bufnr? integer some lsp support methods only in specific files
          ---@return boolean
          local function client_supports_method(client, method, bufnr)
            if vim.fn.has 'nvim-0.11' == 1 then
              return client:supports_method(method, bufnr)
            else
              return client.supports_method(method, { bufnr = bufnr })
            end
          end

          -- The following two autocommands are used to highlight references of the
          -- word under your cursor when your cursor rests there for a little while.
          --    See `:help CursorHold` for information about when this is executed
          --
          -- When you move your cursor, the highlights will be cleared (the second autocommand).
          local client = vim.lsp.get_client_by_id(event.data.client_id)
          if client and client_supports_method(client, vim.lsp.protocol.Methods.textDocument_documentHighlight, event.buf) then
            local highlight_augroup = vim.api.nvim_create_augroup('kickstart-lsp-highlight', { clear = false })
            vim.api.nvim_create_autocmd({ 'CursorHold', 'CursorHoldI' }, {
              buffer = event.buf,
              group = highlight_augroup,
              callback = vim.lsp.buf.document_highlight,
            })

            vim.api.nvim_create_autocmd({ 'CursorMoved', 'CursorMovedI' }, {
              buffer = event.buf,
              group = highlight_augroup,
              callback = vim.lsp.buf.clear_references,
            })

            vim.api.nvim_create_autocmd('LspDetach', {
              group = vim.api.nvim_create_augroup('kickstart-lsp-detach', { clear = true }),
              callback = function(event2)
                vim.lsp.buf.clear_references()
                vim.api.nvim_clear_autocmds { group = 'kickstart-lsp-highlight', buffer = event2.buf }
              end,
            })
          end

          -- The following code creates a keymap to toggle inlay hints in your
          -- code, if the language server you are using supports them
          --
          -- This may be unwanted, since they displace some of your code
          if client and client_supports_method(client, vim.lsp.protocol.Methods.textDocument_inlayHint, event.buf) then
            map('<leader>th', function()
              vim.lsp.inlay_hint.enable(not vim.lsp.inlay_hint.is_enabled { bufnr = event.buf })
            end, '[T]oggle Inlay [H]ints')
          end
        end,
      })

      -- Diagnostic Config
      -- See :help vim.diagnostic.Opts
      vim.diagnostic.config {
        severity_sort = true,
        float = { border = 'rounded', source = 'if_many' },
        underline = { severity = vim.diagnostic.severity.ERROR },
        signs = vim.g.have_nerd_font and {
          text = {
            [vim.diagnostic.severity.ERROR] = 'Û∞Öö ',
            [vim.diagnostic.severity.WARN] = 'Û∞Ä™ ',
            [vim.diagnostic.severity.INFO] = 'Û∞ãΩ ',
            [vim.diagnostic.severity.HINT] = 'Û∞å∂ ',
          },
        } or {},
        virtual_text = {
          source = 'if_many',
          spacing = 2,
          format = function(diagnostic)
            local diagnostic_message = {
              [vim.diagnostic.severity.ERROR] = diagnostic.message,
              [vim.diagnostic.severity.WARN] = diagnostic.message,
              [vim.diagnostic.severity.INFO] = diagnostic.message,
              [vim.diagnostic.severity.HINT] = diagnostic.message,
            }
            return diagnostic_message[diagnostic.severity]
          end,
        },
      }

      -- LSP servers and clients are able to communicate to each other what features they support.
      --  By default, Neovim doesn't support everything that is in the LSP specification.
      --  When you add blink.cmp, luasnip, etc. Neovim now has *more* capabilities.
      --  So, we create new capabilities with blink.cmp, and then broadcast that to the servers.
      local capabilities = require('blink.cmp').get_lsp_capabilities()

      -- Enable the following language servers
      --  Feel free to add/remove any LSPs that you want here. They will automatically be installed.
      --
      --  Add any additional override configuration in the following tables. Available keys are:
      --  - cmd (table): Override the default command used to start the server
      --  - filetypes (table): Override the default list of associated filetypes for the server
      --  - capabilities (table): Override fields in capabilities. Can be used to disable certain LSP features.
      --  - settings (table): Override the default settings passed when initializing the server.
      --        For example, to see the options for `lua_ls`, you could go to: https://luals.github.io/wiki/settings/
      local servers = {
        -- clangd = {},
        -- gopls = {},
        -- pyright = {},
        -- rust_analyzer = {},
        -- ... etc. See `:help lspconfig-all` for a list of all the pre-configured LSPs
        --
        -- Some languages (like typescript) have entire language plugins that can be useful:
        --    https://github.com/pmizio/typescript-tools.nvim
        --
        -- But for many setups, the LSP (`ts_ls`) will work just fine
        -- ts_ls = {},
        --

        lua_ls = {
          -- cmd = { ... },
          -- filetypes = { ... },
          -- capabilities = {},
          settings = {
            Lua = {
              completion = {
                callSnippet = 'Replace',
              },
              -- You can toggle below to ignore Lua_LS's noisy `missing-fields` warnings
              -- diagnostics = { disable = { 'missing-fields' } },
            },
          },
        },
      }

      -- Ensure the servers and tools above are installed
      --
      -- To check the current status of installed tools and/or manually install
      -- other tools, you can run
      --    :Mason
      --
      -- You can press `g?` for help in this menu.
      --
      -- `mason` had to be setup earlier: to configure its options see the
      -- `dependencies` table for `nvim-lspconfig` above.
      --
      -- You can add other tools here that you want Mason to install
      -- for you, so that they are available from within Neovim.
      local ensure_installed = vim.tbl_keys(servers or {})
      vim.list_extend(ensure_installed, {
        'stylua', -- Used to format Lua code
      })
      require('mason-tool-installer').setup { ensure_installed = ensure_installed }

      require('mason-lspconfig').setup {
        ensure_installed = {}, -- explicitly set to an empty table (Kickstart populates installs via mason-tool-installer)
        automatic_installation = false,
        handlers = {
          function(server_name)
            local server = servers[server_name] or {}
            -- This handles overriding only values explicitly passed
            -- by the server configuration above. Useful when disabling
            -- certain features of an LSP (for example, turning off formatting for ts_ls)
            server.capabilities = vim.tbl_deep_extend('force', {}, capabilities, server.capabilities or {})
            require('lspconfig')[server_name].setup(server)
          end,
        },
      }
    end,
  },

  { -- Autoformat
    'stevearc/conform.nvim',
    event = { 'BufWritePre' },
    cmd = { 'ConformInfo' },
    keys = {
      {
        '<leader>f',
        function()
          require('conform').format { async = true, lsp_format = 'fallback' }
        end,
        mode = '',
        desc = '[F]ormat buffer',
      },
    },
    opts = {
      notify_on_error = false,
      format_on_save = function(bufnr)
        -- Disable "format_on_save lsp_fallback" for languages that don't
        -- have a well standardized coding style. You can add additional
        -- languages here or re-enable it for the disabled ones.
        local disable_filetypes = { c = true, cpp = true }
        if disable_filetypes[vim.bo[bufnr].filetype] then
          return nil
        else
          return {
            timeout_ms = 500,
            lsp_format = 'fallback',
          }
        end
      end,
      formatters_by_ft = {
        lua = { 'stylua' },
        -- Conform can also run multiple formatters sequentially
        -- python = { "isort", "black" },
        --
        -- You can use 'stop_after_first' to run the first available formatter from the list
        -- javascript = { "prettierd", "prettier", stop_after_first = true },
      },
    },
  },

  { -- Autocompletion
    'saghen/blink.cmp',
    event = 'VimEnter',
    version = '1.*',
    dependencies = {
      -- Snippet Engine
      {
        'L3MON4D3/LuaSnip',
        version = '2.*',
        build = (function()
          -- Build Step is needed for regex support in snippets.
          -- This step is not supported in many windows environments.
          -- Remove the below condition to re-enable on windows.
          if vim.fn.has 'win32' == 1 or vim.fn.executable 'make' == 0 then
            return
          end
          return 'make install_jsregexp'
        end)(),
        dependencies = {
          -- `friendly-snippets` contains a variety of premade snippets.
          --    See the README about individual language/framework/plugin snippets:
          --    https://github.com/rafamadriz/friendly-snippets
          -- {
          --   'rafamadriz/friendly-snippets',
          --   config = function()
          --     require('luasnip.loaders.from_vscode').lazy_load()
          --   end,
          -- },
        },
        opts = {},
      },
      'folke/lazydev.nvim',
    },
    --- @module 'blink.cmp'
    --- @type blink.cmp.Config
    opts = {
      keymap = {
        -- 'default' (recommended) for mappings similar to built-in completions
        --   <c-y> to accept ([y]es) the completion.
        --    This will auto-import if your LSP supports it.
        --    This will expand snippets if the LSP sent a snippet.
        -- 'super-tab' for tab to accept
        -- 'enter' for enter to accept
        -- 'none' for no mappings
        --
        -- For an understanding of why the 'default' preset is recommended,
        -- you will need to read `:help ins-completion`
        --
        -- No, but seriously. Please read `:help ins-completion`, it is really good!
        --
        -- All presets have the following mappings:
        -- <tab>/<s-tab>: move to right/left of your snippet expansion
        -- <c-space>: Open menu or open docs if already open
        -- <c-n>/<c-p> or <up>/<down>: Select next/previous item
        -- <c-e>: Hide menu
        -- <c-k>: Toggle signature help
        --
        -- See :h blink-cmp-config-keymap for defining your own keymap
        preset = 'default',

        -- For more advanced Luasnip keymaps (e.g. selecting choice nodes, expansion) see:
        --    https://github.com/L3MON4D3/LuaSnip?tab=readme-ov-file#keymaps
      },

      appearance = {
        -- 'mono' (default) for 'Nerd Font Mono' or 'normal' for 'Nerd Font'
        -- Adjusts spacing to ensure icons are aligned
        nerd_font_variant = 'mono',
      },

      completion = {
        -- By default, you may press `<c-space>` to show the documentation.
        -- Optionally, set `auto_show = true` to show the documentation after a delay.
        documentation = { auto_show = false, auto_show_delay_ms = 500 },
      },

      sources = {
        default = { 'lsp', 'path', 'snippets', 'lazydev' },
        providers = {
          lazydev = { module = 'lazydev.integrations.blink', score_offset = 100 },
        },
      },

      snippets = { preset = 'luasnip' },

      -- Blink.cmp includes an optional, recommended rust fuzzy matcher,
      -- which automatically downloads a prebuilt binary when enabled.
      --
      -- By default, we use the Lua implementation instead, but you may enable
      -- the rust implementation via `'prefer_rust_with_warning'`
      --
      -- See :h blink-cmp-config-fuzzy for more information
      fuzzy = { implementation = 'lua' },

      -- Shows a signature help window while you type arguments for a function
      signature = { enabled = true },
    },
  },

  { -- You can easily change to a different colorscheme.
    -- Change the name of the colorscheme plugin below, and then
    -- change the command in the config to whatever the name of that colorscheme is.
    --
    -- If you want to see what colorschemes are already installed, you can use `:Telescope colorscheme`.
    'folke/tokyonight.nvim',
    priority = 1000, -- Make sure to load this before all the other start plugins.
    config = function()
      ---@diagnostic disable-next-line: missing-fields
      require('tokyonight').setup {
        styles = {
          comments = { italic = false }, -- Disable italics in comments
        },
      }

      -- Load the colorscheme here.
      -- Like many other themes, this one has different styles, and you could load
      -- any other, such as 'tokyonight-storm', 'tokyonight-moon', or 'tokyonight-day'.
      vim.cmd.colorscheme 'tokyonight-night'
    end,
  },

  -- Highlight todo, notes, etc in comments
  { 'folke/todo-comments.nvim', event = 'VimEnter', dependencies = { 'nvim-lua/plenary.nvim' }, opts = { signs = false } },

  { -- Collection of various small independent plugins/modules
    'echasnovski/mini.nvim',
    config = function()
      -- Better Around/Inside textobjects
      --
      -- Examples:
      --  - va)  - [V]isually select [A]round [)]paren
      --  - yinq - [Y]ank [I]nside [N]ext [Q]uote
      --  - ci'  - [C]hange [I]nside [']quote
      require('mini.ai').setup { n_lines = 500 }

      -- Add/delete/replace surroundings (brackets, quotes, etc.)
      --
      -- - saiw) - [S]urround [A]dd [I]nner [W]ord [)]Paren
      -- - sd'   - [S]urround [D]elete [']quotes
      -- - sr)'  - [S]urround [R]eplace [)] [']
      require('mini.surround').setup()

      -- Simple and easy statusline.
      --  You could remove this setup call if you don't like it,
      --  and try some other statusline plugin
      local statusline = require 'mini.statusline'
      -- set use_icons to true if you have a Nerd Font
      statusline.setup { use_icons = vim.g.have_nerd_font }

      -- You can configure sections in the statusline by overriding their
      -- default behavior. For example, here we set the section for
      -- cursor location to LINE:COLUMN
      ---@diagnostic disable-next-line: duplicate-set-field
      statusline.section_location = function()
        return '%2l:%-2v'
      end

      -- ... and there is more!
      --  Check out: https://github.com/echasnovski/mini.nvim
    end,
  },
  { -- Highlight, edit, and navigate code
    'nvim-treesitter/nvim-treesitter',
    build = ':TSUpdate',
    main = 'nvim-treesitter.configs', -- Sets main module to use for opts
    -- [[ Configure Treesitter ]] See `:help nvim-treesitter`
    opts = {
      ensure_installed = { 'bash', 'c', 'diff', 'html', 'lua', 'luadoc', 'markdown', 'markdown_inline', 'query', 'vim', 'vimdoc' },
      -- Autoinstall languages that are not installed
      auto_install = true,
      highlight = {
        enable = true,
        -- Some languages depend on vim's regex highlighting system (such as Ruby) for indent rules.
        --  If you are experiencing weird indenting issues, add the language to
        --  the list of additional_vim_regex_highlighting and disabled languages for indent.
        additional_vim_regex_highlighting = { 'ruby' },
      },
      indent = { enable = true, disable = { 'ruby' } },
    },
    -- There are additional nvim-treesitter modules that you can use to interact
    -- with nvim-treesitter. You should go explore a few and see what interests you:
    --
    --    - Incremental selection: Included, see `:help nvim-treesitter-incremental-selection-mod`
    --    - Show your current context: https://github.com/nvim-treesitter/nvim-treesitter-context
    --    - Treesitter + textobjects: https://github.com/nvim-treesitter/nvim-treesitter-textobjects
  },

  -- The following comments only work if you have downloaded the kickstart repo, not just copy pasted the
  -- init.lua. If you want these files, they are in the repository, so you can just download them and
  -- place them in the correct locations.

  -- NOTE: Next step on your Neovim journey: Add/Configure additional plugins for Kickstart
  --
  --  Here are some example plugins that I've included in the Kickstart repository.
  --  Uncomment any of the lines below to enable them (you will need to restart nvim).
  --
  -- require 'kickstart.plugins.debug',
  -- require 'kickstart.plugins.indent_line',
  -- require 'kickstart.plugins.lint',
  -- require 'kickstart.plugins.autopairs',
  -- require 'kickstart.plugins.neo-tree',
  -- require 'kickstart.plugins.gitsigns', -- adds gitsigns recommend keymaps

  -- NOTE: The import below can automatically add your own plugins, configuration, etc from `lua/custom/plugins/*.lua`
  --    This is the easiest way to modularize your config.
  --
  --  Uncomment the following line and add your plugins to `lua/custom/plugins/*.lua` to get going.
  -- { import = 'custom.plugins' },
  --
  -- For additional information with loading, sourcing and examples see `:help lazy.nvim-üîå-plugin-spec`
  -- Or use telescope!
  -- In normal mode type `<space>sh` then write `lazy.nvim-plugin`
  -- you can continue same window with `<space>sr` which resumes last telescope search
}, {
  ui = {
    -- If you are using a Nerd Font: set icons to an empty table which will use the
    -- default lazy.nvim defined Nerd Font icons, otherwise define a unicode icons table
    icons = vim.g.have_nerd_font and {} or {
      cmd = '‚åò',
      config = 'üõ†',
      event = 'üìÖ',
      ft = 'üìÇ',
      init = '‚öô',
      keys = 'üóù',
      plugin = 'üîå',
      runtime = 'üíª',
      require = 'üåô',
      source = 'üìÑ',
      start = 'üöÄ',
      task = 'üìå',
      lazy = 'üí§ ',
    },
  },
})

-- The line beneath this is called `modeline`. See `:help modeline`
-- vim: ts=2 sts=2 sw=2 et



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/health.lua
################################################################################

--[[
--
-- This file is not required for your own configuration,
-- but helps people determine if their system is setup correctly.
--
--]]

local check_version = function()
  local verstr = tostring(vim.version())
  if not vim.version.ge then
    vim.health.error(string.format("Neovim out of date: '%s'. Upgrade to latest stable or nightly", verstr))
    return
  end

  if vim.version.ge(vim.version(), '0.10-dev') then
    vim.health.ok(string.format("Neovim version is: '%s'", verstr))
  else
    vim.health.error(string.format("Neovim out of date: '%s'. Upgrade to latest stable or nightly", verstr))
  end
end

local check_external_reqs = function()
  -- Basic utils: `git`, `make`, `unzip`
  for _, exe in ipairs { 'git', 'make', 'unzip', 'rg' } do
    local is_executable = vim.fn.executable(exe) == 1
    if is_executable then
      vim.health.ok(string.format("Found executable: '%s'", exe))
    else
      vim.health.warn(string.format("Could not find executable: '%s'", exe))
    end
  end

  return true
end

return {
  check = function()
    vim.health.start 'kickstart.nvim'

    vim.health.info [[NOTE: Not every warning is a 'must-fix' in `:checkhealth`

  Fix only warnings for plugins and languages you intend to use.
    Mason will give warnings for languages that are not installed.
    You do not need to install, unless you want to use those languages!]]

    local uv = vim.uv or vim.loop
    vim.health.info('System Information: ' .. vim.inspect(uv.os_uname()))

    check_version()
    check_external_reqs()
  end,
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/autopairs.lua
################################################################################

-- autopairs
-- https://github.com/windwp/nvim-autopairs

return {
  'windwp/nvim-autopairs',
  event = 'InsertEnter',
  opts = {},
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/indent_line.lua
################################################################################

return {
  { -- Add indentation guides even on blank lines
    'lukas-reineke/indent-blankline.nvim',
    -- Enable `lukas-reineke/indent-blankline.nvim`
    -- See `:help ibl`
    main = 'ibl',
    opts = {},
  },
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/neo-tree.lua
################################################################################

-- Neo-tree is a Neovim plugin to browse the file system
-- https://github.com/nvim-neo-tree/neo-tree.nvim

return {
  'nvim-neo-tree/neo-tree.nvim',
  version = '*',
  dependencies = {
    'nvim-lua/plenary.nvim',
    'nvim-tree/nvim-web-devicons', -- not strictly required, but recommended
    'MunifTanjim/nui.nvim',
  },
  lazy = false,
  keys = {
    { '\\', ':Neotree reveal<CR>', desc = 'NeoTree reveal', silent = true },
  },
  opts = {
    filesystem = {
      window = {
        mappings = {
          ['\\'] = 'close_window',
        },
      },
    },
  },
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/debug.lua
################################################################################

-- debug.lua
--
-- Shows how to use the DAP plugin to debug your code.
--
-- Primarily focused on configuring the debugger for Go, but can
-- be extended to other languages as well. That's why it's called
-- kickstart.nvim and not kitchen-sink.nvim ;)

return {
  -- NOTE: Yes, you can install new plugins here!
  'mfussenegger/nvim-dap',
  -- NOTE: And you can specify dependencies as well
  dependencies = {
    -- Creates a beautiful debugger UI
    'rcarriga/nvim-dap-ui',

    -- Required dependency for nvim-dap-ui
    'nvim-neotest/nvim-nio',

    -- Installs the debug adapters for you
    'mason-org/mason.nvim',
    'jay-babu/mason-nvim-dap.nvim',

    -- Add your own debuggers here
    'leoluz/nvim-dap-go',
  },
  keys = {
    -- Basic debugging keymaps, feel free to change to your liking!
    {
      '<F5>',
      function()
        require('dap').continue()
      end,
      desc = 'Debug: Start/Continue',
    },
    {
      '<F1>',
      function()
        require('dap').step_into()
      end,
      desc = 'Debug: Step Into',
    },
    {
      '<F2>',
      function()
        require('dap').step_over()
      end,
      desc = 'Debug: Step Over',
    },
    {
      '<F3>',
      function()
        require('dap').step_out()
      end,
      desc = 'Debug: Step Out',
    },
    {
      '<leader>b',
      function()
        require('dap').toggle_breakpoint()
      end,
      desc = 'Debug: Toggle Breakpoint',
    },
    {
      '<leader>B',
      function()
        require('dap').set_breakpoint(vim.fn.input 'Breakpoint condition: ')
      end,
      desc = 'Debug: Set Breakpoint',
    },
    -- Toggle to see last session result. Without this, you can't see session output in case of unhandled exception.
    {
      '<F7>',
      function()
        require('dapui').toggle()
      end,
      desc = 'Debug: See last session result.',
    },
  },
  config = function()
    local dap = require 'dap'
    local dapui = require 'dapui'

    require('mason-nvim-dap').setup {
      -- Makes a best effort to setup the various debuggers with
      -- reasonable debug configurations
      automatic_installation = true,

      -- You can provide additional configuration to the handlers,
      -- see mason-nvim-dap README for more information
      handlers = {},

      -- You'll need to check that you have the required things installed
      -- online, please don't ask me how to install them :)
      ensure_installed = {
        -- Update this to ensure that you have the debuggers for the langs you want
        'delve',
      },
    }

    -- Dap UI setup
    -- For more information, see |:help nvim-dap-ui|
    dapui.setup {
      -- Set icons to characters that are more likely to work in every terminal.
      --    Feel free to remove or use ones that you like more! :)
      --    Don't feel like these are good choices.
      icons = { expanded = '‚ñæ', collapsed = '‚ñ∏', current_frame = '*' },
      controls = {
        icons = {
          pause = '‚è∏',
          play = '‚ñ∂',
          step_into = '‚èé',
          step_over = '‚è≠',
          step_out = '‚èÆ',
          step_back = 'b',
          run_last = '‚ñ∂‚ñ∂',
          terminate = '‚èπ',
          disconnect = '‚èè',
        },
      },
    }

    -- Change breakpoint icons
    -- vim.api.nvim_set_hl(0, 'DapBreak', { fg = '#e51400' })
    -- vim.api.nvim_set_hl(0, 'DapStop', { fg = '#ffcc00' })
    -- local breakpoint_icons = vim.g.have_nerd_font
    --     and { Breakpoint = 'Ó©±', BreakpointCondition = 'Ó™ß', BreakpointRejected = 'ÓÆå', LogPoint = 'Ó™´', Stopped = 'ÓÆã' }
    --   or { Breakpoint = '‚óè', BreakpointCondition = '‚äú', BreakpointRejected = '‚äò', LogPoint = '‚óÜ', Stopped = '‚≠î' }
    -- for type, icon in pairs(breakpoint_icons) do
    --   local tp = 'Dap' .. type
    --   local hl = (type == 'Stopped') and 'DapStop' or 'DapBreak'
    --   vim.fn.sign_define(tp, { text = icon, texthl = hl, numhl = hl })
    -- end

    dap.listeners.after.event_initialized['dapui_config'] = dapui.open
    dap.listeners.before.event_terminated['dapui_config'] = dapui.close
    dap.listeners.before.event_exited['dapui_config'] = dapui.close

    -- Install golang specific config
    require('dap-go').setup {
      delve = {
        -- On Windows delve must be run attached or it crashes.
        -- See https://github.com/leoluz/nvim-dap-go/blob/main/README.md#configuring
        detached = vim.fn.has 'win32' == 0,
      },
    }
  end,
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/gitsigns.lua
################################################################################

-- Adds git related signs to the gutter, as well as utilities for managing changes
-- NOTE: gitsigns is already included in init.lua but contains only the base
-- config. This will add also the recommended keymaps.

return {
  {
    'lewis6991/gitsigns.nvim',
    opts = {
      on_attach = function(bufnr)
        local gitsigns = require 'gitsigns'

        local function map(mode, l, r, opts)
          opts = opts or {}
          opts.buffer = bufnr
          vim.keymap.set(mode, l, r, opts)
        end

        -- Navigation
        map('n', ']c', function()
          if vim.wo.diff then
            vim.cmd.normal { ']c', bang = true }
          else
            gitsigns.nav_hunk 'next'
          end
        end, { desc = 'Jump to next git [c]hange' })

        map('n', '[c', function()
          if vim.wo.diff then
            vim.cmd.normal { '[c', bang = true }
          else
            gitsigns.nav_hunk 'prev'
          end
        end, { desc = 'Jump to previous git [c]hange' })

        -- Actions
        -- visual mode
        map('v', '<leader>hs', function()
          gitsigns.stage_hunk { vim.fn.line '.', vim.fn.line 'v' }
        end, { desc = 'git [s]tage hunk' })
        map('v', '<leader>hr', function()
          gitsigns.reset_hunk { vim.fn.line '.', vim.fn.line 'v' }
        end, { desc = 'git [r]eset hunk' })
        -- normal mode
        map('n', '<leader>hs', gitsigns.stage_hunk, { desc = 'git [s]tage hunk' })
        map('n', '<leader>hr', gitsigns.reset_hunk, { desc = 'git [r]eset hunk' })
        map('n', '<leader>hS', gitsigns.stage_buffer, { desc = 'git [S]tage buffer' })
        map('n', '<leader>hu', gitsigns.stage_hunk, { desc = 'git [u]ndo stage hunk' })
        map('n', '<leader>hR', gitsigns.reset_buffer, { desc = 'git [R]eset buffer' })
        map('n', '<leader>hp', gitsigns.preview_hunk, { desc = 'git [p]review hunk' })
        map('n', '<leader>hb', gitsigns.blame_line, { desc = 'git [b]lame line' })
        map('n', '<leader>hd', gitsigns.diffthis, { desc = 'git [d]iff against index' })
        map('n', '<leader>hD', function()
          gitsigns.diffthis '@'
        end, { desc = 'git [D]iff against last commit' })
        -- Toggles
        map('n', '<leader>tb', gitsigns.toggle_current_line_blame, { desc = '[T]oggle git show [b]lame line' })
        map('n', '<leader>tD', gitsigns.preview_hunk_inline, { desc = '[T]oggle git show [D]eleted' })
      end,
    },
  },
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/kickstart/plugins/lint.lua
################################################################################

return {

  { -- Linting
    'mfussenegger/nvim-lint',
    event = { 'BufReadPre', 'BufNewFile' },
    config = function()
      local lint = require 'lint'
      lint.linters_by_ft = {
        markdown = { 'markdownlint' },
      }

      -- To allow other plugins to add linters to require('lint').linters_by_ft,
      -- instead set linters_by_ft like this:
      -- lint.linters_by_ft = lint.linters_by_ft or {}
      -- lint.linters_by_ft['markdown'] = { 'markdownlint' }
      --
      -- However, note that this will enable a set of default linters,
      -- which will cause errors unless these tools are available:
      -- {
      --   clojure = { "clj-kondo" },
      --   dockerfile = { "hadolint" },
      --   inko = { "inko" },
      --   janet = { "janet" },
      --   json = { "jsonlint" },
      --   markdown = { "vale" },
      --   rst = { "vale" },
      --   ruby = { "ruby" },
      --   terraform = { "tflint" },
      --   text = { "vale" }
      -- }
      --
      -- You can disable the default linters by setting their filetypes to nil:
      -- lint.linters_by_ft['clojure'] = nil
      -- lint.linters_by_ft['dockerfile'] = nil
      -- lint.linters_by_ft['inko'] = nil
      -- lint.linters_by_ft['janet'] = nil
      -- lint.linters_by_ft['json'] = nil
      -- lint.linters_by_ft['markdown'] = nil
      -- lint.linters_by_ft['rst'] = nil
      -- lint.linters_by_ft['ruby'] = nil
      -- lint.linters_by_ft['terraform'] = nil
      -- lint.linters_by_ft['text'] = nil

      -- Create autocommand which carries out the actual linting
      -- on the specified events.
      local lint_augroup = vim.api.nvim_create_augroup('lint', { clear = true })
      vim.api.nvim_create_autocmd({ 'BufEnter', 'BufWritePost', 'InsertLeave' }, {
        group = lint_augroup,
        callback = function()
          -- Only run the linter in buffers that you can modify in order to
          -- avoid superfluous noise, notably within the handy LSP pop-ups that
          -- describe the hovered symbol using Markdown.
          if vim.bo.modifiable then
            lint.try_lint()
          end
        end,
      })
    end,
  },
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lua/custom/plugins/init.lua
################################################################################

-- You can add your own plugins here or in other files in this directory!
--  I promise not to create any merge conflicts in this directory :)
--
-- See the kickstart.nvim README for more information
return {}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/lazy-lock.json
################################################################################

{
  "LuaSnip": { "branch": "master", "commit": "5a1e39223db9a0498024a77b8441169d260c8c25" },
  "blink.cmp": { "branch": "main", "commit": "327fff91fe6af358e990be7be1ec8b78037d2138" },
  "conform.nvim": { "branch": "master", "commit": "cde4da5c1083d3527776fee69536107d98dae6c9" },
  "fidget.nvim": { "branch": "main", "commit": "e32b672d8fd343f9d6a76944fedb8c61d7d8111a" },
  "gitsigns.nvim": { "branch": "main", "commit": "20ad4419564d6e22b189f6738116b38871082332" },
  "guess-indent.nvim": { "branch": "main", "commit": "84a4987ff36798c2fc1169cbaff67960aed9776f" },
  "lazy.nvim": { "branch": "main", "commit": "85c7ff3711b730b4030d03144f6db6375044ae82" },
  "lazydev.nvim": { "branch": "main", "commit": "5231c62aa83c2f8dc8e7ba957aa77098cda1257d" },
  "mason-lspconfig.nvim": { "branch": "main", "commit": "b1d9a914b02ba5660f1e272a03314b31d4576fe2" },
  "mason-tool-installer.nvim": { "branch": "main", "commit": "517ef5994ef9d6b738322664d5fdd948f0fdeb46" },
  "mason.nvim": { "branch": "main", "commit": "ad7146aa61dcaeb54fa900144d768f040090bff0" },
  "mini.nvim": { "branch": "main", "commit": "f43357be022565d969795cde29b8988d082cc913" },
  "nvim-lspconfig": { "branch": "master", "commit": "b34fbdffdcb6295c7a25df6ba375452a2e73c32e" },
  "nvim-treesitter": { "branch": "master", "commit": "42fc28ba918343ebfd5565147a42a26580579482" },
  "plenary.nvim": { "branch": "master", "commit": "b9fd5226c2f76c951fc8ed5923d85e4de065e509" },
  "telescope-fzf-native.nvim": { "branch": "main", "commit": "6fea601bd2b694c6f2ae08a6c6fab14930c60e2c" },
  "telescope-ui-select.nvim": { "branch": "master", "commit": "6e51d7da30bd139a6950adf2a47fda6df9fa06d2" },
  "telescope.nvim": { "branch": "master", "commit": "3a12a853ebf21ec1cce9a92290e3013f8ae75f02" },
  "todo-comments.nvim": { "branch": "main", "commit": "31e3c38ce9b29781e4422fc0322eb0a21f4e8668" },
  "tokyonight.nvim": { "branch": "main", "commit": "5da1b76e64daf4c5d410f06bcb6b9cb640da7dfd" },
  "which-key.nvim": { "branch": "main", "commit": "3aab2147e74890957785941f0c1ad87d0a44c15a" }
}



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/README.md
################################################################################

# kickstart.nvim

## Introduction

A starting point for Neovim that is:

* Small
* Single-file
* Completely Documented

**NOT** a Neovim distribution, but instead a starting point for your configuration.

## Installation

### Install Neovim

Kickstart.nvim targets *only* the latest
['stable'](https://github.com/neovim/neovim/releases/tag/stable) and latest
['nightly'](https://github.com/neovim/neovim/releases/tag/nightly) of Neovim.
If you are experiencing issues, please make sure you have the latest versions.

### Install External Dependencies

External Requirements:
- Basic utils: `git`, `make`, `unzip`, C Compiler (`gcc`)
- [ripgrep](https://github.com/BurntSushi/ripgrep#installation),
  [fd-find](https://github.com/sharkdp/fd#installation)
- Clipboard tool (xclip/xsel/win32yank or other depending on the platform)
- A [Nerd Font](https://www.nerdfonts.com/): optional, provides various icons
  - if you have it set `vim.g.have_nerd_font` in `init.lua` to true
- Emoji fonts (Ubuntu only, and only if you want emoji!) `sudo apt install fonts-noto-color-emoji`
- Language Setup:
  - If you want to write Typescript, you need `npm`
  - If you want to write Golang, you will need `go`
  - etc.

> [!NOTE]
> See [Install Recipes](#Install-Recipes) for additional Windows and Linux specific notes
> and quick install snippets

### Install Kickstart

> [!NOTE]
> [Backup](#FAQ) your previous configuration (if any exists)

Neovim's configurations are located under the following paths, depending on your OS:

| OS | PATH |
| :- | :--- |
| Linux, MacOS | `$XDG_CONFIG_HOME/nvim`, `~/.config/nvim` |
| Windows (cmd)| `%localappdata%\nvim\` |
| Windows (powershell)| `$env:LOCALAPPDATA\nvim\` |

#### Recommended Step

[Fork](https://docs.github.com/en/get-started/quickstart/fork-a-repo) this repo
so that you have your own copy that you can modify, then install by cloning the
fork to your machine using one of the commands below, depending on your OS.

> [!NOTE]
> Your fork's URL will be something like this:
> `https://github.com/<your_github_username>/kickstart.nvim.git`

You likely want to remove `lazy-lock.json` from your fork's `.gitignore` file
too - it's ignored in the kickstart repo to make maintenance easier, but it's
[recommended to track it in version control](https://lazy.folke.io/usage/lockfile).

#### Clone kickstart.nvim

> [!NOTE]
> If following the recommended step above (i.e., forking the repo), replace
> `nvim-lua` with `<your_github_username>` in the commands below

<details><summary> Linux and Mac </summary>

```sh
git clone https://github.com/nvim-lua/kickstart.nvim.git "${XDG_CONFIG_HOME:-$HOME/.config}"/nvim
```

</details>

<details><summary> Windows </summary>

If you're using `cmd.exe`:

```
git clone https://github.com/nvim-lua/kickstart.nvim.git "%localappdata%\nvim"
```

If you're using `powershell.exe`

```
git clone https://github.com/nvim-lua/kickstart.nvim.git "${env:LOCALAPPDATA}\nvim"
```

</details>

### Post Installation

Start Neovim

```sh
nvim
```

That's it! Lazy will install all the plugins you have. Use `:Lazy` to view
the current plugin status. Hit `q` to close the window.

#### Read The Friendly Documentation

Read through the `init.lua` file in your configuration folder for more
information about extending and exploring Neovim. That also includes
examples of adding popularly requested plugins.

> [!NOTE]
> For more information about a particular plugin check its repository's documentation.


### Getting Started

[The Only Video You Need to Get Started with Neovim](https://youtu.be/m8C0Cq9Uv9o)

### FAQ

* What should I do if I already have a pre-existing Neovim configuration?
  * You should back it up and then delete all associated files.
  * This includes your existing init.lua and the Neovim files in `~/.local`
    which can be deleted with `rm -rf ~/.local/share/nvim/`
* Can I keep my existing configuration in parallel to kickstart?
  * Yes! You can use [NVIM_APPNAME](https://neovim.io/doc/user/starting.html#%24NVIM_APPNAME)`=nvim-NAME`
    to maintain multiple configurations. For example, you can install the kickstart
    configuration in `~/.config/nvim-kickstart` and create an alias:
    ```
    alias nvim-kickstart='NVIM_APPNAME="nvim-kickstart" nvim'
    ```
    When you run Neovim using `nvim-kickstart` alias it will use the alternative
    config directory and the matching local directory
    `~/.local/share/nvim-kickstart`. You can apply this approach to any Neovim
    distribution that you would like to try out.
* What if I want to "uninstall" this configuration:
  * See [lazy.nvim uninstall](https://lazy.folke.io/usage#-uninstalling) information
* Why is the kickstart `init.lua` a single file? Wouldn't it make sense to split it into multiple files?
  * The main purpose of kickstart is to serve as a teaching tool and a reference
    configuration that someone can easily use to `git clone` as a basis for their own.
    As you progress in learning Neovim and Lua, you might consider splitting `init.lua`
    into smaller parts. A fork of kickstart that does this while maintaining the
    same functionality is available here:
    * [kickstart-modular.nvim](https://github.com/dam9000/kickstart-modular.nvim)
  * Discussions on this topic can be found here:
    * [Restructure the configuration](https://github.com/nvim-lua/kickstart.nvim/issues/218)
    * [Reorganize init.lua into a multi-file setup](https://github.com/nvim-lua/kickstart.nvim/pull/473)

### Install Recipes

Below you can find OS specific install instructions for Neovim and dependencies.

After installing all the dependencies continue with the [Install Kickstart](#Install-Kickstart) step.

#### Windows Installation

<details><summary>Windows with Microsoft C++ Build Tools and CMake</summary>
Installation may require installing build tools and updating the run command for `telescope-fzf-native`

See `telescope-fzf-native` documentation for [more details](https://github.com/nvim-telescope/telescope-fzf-native.nvim#installation)

This requires:

- Install CMake and the Microsoft C++ Build Tools on Windows

```lua
{'nvim-telescope/telescope-fzf-native.nvim', build = 'cmake -S. -Bbuild -DCMAKE_BUILD_TYPE=Release && cmake --build build --config Release && cmake --install build --prefix build' }
```
</details>
<details><summary>Windows with gcc/make using chocolatey</summary>
Alternatively, one can install gcc and make which don't require changing the config,
the easiest way is to use choco:

1. install [chocolatey](https://chocolatey.org/install)
either follow the instructions on the page or use winget,
run in cmd as **admin**:
```
winget install --accept-source-agreements chocolatey.chocolatey
```

2. install all requirements using choco, exit the previous cmd and
open a new one so that choco path is set, and run in cmd as **admin**:
```
choco install -y neovim git ripgrep wget fd unzip gzip mingw make
```
</details>
<details><summary>WSL (Windows Subsystem for Linux)</summary>

```
wsl --install
wsl
sudo add-apt-repository ppa:neovim-ppa/unstable -y
sudo apt update
sudo apt install make gcc ripgrep unzip git xclip neovim
```
</details>

#### Linux Install
<details><summary>Ubuntu Install Steps</summary>

```
sudo add-apt-repository ppa:neovim-ppa/unstable -y
sudo apt update
sudo apt install make gcc ripgrep unzip git xclip neovim
```
</details>
<details><summary>Debian Install Steps</summary>

```
sudo apt update
sudo apt install make gcc ripgrep unzip git xclip curl

# Now we install nvim
curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux-x86_64.tar.gz
sudo rm -rf /opt/nvim-linux-x86_64
sudo mkdir -p /opt/nvim-linux-x86_64
sudo chmod a+rX /opt/nvim-linux-x86_64
sudo tar -C /opt -xzf nvim-linux-x86_64.tar.gz

# make it available in /usr/local/bin, distro installs to /usr/bin
sudo ln -sf /opt/nvim-linux-x86_64/bin/nvim /usr/local/bin/
```
</details>
<details><summary>Fedora Install Steps</summary>

```
sudo dnf install -y gcc make git ripgrep fd-find unzip neovim
```
</details>

<details><summary>Arch Install Steps</summary>

```
sudo pacman -S --noconfirm --needed gcc make git ripgrep fd unzip neovim
```
</details>




################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/doc/kickstart.txt
################################################################################

================================================================================
INTRODUCTION                                                  *kickstart.nvim*

Kickstart.nvim is a project to help you get started on your neovim journey.

                                                            *kickstart-is-not*
It is not:
- Complete framework for every plugin under the sun
- Place to add every plugin that could ever be useful

                                                                *kickstart-is*
It is:
- Somewhere that has a good start for the most common "IDE" type features:
    - autocompletion
    - goto-definition
    - find references
    - fuzzy finding
    - and hinting at what more can be done :)
- A place to _kickstart_ your journey.
    - You should fork this project and use/modify it so that it matches your
      style and preferences. If you don't want to do that, there are probably
      other projects that would fit much better for you (and that's great!)!

 vim:tw=78:ts=8:ft=help:norl:



################################################################################
FILE PATH: uke/stow/nvim/.config/nvim/doc/tags
################################################################################

kickstart-is	kickstart.txt	/*kickstart-is*
kickstart-is-not	kickstart.txt	/*kickstart-is-not*
kickstart.nvim	kickstart.txt	/*kickstart.nvim*



################################################################################
FILE PATH: uke/stow/keyd/.config/keyd/default.conf
################################################################################

# ==============================================================================
# KEYD CONFIG - Unified Keyboard Environment
# ==============================================================================
# ISO Hyper Key: Caps Lock as navigation layer
# Equivalent to Karabiner-Elements config on macOS
# ==============================================================================
# 
# INSTALLATION:
#   This file should be symlinked to /etc/keyd/default.conf (requires sudo)
#   See: scripts/keyd-setup.sh
#
# USAGE:
#   Caps Lock alone ‚Üí Escape
#   Caps Lock + hjkl ‚Üí Arrow keys
#   Caps Lock + yuio ‚Üí Home/PageUp/PageDown/End
#   Caps Lock + wasd ‚Üí Shift+Arrow (selection)
#   Caps Lock + qe   ‚Üí Option+Shift+Arrow (word selection)
#   Caps Lock + fg   ‚Üí Option+Arrow (word jump)
#   Caps Lock + nm   ‚Üí Option+Arrow (word jump, alternate)
#   Caps Lock + Backspace ‚Üí Delete Forward
#   Caps Lock + '    ‚Üí Toggle actual Caps Lock
# ==============================================================================

[ids]
*

[main]

# Caps Lock becomes a layer toggle, Escape when tapped alone
capslock = overload(hyper, esc)

[hyper]

# ------------------------------------------------------------------------------
# Vim-style Navigation (hjkl ‚Üí Arrows)
# ------------------------------------------------------------------------------
h = left
j = down
k = up
l = right

# ------------------------------------------------------------------------------
# Extended Navigation
# ------------------------------------------------------------------------------
y = home
u = pagedown
i = pageup
o = end

# ------------------------------------------------------------------------------
# Delete Forward (Caps + Backspace)
# ------------------------------------------------------------------------------
backspace = delete

# ------------------------------------------------------------------------------
# Actual Caps Lock Toggle (Caps + ')
# ------------------------------------------------------------------------------
' = capslock

# ------------------------------------------------------------------------------
# Word Navigation (Caps + f/g or n/m)
# Uses Ctrl+Arrow on Linux (equivalent to Option+Arrow on macOS)
# ------------------------------------------------------------------------------
f = C-left
g = C-right
n = C-left
m = C-right

# ------------------------------------------------------------------------------
# Selection (Caps + wasd ‚Üí Shift+Arrow)
# ------------------------------------------------------------------------------
w = S-up
a = S-left
s = S-down
d = S-right

# ------------------------------------------------------------------------------
# Word Selection (Caps + q/e ‚Üí Ctrl+Shift+Arrow)
# ------------------------------------------------------------------------------
q = C-S-left
e = C-S-right



################################################################################
FILE PATH: uke/stow/wezterm/.wezterm.lua
################################################################################

-- ==============================================================================
-- WEZTERM CONFIG - Unified Keyboard Environment
-- ==============================================================================
-- SECONDARY Layer: Alt (macOS) / Super (Linux)
-- Conflict-free: Cmd stays with yabai, Alt handles terminal internals
-- ==============================================================================

local wezterm = require("wezterm")
local config = wezterm.config_builder()

-- OS Detection
local function is_macos()
    return wezterm.target_triple:find("darwin") ~= nil
end

-- SECONDARY modifier: Alt on macOS, Super on Linux
local SECONDARY = is_macos() and "ALT" or "SUPER"

-- =============================================================================
-- Appearance
-- =============================================================================
config.color_scheme = "Catppuccin Mocha"
config.font = wezterm.font_with_fallback({
    "JetBrains Mono",
    "Fira Code",
    "Menlo",
    "Monaco",
})
config.font_size = is_macos() and 14.0 or 12.0
config.line_height = 1.2

config.window_decorations = "RESIZE"
config.window_padding = {
    left = 8,
    right = 8,
    top = 8,
    bottom = 8,
}
config.window_background_opacity = 0.95
config.macos_window_background_blur = 20

-- Tab bar
config.enable_tab_bar = true
config.use_fancy_tab_bar = false
config.tab_bar_at_bottom = true
config.hide_tab_bar_if_only_one_tab = true

-- =============================================================================
-- Behavior
-- =============================================================================
config.scrollback_lines = 10000
config.window_close_confirmation = "NeverPrompt"
config.check_for_updates = false

-- Initial size
config.initial_cols = 120
config.initial_rows = 35

-- =============================================================================
-- Keybindings (SECONDARY Layer)
-- =============================================================================
local act = wezterm.action

config.keys = {
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    -- Tab & Pane Management
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    { key = "t", mods = SECONDARY, action = act.SpawnTab("CurrentPaneDomain") },
    
    -- FIXED: Close Pane instead of Tab. Closes split first, then tab if empty.
    { key = "w", mods = SECONDARY, action = act.CloseCurrentPane({ confirm = false }) },
    
    -- Keep 'x' as an alternative for closing pane
    { key = "x", mods = SECONDARY, action = act.CloseCurrentPane({ confirm = false }) },
    
    -- Tab navigation by number
    { key = "1", mods = SECONDARY, action = act.ActivateTab(0) },
    { key = "2", mods = SECONDARY, action = act.ActivateTab(1) },
    { key = "3", mods = SECONDARY, action = act.ActivateTab(2) },
    { key = "4", mods = SECONDARY, action = act.ActivateTab(3) },
    { key = "5", mods = SECONDARY, action = act.ActivateTab(4) },
    { key = "6", mods = SECONDARY, action = act.ActivateTab(5) },
    { key = "7", mods = SECONDARY, action = act.ActivateTab(6) },
    { key = "8", mods = SECONDARY, action = act.ActivateTab(7) },
    { key = "9", mods = SECONDARY, action = act.ActivateTab(8) },
    
    -- Tab navigation relative
    { key = "[", mods = SECONDARY, action = act.ActivateTabRelative(-1) },
    { key = "]", mods = SECONDARY, action = act.ActivateTabRelative(1) },

    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    -- Pane Splitting
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    { key = "\\", mods = SECONDARY, action = act.SplitHorizontal({ domain = "CurrentPaneDomain" }) },
    { key = "-", mods = SECONDARY, action = act.SplitVertical({ domain = "CurrentPaneDomain" }) },

    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    -- Pane Navigation (Vim-style)
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    { key = "h", mods = SECONDARY, action = act.ActivatePaneDirection("Left") },
    { key = "j", mods = SECONDARY, action = act.ActivatePaneDirection("Down") },
    { key = "k", mods = SECONDARY, action = act.ActivatePaneDirection("Up") },
    { key = "l", mods = SECONDARY, action = act.ActivatePaneDirection("Right") },

    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    -- Pane Resizing (SECONDARY + Shift)
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    { key = "h", mods = SECONDARY .. "|SHIFT", action = act.AdjustPaneSize({ "Left", 5 }) },
    { key = "j", mods = SECONDARY .. "|SHIFT", action = act.AdjustPaneSize({ "Down", 5 }) },
    { key = "k", mods = SECONDARY .. "|SHIFT", action = act.AdjustPaneSize({ "Up", 5 }) },
    { key = "l", mods = SECONDARY .. "|SHIFT", action = act.AdjustPaneSize({ "Right", 5 }) },

    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    -- Utilities
    -- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    { key = "z", mods = SECONDARY, action = act.TogglePaneZoomState },
    { key = "f", mods = SECONDARY, action = act.Search({ CaseInSensitiveString = "" }) },
    { key = "r", mods = SECONDARY, action = act.ReloadConfiguration },
    { key = "p", mods = SECONDARY, action = act.ActivateCommandPalette },
}

-- Mouse bindings
config.mouse_bindings = {
    -- Right click to paste
    {
        event = { Down = { streak = 1, button = "Right" } },
        mods = "NONE",
        action = act.PasteFrom("Clipboard"),
    },
}

-- Keep default keybindings for system copy/paste
config.disable_default_key_bindings = false

return config


################################################################################
FILE PATH: uke/stow/tmux/.tmux.conf
################################################################################

# ==============================================================================
# TMUX CONFIG - Unified Keyboard Environment
# ==============================================================================
# Prefix: Ctrl+A (TMUX Layer)
# This is separate from QUATERNARY (Ctrl) shell commands
# ==============================================================================

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Prefix Key
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Terminal Settings
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# General Options
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 50000
set -sg escape-time 0
set -g focus-events on

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Reload Config
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Pane Splitting (matches WezTerm)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bind \\ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Pane Navigation (Vim-style)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Pane Resizing
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Management
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bind c new-window -c "#{pane_current_path}"
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Copy Mode (Vi-style)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
setw -g mode-keys vi
bind Enter copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi Escape send -X cancel

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Status Bar (Catppuccin-inspired)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
set -g status-position bottom
set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
set -g status-left "#[fg=#1e1e2e,bg=#89b4fa,bold] #S #[fg=#89b4fa,bg=#1e1e2e]"
set -g status-left-length 30
set -g status-right "#[fg=#cdd6f4]%H:%M "
set -g status-right-length 20

# Window status
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[fg=#1e1e2e,bg=#cba6f7,bold] #I:#W "
set -g window-status-separator ""

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Pane Borders
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
set -g pane-border-style "fg=#45475a"
set -g pane-active-border-style "fg=#89b4fa"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Vim-Tmux Navigator Integration
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Seamless navigation between tmux panes and vim splits
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|l?n?vim?x?)(diff)?$'"
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"



################################################################################
FILE PATH: uke/stow/zsh/.zshrc
################################################################################

# ==============================================================================
# ZSH CONFIG - Unified Keyboard Environment
# ==============================================================================
# Cross-platform shell config for macOS and Linux
# ==============================================================================

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# OS Detection
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
case "$(uname -s)" in
    Darwin*) export UKE_OS="macos" ;;
    Linux*)  export UKE_OS="linux" ;;
    *)       export UKE_OS="unknown" ;;
esac

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# History
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_VERIFY
setopt APPEND_HISTORY
setopt INC_APPEND_HISTORY

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Directory Navigation
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
setopt AUTO_CD
setopt AUTO_PUSHD
setopt PUSHD_IGNORE_DUPS
setopt PUSHD_SILENT

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Completion
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
autoload -Uz compinit && compinit
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"
zstyle ':completion:*' menu select

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Key Bindings (Emacs-style, preserves Ctrl layer)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
bindkey -e
bindkey '^[[A' history-search-backward
bindkey '^[[B' history-search-forward

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Environment Variables
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
export EDITOR='nvim'
export VISUAL='nvim'
export PAGER='less'
export LESS='-R'
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# PATH Configuration
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# UKE binaries
[[ -d "$HOME/.local/bin" ]] && export PATH="$HOME/.local/bin:$PATH"

# Dotfiles UKE
[[ -d "$HOME/dotfiles/uke/bin" ]] && export PATH="$HOME/dotfiles/uke/bin:$PATH"

# Platform-specific
if [[ "$UKE_OS" == "macos" ]]; then
    [[ -f "/opt/homebrew/bin/brew" ]] && eval "$(/opt/homebrew/bin/brew shellenv)"
    [[ -f "/usr/local/bin/brew" ]] && eval "$(/usr/local/bin/brew shellenv)"
fi

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Aliases - Universal
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias -- -='cd -'

# Listing
if command -v eza &>/dev/null; then
    alias ls='eza --icons'
    alias ll='eza -l --icons --git'
    alias la='eza -la --icons --git'
    alias lt='eza --tree --icons'
else
    [[ "$UKE_OS" == "macos" ]] && alias ls='ls -G' || alias ls='ls --color=auto'
    alias ll='ls -lh'
    alias la='ls -lah'
fi

# Safety
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Editor
alias v='nvim'
alias vim='nvim'

# Git
alias g='git'
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline --graph --decorate'
alias gd='git diff'
alias gco='git checkout'

# Dotfiles
alias dots='cd ~/dotfiles'

# Tmux
alias ta='tmux attach'
alias tn='tmux new -s'
alias tl='tmux list-sessions'

# Config editing
alias zshrc='$EDITOR ~/.zshrc'
alias vimrc='$EDITOR ~/.config/nvim/init.lua'
alias tmuxrc='$EDITOR ~/.tmux.conf'
alias reload='source ~/.zshrc'

# Network
alias myip='curl -s ifconfig.me'

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Aliases - UKE Specific
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
alias uke-edit='uke edit'
alias uke-reload='uke gen && uke reload'
alias b='uke-bunch'

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Aliases - Platform Specific
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
if [[ "$UKE_OS" == "macos" ]]; then
    alias yabai-restart='yabai --restart-service'
    alias skhd-restart='skhd --restart-service'
    alias yabai-log='tail -f /tmp/yabai_*.err.log'
    alias skhd-log='tail -f /tmp/skhd_*.err.log'
    alias dl='cd ~/Downloads'
    alias desk='cd ~/Desktop'
    alias ports='lsof -i -P'
else
    alias hypr-restart='hyprctl reload'
    alias hypr-log='cat ~/.hyprland.log'
    [[ -x "$(command -v pacman)" ]] && {
        alias update='sudo pacman -Syu'
        alias install='sudo pacman -S'
        alias search='pacman -Ss'
    }
    [[ -x "$(command -v yay)" ]] && {
        alias yayu='yay -Syu'
        alias yays='yay -Ss'
    }
    [[ -x "$(command -v wl-copy)" ]] && {
        alias pbcopy='wl-copy'
        alias pbpaste='wl-paste'
    }
    alias sc='systemctl'
    alias scu='systemctl --user'
fi

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Functions
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
mkcd() { mkdir -p "$1" && cd "$1"; }

extract() {
    [[ -f "$1" ]] || { echo "'$1' is not a valid file"; return 1; }
    case "$1" in
        *.tar.bz2) tar xjf "$1" ;;
        *.tar.gz)  tar xzf "$1" ;;
        *.bz2)     bunzip2 "$1" ;;
        *.gz)      gunzip "$1" ;;
        *.tar)     tar xf "$1" ;;
        *.tbz2)    tar xjf "$1" ;;
        *.tgz)     tar xzf "$1" ;;
        *.zip)     unzip "$1" ;;
        *.7z)      7z x "$1" ;;
        *)         echo "'$1' cannot be extracted" ;;
    esac
}

ff() { find . -type f -iname "*$1*"; }

gcl() { git clone "$1" && cd "$(basename "$1" .git)"; }

# Stow helpers
stowit()   { cd ~/dotfiles && stow "$@" && cd -; }
unstowit() { cd ~/dotfiles && stow -D "$@" && cd -; }
restowit() { cd ~/dotfiles && stow -R "$@" && cd -; }

# Show current workspace
workspace() {
    if [[ "$UKE_OS" == "macos" ]]; then
        yabai -m query --spaces --space 2>/dev/null | jq -r '.index'
    else
        hyprctl activeworkspace 2>/dev/null | grep "workspace ID" | awk '{print $3}'
    fi
}

# Environment info
envinfo() {
    echo "OS: $UKE_OS"
    echo "Shell: $SHELL"
    echo "Editor: $EDITOR"
    [[ -n "$TMUX" ]] && echo "Tmux: $(tmux display-message -p '#S')" || echo "Tmux: -"
    echo "Workspace: $(workspace 2>/dev/null || echo '-')"
}

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Tool Integration
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# FZF
if command -v fzf &>/dev/null; then
    source <(fzf --zsh) 2>/dev/null || true
    command -v fd &>/dev/null && {
        export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
        export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
    }
    export FZF_DEFAULT_OPTS="--color=bg+:#313244,bg:#1e1e2e,spinner:#f5e0dc,hl:#f38ba8 \
        --color=fg:#cdd6f4,header:#f38ba8,info:#cba6f7,pointer:#f5e0dc \
        --color=marker:#f5e0dc,fg+:#cdd6f4,prompt:#cba6f7,hl+:#f38ba8"
fi

# Zoxide
command -v zoxide &>/dev/null && eval "$(zoxide init zsh)" && alias cd='z'

# Starship
if command -v starship &>/dev/null; then
    eval "$(starship init zsh)"
else
    setopt PROMPT_SUBST
    PROMPT='%F{blue}%~%f %F{green}‚ùØ%f '
fi

# Syntax highlighting
if [[ "$UKE_OS" == "macos" ]]; then
    [[ -f "/opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" ]] && \
        source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
else
    [[ -f "/usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" ]] && \
        source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi

# Autosuggestions
if [[ "$UKE_OS" == "macos" ]]; then
    [[ -f "/opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh" ]] && \
        source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
else
    [[ -f "/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh" ]] && \
        source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Local Customizations
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local



################################################################################
FILE PATH: uke/docs/security/MACOS-SIP.md
################################################################################

# macOS SIP Configuration for Yabai

## Overview

System Integrity Protection (SIP) restricts certain operations on macOS. Yabai requires partial SIP modification for full functionality.

## Feature Comparison

| Feature | SIP Enabled | SIP Partial |
|:--------|:------------|:------------|
| Window focus | ‚úì | ‚úì |
| Window resize | ‚úì | ‚úì |
| Window move | ‚úì | ‚úì |
| Space switching | ‚úó | ‚úì |
| Space creation | ‚úó | ‚úì |
| Move to space | ‚úó | ‚úì |

**Bottom line:** For UKE's workspace management features, you need partial SIP.

## Checking SIP Status

```bash
csrutil status
```

## Modifying SIP (Apple Silicon)

1. **Shut down** your Mac completely

2. **Boot to Recovery:**
   - Hold power button until "Loading startup options" appears
   - Select "Options" ‚Üí Continue

3. **Open Terminal** from Utilities menu

4. **Run command:**
   ```bash
   csrutil enable --without fs --without debug --without nvram
   ```

5. **Reboot**

6. **Enable ARM64E ABI:**
   ```bash
   sudo nvram boot-args=-arm64e_preview_abi
   ```

7. **Reboot again**

## Modifying SIP (Intel Mac)

1. **Shut down** your Mac completely

2. **Boot to Recovery:**
   - Hold Cmd+R during startup

3. **Open Terminal** from Utilities menu

4. **Run command:**
   ```bash
   csrutil enable --without fs --without debug --without nvram
   ```

5. **Reboot**

## Loading the Scripting Addition

After SIP modification, yabai's scripting addition must be loaded:

```bash
# Add to sudoers for password-less loading
echo "$(whoami) ALL=(root) NOPASSWD: sha256:$(shasum -a 256 $(which yabai) | cut -d " " -f 1) $(which yabai) --load-sa" | sudo tee /private/etc/sudoers.d/yabai

# Load the scripting addition
sudo yabai --load-sa
```

The yabairc config already includes `sudo yabai --load-sa`.

## Verifying

```bash
# Check SIP status
csrutil status

# Test space switching
yabai -m space --focus 2
```

## Reverting

To restore full SIP:

1. Boot to Recovery
2. Run: `csrutil enable`
3. Reboot

## Security Considerations

Partially disabling SIP reduces system protections. The specific flags disabled:

- `fs`: Filesystem protections (needed for yabai injection)
- `debug`: Debugging restrictions
- `nvram`: Boot argument modifications

This is a trade-off between functionality and security. Consider your threat model.

## References

- [Yabai Wiki: Disabling SIP](https://github.com/koekeishiya/yabai/wiki/Disabling-System-Integrity-Protection)
- [Apple: About SIP](https://support.apple.com/en-us/HT204899)



################################################################################
FILE PATH: uke/docs/README.md
################################################################################

# UKE v6.4 - Complete Documentation

**Unified Keyboard Environment** ‚Äî One muscle memory for macOS & Linux

---

## Table of Contents

1. [Overview](#overview)
2. [Installation](#installation)
3. [Keybindings Reference](#keybindings)
4. [Features](#features)
5. [Configuration](#configuration)
6. [Troubleshooting](#troubleshooting)
7. [CLI Reference](#cli)

---

## Overview

UKE provides identical keyboard-driven workflows across macOS (yabai/skhd) and Linux (Hyprland). The core principle: **same muscle memory, different platforms**.

### Modifier Hierarchy

| Layer | macOS | Linux | Scope |
|:------|:------|:------|:------|
| **PRIMARY** | Cmd ‚åò | Alt | Window Manager |
| **+SHIFT** | Cmd+Shift | Alt+Shift | Move Windows |
| **SECONDARY** | Alt ‚å• | Super | Terminal (WezTerm) |
| **TERTIARY** | Alt+Shift | Super+Shift | Resize |
| **QUATERNARY** | Ctrl | Ctrl | Shell (never intercepted) |
| **LAUNCHER** | Cmd+Alt | Alt+Super | App Launch + QoL |
| **BUNCH** | Cmd+Ctrl | Alt+Ctrl | Environment Presets |

### Workspaces

| # | Purpose | macOS Apps | Linux Apps |
|:--|:--------|:-----------|:-----------|
| 1 | Browser | Safari, Brave | brave, firefox |
| 2 | Notes | Obsidian | obsidian |
| 3 | Code | WezTerm, Code | wezterm, code |
| 4 | Catch-all | Everything else | Everything else |
| 5 | Documents | Preview | evince, zathura |
| 6 | Raindrop | Raindrop.io | raindrop |
| 7 | Media | Spotify | spotify |
| 8 | Office | Word, Excel | libreoffice |
| 9 | Comms | Slack, Discord, Mail | slack, discord |
| 10 | AI | Claude | claude |

---

## Installation

### Arch Linux

```bash
# 1. Install packages
sudo pacman -S hyprland keyd stow jq wezterm zsh waybar dunst wofi \
               grim slurp wl-clipboard cliphist polkit-kde-agent \
               thunar pavucontrol network-manager-applet lxappearance

# AUR (optional)
yay -S brave-bin obsidian-bin spotify

# 2. Clone UKE
git clone https://github.com/YOUR_USER/uke.git ~/dotfiles/uke

# 3. Install
cd ~/dotfiles/uke
./scripts/install.sh

# 4. Setup keyd (Caps Lock ‚Üí Hyper)
./scripts/keyd-setup.sh
sudo usermod -aG input $USER  # Log out/in after

# 5. Verify
uke-doctor
```

### macOS

```bash
# 1. Install dependencies
brew install koekeishiya/formulae/yabai koekeishiya/formulae/skhd
brew install FelixKratz/formulae/borders stow jq

# 2. Clone UKE
git clone https://github.com/YOUR_USER/uke.git ~/dotfiles/uke

# 3. Install
cd ~/dotfiles/uke
./scripts/install.sh

# 4. Start services
yabai --start-service
skhd --start-service

# 5. Verify
uke-doctor
```

---

## Keybindings

### Window Focus (PRIMARY)

| Action | macOS | Linux |
|:-------|:------|:------|
| Focus left | Cmd + h | Alt + h |
| Focus down | Cmd + j | Alt + j |
| Focus up | Cmd + k | Alt + k |
| Focus right | Cmd + l | Alt + l |
| Focus recent | Cmd+Shift + ` | Alt+Shift + Escape |

### Window Move (PRIMARY+SHIFT)

| Action | macOS | Linux |
|:-------|:------|:------|
| Move left | Cmd+Shift + h | Alt+Shift + h |
| Move down | Cmd+Shift + j | Alt+Shift + j |
| Move up | Cmd+Shift + k | Alt+Shift + k |
| Move right | Cmd+Shift + l | Alt+Shift + l |

### Window Resize (TERTIARY)

| Action | macOS | Linux |
|:-------|:------|:------|
| Resize left | Alt+Shift + h | Super+Shift + h |
| Resize down | Alt+Shift + j | Super+Shift + j |
| Resize up | Alt+Shift + k | Super+Shift + k |
| Resize right | Alt+Shift + l | Super+Shift + l |

### Workspaces

| Action | macOS | Linux |
|:-------|:------|:------|
| Switch WS 1-9 | Cmd + 1-9 | Alt + 1-9 |
| Switch WS 10 | Cmd + 0 | Alt + 0 |
| Previous WS | Cmd + [ | Alt + [ |
| Next WS | Cmd + ] | Alt + ] |
| Move to WS | Cmd+Shift + # | Alt+Shift + # |

### Window Controls

| Action | macOS | Linux |
|:-------|:------|:------|
| Launch terminal | Cmd + Return | Alt + Return |
| Kill window | ‚Äî | Alt + q |
| Toggle fullscreen | Cmd+Shift + f | Alt+Shift + f |
| Toggle float | Cmd+Shift + Space | Alt+Shift + Space |
| Toggle split | Cmd+Shift + \\ | Alt+Shift + \\ |
| Gather windows | Cmd + ` | Alt + ` |

### Quality of Life (Linux)

| Action | Keybinding |
|:-------|:-----------|
| Spotlight (Wofi) | Alt+Super + Space |
| Zoom in (2x) | Alt+Super + = |
| Zoom reset | Alt+Super + - |
| Clipboard history | Alt + v |
| File manager | Alt+Super + f |
| Appearance | Alt+Super + s |

### Scratchpads

| Scratchpad | macOS | Linux |
|:-----------|:------|:------|
| Terminal | Cmd+Alt + ` | Alt + ` |
| Notes | Cmd+Alt + n | Alt+Super + n |
| Music | Cmd+Alt + m | Alt+Super + m |

### Smart Launchers

| App | macOS | Linux |
|:----|:------|:------|
| Brave | Cmd+Alt + b | Alt+Super + b |
| Obsidian | Cmd+Alt + o | Alt+Super + o |
| Code | Cmd+Alt + c | Alt+Super + c |
| WezTerm | Cmd+Alt + t | Alt+Super + t |

### Bunches (Environment Presets)

| Bunch | macOS | Linux |
|:------|:------|:------|
| Study | Cmd+Ctrl + 1 | Alt+Ctrl + F1 |
| Guitar | Cmd+Ctrl + 2 | Alt+Ctrl + F2 |
| Coding | Cmd+Ctrl + 3 | Alt+Ctrl + F3 |
| Email | Cmd+Ctrl + 4 | Alt+Ctrl + F4 |
| Reading | Cmd+Ctrl + 5 | Alt+Ctrl + F5 |

### Session Management

| Action | macOS | Linux |
|:-------|:------|:------|
| Quick save | Cmd+Ctrl + s | Alt+Ctrl + s |
| Quick restore | Cmd+Ctrl+Shift + s | Alt+Ctrl+Shift + s |

### WezTerm (SECONDARY Layer)

| Action | macOS | Linux |
|:-------|:------|:------|
| New tab | Alt + t | Super + t |
| Close pane | Alt + w | Super + w |
| Tab 1-9 | Alt + 1-9 | Super + 1-9 |
| Split horiz | Alt + \\ | Super + \\ |
| Split vert | Alt + - | Super + - |
| Nav left | Alt + h | Super + h |
| Nav down | Alt + j | Super + j |
| Nav up | Alt + k | Super + k |
| Nav right | Alt + l | Super + l |
| Zoom pane | Alt + z | Super + z |

### Hyper Key (Caps Lock)

| Action | Keybinding |
|:-------|:-----------|
| Escape | Caps (tap) |
| Arrows | Caps + hjkl |
| Home/End | Caps + y/o |
| Page Up/Down | Caps + i/u |
| Select | Caps + wasd |
| Word jump | Caps + fg |
| Word select | Caps + qe |
| Delete forward | Caps + Backspace |
| Toggle Caps | Caps + ' |

---

## Features

### Scratchpads

Dropdown windows that toggle with a hotkey:

```bash
uke-scratchpad terminal  # Toggle dropdown terminal
uke-scratchpad notes     # Toggle notes window
uke-scratchpad music     # Toggle music player
uke-scratchpad list      # Show available scratchpads
```

**Behavior:**
- If window doesn't exist ‚Üí launches app
- If window exists but hidden ‚Üí shows and focuses
- If window has focus ‚Üí hides it
- Always floats and positions automatically

### Smart Launching

`uke-launch` opens apps AND switches to their workspace:

```bash
uke-launch brave      # Opens Brave ‚Üí switches to WS 1
uke-launch obsidian   # Opens Obsidian ‚Üí switches to WS 2
uke-launch code       # Opens VS Code ‚Üí switches to WS 3
uke-launch list       # Show all apps
```

### Bunches

Pre-configured environments:

```bash
uke-bunch study    # Opens: Obsidian, Brave, WezTerm ‚Üí WS 2
uke-bunch coding   # Opens: WezTerm, Code, Brave ‚Üí WS 3
uke-bunch email    # Opens: Mail, Slack ‚Üí WS 9
```

### Gather

Organizes scattered windows to their designated workspaces:

```bash
uke-gather  # Triggered by Cmd/Alt + `
```

When on WS 1, gathers all browser windows to WS 1.
When on WS 3, gathers all code/terminal windows to WS 3.

### Sessions

Save and restore window layouts:

```bash
uke-session save mysetup     # Save current layout
uke-session restore mysetup  # Restore layout
uke-session list             # List saved sessions
uke-session delete mysetup   # Delete session
```

### Multi-Monitor (Linux)

Configure in `gen/hyprland/hyprland.conf`:

```bash
# Example: laptop + external monitor
monitor=eDP-1,1920x1080@60,0x0,1
monitor=HDMI-A-1,2560x1440@60,1920x0,1

# Assign workspaces to monitors
workspace = 1, monitor:eDP-1
workspace = 6, monitor:HDMI-A-1
```

---

## Configuration

### Directory Structure

```
~/dotfiles/uke/
‚îú‚îÄ‚îÄ config/registry.yaml     # Source of truth
‚îú‚îÄ‚îÄ gen/                     # Generated configs (don't edit!)
‚îÇ   ‚îú‚îÄ‚îÄ skhd/skhdrc
‚îÇ   ‚îú‚îÄ‚îÄ yabai/yabairc
‚îÇ   ‚îî‚îÄ‚îÄ hyprland/hyprland.conf
‚îú‚îÄ‚îÄ bin/                     # UKE commands
‚îú‚îÄ‚îÄ bunches/                 # Environment presets
‚îú‚îÄ‚îÄ stow/                    # Dotfiles
‚îÇ   ‚îú‚îÄ‚îÄ wezterm/
‚îÇ   ‚îú‚îÄ‚îÄ tmux/
‚îÇ   ‚îú‚îÄ‚îÄ zsh/
‚îÇ   ‚îú‚îÄ‚îÄ nvim/
‚îÇ   ‚îî‚îÄ‚îÄ keyd/               # Linux only
‚îî‚îÄ‚îÄ lib/
    ‚îú‚îÄ‚îÄ core.sh             # Foundation
    ‚îú‚îÄ‚îÄ wm.sh               # WM abstraction
    ‚îî‚îÄ‚îÄ gen.sh              # Config generator
```

### Customization

**Edit generator (persistent):**
```bash
vim ~/dotfiles/uke/lib/gen.sh
uke gen
uke reload
```

**Edit generated config (temporary):**
```bash
vim ~/dotfiles/uke/gen/hyprland/hyprland.conf
hyprctl reload
```

### Colorscheme (Nord)

Colors are unified in `lib/gen.sh`:

```bash
COLORS=(
    [accent]="#88c0d0"
    [bg]="#2e3440"
    [border_active]="88c0d0"
    [border_inactive]="3b4252"
)
```

---

## Troubleshooting

### Quick Diagnostics

```bash
uke-doctor          # Health check
uke-debug dump      # Full report
uke log tail        # View logs
```

### Common Issues

**Keybindings not working:**
```bash
# macOS
pgrep skhd || skhd --start-service
cat ~/.config/skhd/skhdrc | head -20

# Linux
echo $HYPRLAND_INSTANCE_SIGNATURE
hyprctl reload
```

**keyd not working (Linux):**
```bash
systemctl status keyd
groups | grep input  # Must be in input group
sudo keyd reload
```

**Windows not moving to correct workspace:**
```bash
# Get exact app/class name
yabai -m query --windows | jq '.[].app'     # macOS
hyprctl clients -j | jq '.[].class'         # Linux
```

**Scratchpad not appearing:**
```bash
uke-scratchpad terminal  # Test manually
ls -la ~/.local/bin/uke-scratchpad
```

### Reset

```bash
cd ~/dotfiles/uke
./bin/uke gen
uke reload
```

---

## CLI Reference

```bash
# Core
uke gen              # Generate configs
uke reload           # Restart WM
uke status           # Show status
uke edit             # Edit registry.yaml

# Tools
uke-doctor           # Health check
uke-gather           # Organize windows
uke-bunch <name>     # Launch environment
uke-launch <app>     # Smart app launch
uke-scratchpad <n>   # Toggle scratchpad
uke-session <cmd>    # Layout management
uke-debug dump       # Diagnostics
uke-backup           # Backup configs
```

---

## Quick Reference Card

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      UKE QUICK REFERENCE                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  LAYER          ‚îÇ macOS           ‚îÇ Linux                                     ‚îÇ
‚îÇ  PRIMARY        ‚îÇ Cmd             ‚îÇ Alt              ‚Üê Window Manager         ‚îÇ
‚îÇ  SECONDARY      ‚îÇ Alt             ‚îÇ Super            ‚Üê WezTerm                 ‚îÇ
‚îÇ  TERTIARY       ‚îÇ Alt+Shift       ‚îÇ Super+Shift      ‚Üê Resize                  ‚îÇ
‚îÇ  QUATERNARY     ‚îÇ Ctrl            ‚îÇ Ctrl             ‚Üê Shell (untouched)       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FOCUS          ‚îÇ Cmd + hjkl      ‚îÇ Alt + hjkl                                ‚îÇ
‚îÇ  MOVE           ‚îÇ Cmd+Shift + hjkl‚îÇ Alt+Shift + hjkl                          ‚îÇ
‚îÇ  RESIZE         ‚îÇ Alt+Shift + hjkl‚îÇ Super+Shift + hjkl                        ‚îÇ
‚îÇ  WORKSPACE      ‚îÇ Cmd + 1-9,0     ‚îÇ Alt + 1-9,0                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  WEZTERM        ‚îÇ Alt + hjkl      ‚îÇ Super + hjkl     ‚Üê pane nav               ‚îÇ
‚îÇ  SPLIT          ‚îÇ Alt + \ / -     ‚îÇ Super + \ / -                             ‚îÇ
‚îÇ  TABS           ‚îÇ Alt + t/w/1-9   ‚îÇ Super + t/w/1-9                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  CAPS + hjkl = Arrows  ‚îÇ  CAPS + wasd = Select  ‚îÇ  CAPS + fg = Word Jump      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Version History

- **v6.4** ‚Äî Scratchpads, smart launch, multi-monitor, unified colors
- **v6.3.2** ‚Äî Arch QoL (zoom, clipboard, spotlight)
- **v6.3** ‚Äî Full Hyprland support, keyd integration
- **v6.1** ‚Äî Bunches system, gather, sessions



################################################################################
FILE PATH: uke/gen/hyprland/hyprland.conf
################################################################################

# ==============================================================================
# HYPRLAND CONFIG - AUTO-GENERATED BY UKE v6.2
# ==============================================================================
# Unified Keyboard Environment for Linux
# 
# Modifier Hierarchy:
#   PRIMARY:    Alt         ‚Üí Window Manager (focus, move, workspaces)
#   SECONDARY:  Super       ‚Üí Terminal UI (WezTerm handles internally)
#   TERTIARY:   Super+Shift ‚Üí Window Resizing
#   QUATERNARY: Ctrl        ‚Üí Shell (never intercepted)
# ==============================================================================

# ==============================================================================
# MONITORS
# ==============================================================================
# Configure your monitors here. Example:
# monitor=DP-1, 2560x1440@144, 0x0, 1
# monitor=HDMI-A-1, 1920x1080@60, 2560x0, 1
monitor=,preferred,auto,1

# ==============================================================================
# GENERAL SETTINGS
# ==============================================================================
general {
    gaps_in = 2
    gaps_out = 4
    border_size = 2
    col.active_border = rgba(88c0d0ff)
    col.inactive_border = rgba(3b4252ff)
    layout = dwindle
    resize_on_border = true
}

# ==============================================================================
# DECORATION
# ==============================================================================
decoration {
    rounding = 4
    
    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
    }
    
    shadow {
        enabled = true
        range = 8
        render_power = 2
        color = rgba(1a1a1aee)
    }
}

# ==============================================================================
# ANIMATIONS
# ==============================================================================
animations {
    enabled = true
    
    bezier = easeOutQuint, 0.22, 1, 0.36, 1
    bezier = easeInOutQuint, 0.83, 0, 0.17, 1
    
    animation = windows, 1, 4, easeOutQuint, slide
    animation = windowsOut, 1, 4, easeOutQuint, slide
    animation = border, 1, 10, default
    animation = fade, 1, 5, default
    animation = workspaces, 1, 4, easeInOutQuint, slide
}

# ==============================================================================
# INPUT
# ==============================================================================
input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0
    
    touchpad {
        natural_scroll = true
        tap-to-click = true
    }
}

# ==============================================================================
# GESTURES
# ==============================================================================
gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
}

# ==============================================================================
# DWINDLE LAYOUT (BSP-like)
# ==============================================================================
dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
}

# ==============================================================================
# MASTER LAYOUT (alternative)
# ==============================================================================
master {
    new_status = master
}

# ==============================================================================
# MISC
# ==============================================================================
misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

# ==============================================================================
# ENVIRONMENT VARIABLES
# ==============================================================================
env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt6ct

# ==============================================================================
# AUTOSTART
# ==============================================================================
exec-once = waybar
exec-once = dunst
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = hyprpaper
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# ==============================================================================
# WINDOW FOCUS NAVIGATION (PRIMARY: Alt + hjkl)
# ==============================================================================
bind = ALT, h, movefocus, l
bind = ALT, j, movefocus, d
bind = ALT, k, movefocus, u
bind = ALT, l, movefocus, r

# ==============================================================================
# WINDOW MOVEMENT (PRIMARY + SHIFT: Alt+Shift + hjkl)
# ==============================================================================
bind = ALT SHIFT, h, movewindow, l
bind = ALT SHIFT, j, movewindow, d
bind = ALT SHIFT, k, movewindow, u
bind = ALT SHIFT, l, movewindow, r

# ==============================================================================
# WINDOW RESIZING (TERTIARY: Super+Shift + hjkl)
# ==============================================================================
bind = SUPER SHIFT, h, resizeactive, -50 0
bind = SUPER SHIFT, j, resizeactive, 0 50
bind = SUPER SHIFT, k, resizeactive, 0 -50
bind = SUPER SHIFT, l, resizeactive, 50 0

# Resize mode (alternative)
bind = ALT, r, submap, resize
submap = resize
binde = , h, resizeactive, -20 0
binde = , j, resizeactive, 0 20
binde = , k, resizeactive, 0 -20
binde = , l, resizeactive, 20 0
bind = , escape, submap, reset
bind = , return, submap, reset
submap = reset

# ==============================================================================
# LAUNCH TERMINAL (PRIMARY + Return)
# ==============================================================================
bind = ALT, return, exec, wezterm

# ==============================================================================
# WINDOW CONTROLS
# ==============================================================================
bind = ALT SHIFT, f, fullscreen, 0
bind = ALT SHIFT, space, togglefloating
bind = ALT SHIFT, backslash, togglesplit
bind = ALT SHIFT, r, layoutmsg, orientationcycle
bind = ALT, q, killactive

# Smart Focus (focus window under cursor)
bind = ALT, escape, focuscurrentorlast

# ==============================================================================
# LAYOUT CONTROLS
# ==============================================================================
bind = ALT CTRL, t, exec, hyprctl keyword general:layout "$(hyprctl getoption general:layout | grep -q dwindle && echo master || echo dwindle)"
bind = ALT SHIFT, b, exec, hyprctl dispatch layoutmsg swapwithmaster

# Cycle through windows
bind = ALT, Tab, cyclenext
bind = ALT SHIFT, Tab, cyclenext, prev

# ==============================================================================
# WORKSPACE NAVIGATION (PRIMARY + Number)
# ==============================================================================
bind = ALT, 1, workspace, 1
bind = ALT, 2, workspace, 2
bind = ALT, 3, workspace, 3
bind = ALT, 4, workspace, 4
bind = ALT, 5, workspace, 5
bind = ALT, 6, workspace, 6
bind = ALT, 7, workspace, 7
bind = ALT, 8, workspace, 8
bind = ALT, 9, workspace, 9
bind = ALT, 0, workspace, 10

# Workspace navigation with brackets
bind = ALT, bracketleft, workspace, e-1
bind = ALT, bracketright, workspace, e+1

# ==============================================================================
# MOVE WINDOW TO WORKSPACE (PRIMARY + SHIFT + Number)
# ==============================================================================
bind = ALT SHIFT, 1, movetoworkspace, 1
bind = ALT SHIFT, 2, movetoworkspace, 2
bind = ALT SHIFT, 3, movetoworkspace, 3
bind = ALT SHIFT, 4, movetoworkspace, 4
bind = ALT SHIFT, 5, movetoworkspace, 5
bind = ALT SHIFT, 6, movetoworkspace, 6
bind = ALT SHIFT, 7, movetoworkspace, 7
bind = ALT SHIFT, 8, movetoworkspace, 8
bind = ALT SHIFT, 9, movetoworkspace, 9
bind = ALT SHIFT, 0, movetoworkspace, 10

# Move without following
bind = ALT CTRL, 1, movetoworkspacesilent, 1
bind = ALT CTRL, 2, movetoworkspacesilent, 2
bind = ALT CTRL, 3, movetoworkspacesilent, 3
bind = ALT CTRL, 4, movetoworkspacesilent, 4
bind = ALT CTRL, 5, movetoworkspacesilent, 5
bind = ALT CTRL, 6, movetoworkspacesilent, 6
bind = ALT CTRL, 7, movetoworkspacesilent, 7
bind = ALT CTRL, 8, movetoworkspacesilent, 8
bind = ALT CTRL, 9, movetoworkspacesilent, 9
bind = ALT CTRL, 0, movetoworkspacesilent, 10

# ==============================================================================
# GATHER WINDOWS (Alt + `)
# ==============================================================================
bind = ALT, grave, exec, $HOME/.local/bin/uke-gather

# ==============================================================================
# QUICK APP LAUNCHERS (LAUNCHER: Alt+Super)
# ==============================================================================
bind = ALT SUPER, b, exec, brave
bind = ALT SUPER, o, exec, obsidian
bind = ALT SUPER, c, exec, code
bind = ALT SUPER, r, exec, raindrop
bind = ALT SUPER, m, exec, spotify
bind = ALT SUPER, t, exec, wezterm
bind = ALT SUPER, f, exec, thunar
bind = ALT SUPER, space, exec, wofi --show drun

# ==============================================================================
# BUNCHES (BUNCH: Alt+Ctrl)
# ==============================================================================
bind = ALT CTRL, F1, exec, $HOME/.local/bin/uke-bunch study
bind = ALT CTRL, F2, exec, $HOME/.local/bin/uke-bunch guitar
bind = ALT CTRL, F3, exec, $HOME/.local/bin/uke-bunch coding
bind = ALT CTRL, F4, exec, $HOME/.local/bin/uke-bunch email
bind = ALT CTRL, F5, exec, $HOME/.local/bin/uke-bunch reading

# ==============================================================================
# SCRATCHPADS
# ==============================================================================
# Terminal scratchpad (Alt + `)
bind = ALT SHIFT, grave, exec, $HOME/.local/bin/uke-scratchpad terminal

# Notes scratchpad (Alt+Super + n)
bind = ALT SUPER, n, exec, $HOME/.local/bin/uke-scratchpad notes

# ==============================================================================
# SESSION MANAGEMENT
# ==============================================================================
bind = ALT CTRL, s, exec, $HOME/.local/bin/uke-session quick-save
bind = ALT CTRL SHIFT, s, exec, $HOME/.local/bin/uke-session quick-restore

# ==============================================================================
# SCREENSHOT & CLIPBOARD
# ==============================================================================
bind = , Print, exec, grim -g "$(slurp)" - | wl-copy
bind = SHIFT, Print, exec, grim - | wl-copy
bind = ALT, v, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy

# ==============================================================================
# MOUSE BINDINGS
# ==============================================================================
bindm = ALT, mouse:272, movewindow
bindm = ALT, mouse:273, resizewindow

# ==============================================================================
# WINDOW RULES
# ==============================================================================
# Float utility windows
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(thunar)$,title:^(File Operation Progress)$
windowrulev2 = float, class:^(org.gnome.Calculator)$
windowrulev2 = float, class:^(file-roller)$
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = float, title:^(Preferences)$
windowrulev2 = float, title:^(Settings)$

# Sticky windows
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(org.gnome.Calculator)$

# Terminal opacity
windowrulev2 = opacity 0.92 0.88, class:^(wezterm)$
windowrulev2 = opacity 0.92 0.88, class:^(Alacritty)$
windowrulev2 = opacity 0.92 0.88, class:^(kitty)$

# ==============================================================================
# WORKSPACE ASSIGNMENTS
# ==============================================================================
# Space 1: Browser
windowrulev2 = workspace 1, class:^(brave-browser)$
windowrulev2 = workspace 1, class:^(Brave-browser)$
windowrulev2 = workspace 1, class:^(firefox)$
windowrulev2 = workspace 1, class:^(chromium)$

# Space 2: Notes
windowrulev2 = workspace 2, class:^(obsidian)$
windowrulev2 = workspace 2, class:^(Obsidian)$

# Space 3: Code
windowrulev2 = workspace 3, class:^(wezterm)$
windowrulev2 = workspace 3, class:^(WezTerm)$
windowrulev2 = workspace 3, class:^(code-oss)$
windowrulev2 = workspace 3, class:^(Code)$
windowrulev2 = workspace 3, class:^(VSCodium)$
windowrulev2 = workspace 3, class:^(jetbrains-.*)$
windowrulev2 = workspace 3, class:^(Alacritty)$
windowrulev2 = workspace 3, class:^(kitty)$

# Space 4: Catch-all (default)

# Space 5: Documents
windowrulev2 = workspace 5, class:^(evince)$
windowrulev2 = workspace 5, class:^(zathura)$
windowrulev2 = workspace 5, class:^(org.pwmt.zathura)$
windowrulev2 = workspace 5, class:^(okular)$
windowrulev2 = workspace 5, class:^(org.gnome.Evince)$

# Space 6: Raindrop
windowrulev2 = workspace 6, class:^(Raindrop.io)$
windowrulev2 = workspace 6, class:^(raindropio)$

# Space 7: Media
windowrulev2 = workspace 7, class:^(Spotify)$
windowrulev2 = workspace 7, class:^(spotify)$

# Space 8: Office
windowrulev2 = workspace 8, class:^(libreoffice-.*)$
windowrulev2 = workspace 8, class:^(soffice)$
windowrulev2 = workspace 8, class:^(org.libreoffice.*)$
windowrulev2 = workspace 8, class:^(ONLYOFFICE.*)$

# Space 9: Communication
windowrulev2 = workspace 9, class:^(Slack)$
windowrulev2 = workspace 9, class:^(slack)$
windowrulev2 = workspace 9, class:^(discord)$
windowrulev2 = workspace 9, class:^(Discord)$
windowrulev2 = workspace 9, class:^(thunderbird)$
windowrulev2 = workspace 9, class:^(Thunderbird)$
windowrulev2 = workspace 9, class:^(telegram-desktop)$
windowrulev2 = workspace 9, class:^(TelegramDesktop)$
windowrulev2 = workspace 9, class:^(whatsapp-.*)$
windowrulev2 = workspace 9, class:^(Signal)$

# Space 10: AI
windowrulev2 = workspace 10, class:^(claude)$
windowrulev2 = workspace 10, title:^(Claude)$

# ==============================================================================
# WORKSPACE NAMES (optional - for status bars)
# ==============================================================================
# workspace = 1, name:Browser
# workspace = 2, name:Notes
# workspace = 3, name:Code
# workspace = 4, name:Misc
# workspace = 5, name:Docs
# workspace = 6, name:Raindrop
# workspace = 7, name:Media
# workspace = 8, name:Office
# workspace = 9, name:Comms
# workspace = 10, name:AI



################################################################################
FILE PATH: uke/gen/skhd/skhdrc
################################################################################

# ==============================================================================
# SKHD CONFIG - AUTO-GENERATED BY UKE
# ==============================================================================

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Smart Focus & Utilities
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - escape : yabai -m window --focus mouse
alt - escape : /usr/bin/shortcuts run 'ToggleKeyboard'

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Focus Navigation (PRIMARY: Cmd + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - h : yabai -m window --focus west
cmd - j : yabai -m window --focus south
cmd - k : yabai -m window --focus north
cmd - l : yabai -m window --focus east

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Movement (PRIMARY + SHIFT: Cmd+Shift + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - h : yabai -m window --warp west
cmd + shift - j : yabai -m window --warp south
cmd + shift - k : yabai -m window --warp north
cmd + shift - l : yabai -m window --warp east

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Resizing (TERTIARY: Alt+Shift + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
alt + shift - h : yabai -m window --resize left:-50:0
alt + shift - j : yabai -m window --resize bottom:0:50
alt + shift - k : yabai -m window --resize top:0:-50
alt + shift - l : yabai -m window --resize right:50:0

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Launch Terminal
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - return : open -a WezTerm

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Controls
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - f : yabai -m window --toggle zoom-fullscreen
cmd + shift - space : yabai -m window --toggle float
cmd + shift - 0x2A : yabai -m window --toggle split

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Advanced Layout Controls
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - s : yabai -m window --insert stack
cmd + shift - r : yabai -m space --rotate 90
cmd + shift - x : yabai -m space --mirror x-axis
cmd + shift - y : yabai -m space --mirror y-axis
cmd + shift - b : yabai -m space --balance
cmd + ctrl - t : yabai -m space --layout $(yabai -m query --spaces --space | jq -r 'if .type == "bsp" then "stack" else "bsp" end')

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Workspace Navigation (PRIMARY + Number)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - 1 : yabai -m space --focus 1
cmd - 2 : yabai -m space --focus 2
cmd - 3 : yabai -m space --focus 3
cmd - 4 : yabai -m space --focus 4
cmd - 5 : yabai -m space --focus 5
cmd - 6 : yabai -m space --focus 6
cmd - 7 : yabai -m space --focus 7
cmd - 8 : yabai -m space --focus 8
cmd - 9 : yabai -m space --focus 9
cmd - 0x1D : yabai -m space --focus 10
cmd - 0x21 : yabai -m space --focus prev
cmd - 0x1E : yabai -m space --focus next

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Move Window to Workspace (PRIMARY + SHIFT + Number)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - 1 : yabai -m window --space 1 --focus
cmd + shift - 2 : yabai -m window --space 2 --focus
cmd + shift - 3 : yabai -m window --space 3 --focus
cmd + shift - 4 : yabai -m window --space 4 --focus
cmd + shift - 5 : yabai -m window --space 5 --focus
cmd + shift - 6 : yabai -m window --space 6 --focus
cmd + shift - 7 : yabai -m window --space 7 --focus
cmd + shift - 8 : yabai -m window --space 8 --focus
cmd + shift - 9 : yabai -m window --space 9 --focus
cmd + shift - 0x1D : yabai -m window --space 10 --focus

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Gather Windows (Cmd + `)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - 0x32 : $HOME/.local/bin/uke-gather

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Quick App Launchers (TERTIARY: Cmd+Alt)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + alt - b : open -a 'Brave Browser'
cmd + alt - o : open -a Obsidian
cmd + alt - c : open -a Code
cmd + alt - r : open -a Raindrop.io
cmd + alt - m : open -a Spotify
cmd + alt - t : open -a WezTerm

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Bunches (BUNCH: Cmd+Ctrl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - 1 : $HOME/.local/bin/uke-bunch study
cmd + ctrl - 2 : $HOME/.local/bin/uke-bunch guitar
cmd + ctrl - 3 : $HOME/.local/bin/uke-bunch coding
cmd + ctrl - 4 : $HOME/.local/bin/uke-bunch email
cmd + ctrl - 5 : $HOME/.local/bin/uke-bunch reading

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Scratchpads
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - 0x32 : $HOME/.local/bin/uke-scratchpad terminal
cmd + alt - n : $HOME/.local/bin/uke-scratchpad notes

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Session Management
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - s : $HOME/.local/bin/uke-session quick-save
cmd + ctrl + shift - s : $HOME/.local/bin/uke-session quick-restore



################################################################################
FILE PATH: uke/gen/yabai/yabairc
################################################################################

#!/usr/bin/env sh
# ==============================================================================
# YABAI CONFIG - AUTO-GENERATED BY UKE
# ==============================================================================

# Load Scripting Addition
sudo yabai --load-sa

# Layout Configuration
yabai -m config layout bsp
yabai -m config window_placement second_child
yabai -m config top_padding    4
yabai -m config bottom_padding 4
yabai -m config left_padding   4
yabai -m config right_padding  4
yabai -m config window_gap     4

# Mouse Configuration
yabai -m config mouse_follows_focus off
yabai -m config focus_follows_mouse off
yabai -m config mouse_modifier alt
yabai -m config mouse_action1 move
yabai -m config mouse_action2 resize

# Window Behavior
yabai -m config split_ratio 0.50
yabai -m config auto_balance off

# Window Borders
pkill -x borders 2>/dev/null || true
borders width=3 active_color=0xff88c0d0 inactive_color=0xff3b4252 &

# Opacity
yabai -m config window_opacity off
yabai -m rule --add app="^WezTerm$" opacity=0.92
yabai -m rule --add app="^Alacritty$" opacity=0.92
yabai -m rule --add app="^iTerm2$" opacity=0.92
yabai -m rule --add app="^Terminal$" opacity=0.95

# ==============================================================================
# WINDOW RULES
# ==============================================================================
yabai -m rule --add app="^System Settings$" manage=off
yabai -m rule --add app="^Calculator$" manage=off sticky=on
yabai -m rule --add app="^Finder$" manage=off
yabai -m rule --add app="^App Store$" manage=off
yabai -m rule --add app="^Karabiner-Elements$" manage=off
yabai -m rule --add app="^Karabiner-EventViewer$" manage=off
yabai -m rule --add app="^zoom.us$" manage=off sticky=on opacity=1.0
yabai -m rule --add app="^FaceTime$" manage=off sticky=on
yabai -m rule --add title="Picture in Picture" manage=off sticky=on layer=above
yabai -m rule --add app="^Code$" title="Settings" manage=off
yabai -m rule --add title="Preferences" manage=off
yabai -m rule --add title="Settings" manage=off

# ==============================================================================
# WORKSPACE ASSIGNMENTS
# ==============================================================================
yabai -m rule --add app="^Safari$" space=^1
yabai -m rule --add app="^Brave Browser$" space=^1
yabai -m rule --add app="^Obsidian$" space=^2
yabai -m rule --add app="^WezTerm$" space=^3
yabai -m rule --add app="^Code$" space=^3
yabai -m rule --add app="^Xcode$" space=^3
yabai -m rule --add app="^Preview$" space=^5
yabai -m rule --add app="^PDF Expert$" space=^5
yabai -m rule --add app="^Raindrop.io$" space=^6
yabai -m rule --add app="^Spotify$" space=^7
yabai -m rule --add app="^Microsoft Word$" space=^8
yabai -m rule --add app="^Microsoft Excel$" space=^8
yabai -m rule --add app="^Microsoft PowerPoint$" space=^8
yabai -m rule --add app="^Slack$" space=^9
yabai -m rule --add app="^Discord$" space=^9
yabai -m rule --add app="^Mail$" space=^9
yabai -m rule --add app="^Telegram$" space=^9
yabai -m rule --add app="^WhatsApp$" space=^9
yabai -m rule --add app="^Claude$" space=^10
yabai -m rule --add app="^Perplexity$" space=^10

# Catch-all
yabai -m rule --add app!="^(Safari|Brave Browser|Obsidian|WezTerm|Code|Xcode|Preview|PDF Expert|Raindrop.io|Spotify|Microsoft Word|Microsoft Excel|Microsoft PowerPoint|Slack|Discord|Mail|Telegram|WhatsApp|Claude|Perplexity)$" space=^4

echo "yabai: Configuration loaded"



################################################################################
FILE PATH: uke/README.md
################################################################################

# UKE - Unified Keyboard Environment v6.2

**One keyboard workflow for macOS and Linux.**

UKE provides identical keyboard-driven window management across platforms through a single configuration that generates platform-specific configs.

## Quick Start

```bash
# Clone/extract to ~/dotfiles/uke
cd ~/dotfiles/uke

# Install
./scripts/install.sh

# Verify
uke-doctor
```

## Features

- **Cross-platform**: Same muscle memory on macOS (yabai/skhd) and Linux (Hyprland)
- **Single source of truth**: Edit `config/registry.yaml`, generate platform configs
- **10 workspaces**: Organized by purpose (Browser, Notes, Code, etc.)
- **Bunches**: Environment presets (study, coding, guitar, email, reading)
- **Scratchpads**: Dropdown/toggle windows (terminal, notes) with hotkeys
- **Sessions**: Save and restore complete window layouts
- **Window Rules**: Fine-grained control over floating, sticky, opacity
- **Multi-Monitor**: Assign workspaces to specific displays
- **Gather**: Organize scattered windows to their designated workspaces
- **Conflict-free**: Layered modifier system prevents keybinding conflicts

## Modifier Hierarchy

| Layer | macOS | Linux | Scope |
|:------|:------|:------|:------|
| PRIMARY | Cmd | Alt | Window Manager |
| SECONDARY | Alt | Super | Terminal (WezTerm) |
| TERTIARY | Alt+Shift | Super+Shift | Resize |
| QUATERNARY | Ctrl | Ctrl | Shell |

## Key Commands

```bash
uke gen              # Generate platform configs
uke reload           # Restart window manager
uke-gather           # Organize windows (Cmd+`)
uke-bunch study      # Launch study environment (Cmd+Ctrl+1)
uke-scratchpad terminal # Toggle dropdown terminal (Cmd+`)
uke-session save work  # Save current layout
uke-session restore work # Restore layout
uke-doctor           # Health check
uke-logs yabai       # Live log viewer
```

## Essential Keybindings

| Action | macOS | Linux |
|:-------|:------|:------|
| Focus window | Cmd + hjkl | Alt + hjkl |
| Move window | Cmd+Shift + hjkl | Alt+Shift + hjkl |
| Switch workspace | Cmd + 1-9 | Alt + 1-9 |
| Launch terminal | Cmd + Return | Alt + Return |
| Scratchpad terminal | Cmd + \` | Alt + \` |
| Scratchpad notes | Cmd+Alt + n | Alt+Super + n |
| Quick save session | Cmd+Ctrl + s | Alt+Ctrl + s |
| WezTerm panes | Alt + hjkl | Super + hjkl |

See `docs/CHEATSHEET.md` for complete reference.

## Structure

```
uke/
‚îú‚îÄ‚îÄ config/registry.yaml    # Edit this
‚îú‚îÄ‚îÄ lib/                    # Core scripts
‚îú‚îÄ‚îÄ gen/                    # Generated (don't edit)
‚îú‚îÄ‚îÄ bin/                    # CLI commands
‚îú‚îÄ‚îÄ bunches/                # Environment presets
‚îú‚îÄ‚îÄ stow/                   # Dotfiles
‚îî‚îÄ‚îÄ docs/                   # Documentation
```

## Documentation

- [CHEATSHEET.md](docs/CHEATSHEET.md) - Quick reference
- [ARCHITECTURE.md](docs/ARCHITECTURE.md) - System design
- [TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) - Problem solving
- [MIGRATION.md](docs/MIGRATION.md) - Upgrade guide

## Requirements

**macOS:**
- yabai
- skhd
- borders (optional, for window borders)

**Linux:**
- Hyprland

**Both:**
- stow
- jq

## License

MIT



################################################################################
FILE PATH: uke/scripts/install.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Installer v6.3 - Arch Linux Ready
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
UKE_ROOT="${SCRIPT_DIR%/scripts}"

# Colors
RED=$'\e[31m' GREEN=$'\e[32m' YELLOW=$'\e[33m' BLUE=$'\e[34m'
BOLD=$'\e[1m' DIM=$'\e[2m' RESET=$'\e[0m'

ok()   { echo "${GREEN}‚úì${RESET} $*"; }
fail() { echo "${RED}‚úó${RESET} $*"; }
info() { echo "${BLUE}‚Üí${RESET} $*"; }
warn() { echo "${YELLOW}!${RESET} $*"; }

# ==============================================================================
# OS & Distro Detection
# ==============================================================================
case "$(uname -s)" in
    Darwin) OS="macos" ;;
    Linux)  OS="linux" ;;
    *)      echo "Unsupported OS"; exit 1 ;;
esac

# Detect Linux distribution
DISTRO=""
if [[ "$OS" == "linux" ]]; then
    if [[ -f /etc/arch-release ]]; then
        DISTRO="arch"
    elif [[ -f /etc/debian_version ]]; then
        DISTRO="debian"
    elif [[ -f /etc/fedora-release ]]; then
        DISTRO="fedora"
    else
        DISTRO="unknown"
    fi
fi

# ==============================================================================
# Package Manager Detection
# ==============================================================================
get_pkg_manager() {
    if [[ "$OS" == "macos" ]]; then
        echo "brew"
    elif command -v pacman &>/dev/null; then
        echo "pacman"
    elif command -v apt &>/dev/null; then
        echo "apt"
    elif command -v dnf &>/dev/null; then
        echo "dnf"
    else
        echo "unknown"
    fi
}

PKG_MANAGER=$(get_pkg_manager)

# ==============================================================================
# Dependency Check
# ==============================================================================
check_deps() {
    info "Checking dependencies..."
    local missing=()
    
    # Core dependencies (all platforms)
    for cmd in git stow jq; do
        command -v "$cmd" &>/dev/null || missing+=("$cmd")
    done
    
    if [[ "$OS" == "macos" ]]; then
        command -v yabai &>/dev/null || missing+=("yabai")
        command -v skhd &>/dev/null || missing+=("skhd")
        command -v yq &>/dev/null || missing+=("yq")
    else
        command -v hyprctl &>/dev/null || missing+=("hyprland")
        command -v keyd &>/dev/null || missing+=("keyd")
    fi
    
    if [[ ${#missing[@]} -gt 0 ]]; then
        fail "Missing dependencies: ${missing[*]}"
        echo ""
        echo "Install with:"
        case "$PKG_MANAGER" in
            brew)
                echo "  brew install ${missing[*]}"
                ;;
            pacman)
                # Map package names for Arch
                local arch_pkgs=""
                for pkg in "${missing[@]}"; do
                    case "$pkg" in
                        hyprland) arch_pkgs+="hyprland " ;;
                        keyd)     arch_pkgs+="keyd " ;;
                        *)        arch_pkgs+="$pkg " ;;
                    esac
                done
                echo "  sudo pacman -S $arch_pkgs"
                echo ""
                echo "  # For AUR packages (if needed):"
                echo "  yay -S ${missing[*]}"
                ;;
            apt)
                echo "  sudo apt install ${missing[*]}"
                ;;
            dnf)
                echo "  sudo dnf install ${missing[*]}"
                ;;
            *)
                echo "  Please install: ${missing[*]}"
                ;;
        esac
        exit 1
    fi
    
    ok "All dependencies installed"
}

# ==============================================================================
# Generate Configs
# ==============================================================================
generate_configs() {
    info "Generating configs..."
    bash "$UKE_ROOT/lib/gen.sh" all
}

# ==============================================================================
# Create Directories
# ==============================================================================
create_dirs() {
    info "Creating directories..."
    mkdir -p ~/.local/bin
    mkdir -p ~/.config/skhd
    mkdir -p ~/.config/yabai
    mkdir -p ~/.config/hypr
    mkdir -p ~/.config/keyd
    mkdir -p ~/.local/state/uke
    ok "Directories created"
}

# ==============================================================================
# Link Binaries
# ==============================================================================
link_binaries() {
    info "Linking binaries to ~/.local/bin..."
    
    for bin in "$UKE_ROOT/bin"/*; do
        [[ -f "$bin" ]] || continue
        local name=$(basename "$bin")
        chmod +x "$bin"
        ln -sf "$bin" "$HOME/.local/bin/$name"
        ok "Linked: $name"
    done
}

# ==============================================================================
# Link Generated Configs
# ==============================================================================
link_configs() {
    info "Linking generated configs..."
    
    if [[ "$OS" == "macos" ]]; then
        ln -sf "$UKE_ROOT/gen/skhd/skhdrc" "$HOME/.config/skhd/skhdrc"
        ok "Linked: skhdrc"
        
        ln -sf "$UKE_ROOT/gen/yabai/yabairc" "$HOME/.config/yabai/yabairc"
        ok "Linked: yabairc"
    else
        # Hyprland config
        ln -sf "$UKE_ROOT/gen/hyprland/hyprland.conf" "$HOME/.config/hypr/hyprland.conf"
        ok "Linked: hyprland.conf"
    fi
}

# ==============================================================================
# Stow Dotfiles
# ==============================================================================
stow_dotfiles() {
    info "Stowing dotfiles..."
    cd "$UKE_ROOT/stow"
    
    # Common packages
    local packages=(wezterm tmux zsh nvim)
    
    # Platform-specific packages
    if [[ "$OS" == "macos" ]]; then
        packages+=(karabiner)
    fi
    
    for pkg in "${packages[@]}"; do
        if [[ -d "$pkg" ]]; then
            stow -t "$HOME" -R "$pkg" 2>/dev/null && ok "Stowed: $pkg" || warn "Skipped: $pkg"
        fi
    done
}

# ==============================================================================
# Setup keyd (Linux only - requires sudo)
# ==============================================================================
setup_keyd() {
    if [[ "$OS" != "linux" ]]; then
        return 0
    fi
    
    if ! command -v keyd &>/dev/null; then
        warn "keyd not installed, skipping keyd setup"
        return 0
    fi
    
    info "Setting up keyd..."
    
    local keyd_config="$UKE_ROOT/stow/keyd/.config/keyd/default.conf"
    
    if [[ ! -f "$keyd_config" ]]; then
        warn "keyd config not found at $keyd_config"
        return 1
    fi
    
    # Check if we have sudo access
    if ! sudo -n true 2>/dev/null; then
        warn "keyd requires sudo to link to /etc/keyd/"
        echo ""
        echo "${YELLOW}To complete keyd setup, run:${RESET}"
        echo "  sudo mkdir -p /etc/keyd"
        echo "  sudo ln -sf $keyd_config /etc/keyd/default.conf"
        echo "  sudo systemctl enable --now keyd"
        echo ""
        return 0
    fi
    
    # We have sudo, do the setup
    sudo mkdir -p /etc/keyd
    sudo ln -sf "$keyd_config" /etc/keyd/default.conf
    ok "Linked keyd config to /etc/keyd/"
    
    # Enable and start keyd service
    if systemctl is-enabled keyd &>/dev/null; then
        sudo systemctl restart keyd
        ok "keyd service restarted"
    else
        sudo systemctl enable --now keyd
        ok "keyd service enabled and started"
    fi
}

# ==============================================================================
# Make Bunches Executable
# ==============================================================================
setup_bunches() {
    info "Setting up bunches..."
    chmod +x "$UKE_ROOT/bunches"/*.sh 2>/dev/null || true
    chmod +x "$UKE_ROOT/templates"/*.sh 2>/dev/null || true
    ok "Bunches ready"
}

# ==============================================================================
# Start Services
# ==============================================================================
start_services() {
    info "Starting services..."
    
    if [[ "$OS" == "macos" ]]; then
        yabai --restart-service 2>/dev/null && ok "yabai restarted" || warn "yabai restart failed"
        skhd --restart-service 2>/dev/null && ok "skhd restarted" || warn "skhd restart failed"
    else
        # Hyprland reloads automatically when config changes
        if [[ -n "${HYPRLAND_INSTANCE_SIGNATURE:-}" ]]; then
            hyprctl reload 2>/dev/null && ok "hyprland reloaded" || warn "hyprland reload failed"
        else
            warn "Hyprland not running - config will load on next start"
        fi
    fi
}

# ==============================================================================
# Print Arch-specific Help
# ==============================================================================
print_arch_help() {
    if [[ "$OS" != "linux" ]] || [[ "$DISTRO" != "arch" ]]; then
        return 0
    fi
    
    echo ""
    echo "${BOLD}Arch Linux Notes:${RESET}"
    echo ""
    echo "  ${DIM}# Recommended packages:${RESET}"
    echo "  sudo pacman -S hyprland keyd waybar dunst wofi grim slurp wl-clipboard cliphist"
    echo "  sudo pacman -S wezterm neovim stow jq ripgrep fd"
    echo ""
    echo "  ${DIM}# Optional AUR packages:${RESET}"
    echo "  yay -S brave-bin obsidian-bin spotify"
    echo ""
    echo "  ${DIM}# Enable keyd service:${RESET}"
    echo "  sudo systemctl enable --now keyd"
    echo ""
}

# ==============================================================================
# Main
# ==============================================================================
main() {
    echo ""
    echo "${BOLD}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${RESET}"
    echo "${BOLD}‚ïë     UKE v6.3 Installer               ‚ïë${RESET}"
    echo "${BOLD}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${RESET}"
    echo ""
    echo "Platform: $OS"
    [[ -n "$DISTRO" ]] && echo "Distro:   $DISTRO"
    echo "UKE Root: $UKE_ROOT"
    echo ""
    
    case "${1:-full}" in
        --check)
            check_deps
            ;;
        --stow)
            stow_dotfiles
            ;;
        --link)
            link_binaries
            link_configs
            ;;
        --gen)
            generate_configs
            ;;
        --keyd)
            setup_keyd
            ;;
        full|*)
            check_deps
            create_dirs
            generate_configs
            link_binaries
            link_configs
            stow_dotfiles
            setup_bunches
            setup_keyd
            start_services
            
            echo ""
            echo "${GREEN}‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ${RESET}"
            echo "${GREEN}‚úì Installation complete!${RESET}"
            echo ""
            echo "Next steps:"
            echo "  1. Restart your terminal (or run: source ~/.zshrc)"
            echo "  2. Test with: uke status"
            echo "  3. See: docs/CHEATSHEET.md for keybindings"
            
            print_arch_help
            ;;
    esac
}

main "$@"



################################################################################
FILE PATH: uke/scripts/uke-detect.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Detect - Find all UKE installations and artifacts
# ==============================================================================

# Resolve UKE_ROOT dynamically
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
UKE_ROOT="${SCRIPT_DIR%/scripts}"

echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo "‚ïë     UKE Detection Report             ‚ïë"
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"

echo -e "\n[1] Binary Symlinks (~/.local/bin)"
for bin in uke uke-gather uke-bunch uke-doctor uke-backup uke-debug uke-logs uke-scratch uke-session; do
    if [[ -L "$HOME/.local/bin/$bin" ]]; then
        target=$(readlink "$HOME/.local/bin/$bin")
        echo "  ‚úì $bin ‚Üí $target"
    elif [[ -f "$HOME/.local/bin/$bin" ]]; then
        echo "  ‚ö† $bin (file, not symlink)"
    else
        echo "  ‚úó $bin (missing)"
    fi
done

echo -e "\n[2] Config Symlinks (~/.config)"
for cfg in "skhd/skhdrc" "yabai/yabairc" "hypr/hyprland.conf"; do
    path="$HOME/.config/$cfg"
    if [[ -L "$path" ]]; then
        echo "  ‚úì $cfg ‚Üí $(readlink "$path")"
    elif [[ -f "$path" ]]; then
        echo "  ‚ö† $cfg (file, not symlink)"
    else
        echo "  - $cfg (not present)"
    fi
done

echo -e "\n[3] Stowed Dotfiles"
for dot in .wezterm.lua .tmux.conf .zshrc; do
    path="$HOME/$dot"
    if [[ -L "$path" ]]; then
        echo "  ‚úì $dot ‚Üí $(readlink "$path")"
    elif [[ -f "$path" ]]; then
        echo "  ‚ö† $dot (file, not symlink - may not be UKE)"
    else
        echo "  - $dot (not present)"
    fi
done

if [[ -L "$HOME/.config/nvim" ]]; then
    echo "  ‚úì .config/nvim ‚Üí $(readlink "$HOME/.config/nvim")"
elif [[ -d "$HOME/.config/nvim" ]]; then
    echo "  ‚ö† .config/nvim (directory, check if stowed)"
fi

echo -e "\n[4] UKE Directories"
for dir in "$UKE_ROOT" "$HOME/.local/state/uke" "$HOME/.uke-backups"; do
    if [[ -d "$dir" ]]; then
        count=$(find "$dir" -type f 2>/dev/null | wc -l)
        echo "  ‚úì $dir ($count files)"
    else
        echo "  - $dir (not present)"
    fi
done

echo -e "\n[5] Running Services"
pgrep -x yabai &>/dev/null && echo "  ‚úì yabai running" || echo "  - yabai not running"
pgrep -x skhd &>/dev/null && echo "  ‚úì skhd running" || echo "  - skhd not running"
[[ -n "${HYPRLAND_INSTANCE_SIGNATURE:-}" ]] && echo "  ‚úì hyprland running"

echo -e "\n[6] Monitors"
if command -v yabai &>/dev/null && pgrep -x yabai &>/dev/null; then
    yabai -m query --displays 2>/dev/null | jq -r '.[] | "  ‚úì Display \(.index): \(.frame.w)x\(.frame.h) at (\(.frame.x),\(.frame.y))"' 2>/dev/null || echo "  - Could not query displays"
elif [[ -n "${HYPRLAND_INSTANCE_SIGNATURE:-}" ]]; then
    hyprctl monitors -j 2>/dev/null | jq -r '.[] | "  ‚úì \(.name): \(.width)x\(.height)"' 2>/dev/null || echo "  - Could not query monitors"
else
    echo "  - Window manager not running"
fi

echo -e "\n[7] Log Files"
[[ -f "$HOME/.local/state/uke/uke.log" ]] && echo "  ‚úì UKE log exists" || echo "  - No UKE log"
ls /tmp/yabai_*.err.log &>/dev/null && echo "  ‚úì Yabai logs exist" || echo "  - No yabai logs"
ls /tmp/skhd_*.err.log &>/dev/null && echo "  ‚úì skhd logs exist" || echo "  - No skhd logs"

echo ""



################################################################################
FILE PATH: uke/scripts/uke-wipe.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Wipe - Complete uninstallation
# ==============================================================================
set -euo pipefail

# Resolve UKE_ROOT dynamically
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
UKE_ROOT="${SCRIPT_DIR%/scripts}"
UKE_STOW="$UKE_ROOT/stow"

RED=$'\e[31m' GREEN=$'\e[32m' YELLOW=$'\e[33m' RESET=$'\e[0m'

echo "${RED}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${RESET}"
echo "${RED}‚ïë     UKE WIPE - Complete Removal      ‚ïë${RESET}"
echo "${RED}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${RESET}"
echo ""
echo "This will remove:"
echo "  ‚Ä¢ Binary symlinks in ~/.local/bin/uke*"
echo "  ‚Ä¢ Config symlinks (skhd, yabai, hyprland)"
echo "  ‚Ä¢ Stowed dotfiles (wezterm, tmux, zsh, nvim)"
echo "  ‚Ä¢ UKE state and backups"
echo ""
echo "${YELLOW}Source at $UKE_ROOT will NOT be deleted.${RESET}"
echo ""
read -p "Type 'wipe' to confirm: " confirm
[[ "$confirm" != "wipe" ]] && { echo "Aborted."; exit 1; }

echo ""

# 1. Remove binary symlinks
echo "Removing binary symlinks..."
rm -f ~/.local/bin/uke ~/.local/bin/uke-*
echo "  ‚úì Binaries removed"

# 2. Remove config symlinks
echo "Removing config symlinks..."
rm -f ~/.config/skhd/skhdrc
rm -f ~/.config/yabai/yabairc
rm -f ~/.config/hypr/hyprland.conf
echo "  ‚úì Config symlinks removed"

# 3. Unstow dotfiles
echo "Unstowing dotfiles..."
if command -v stow &>/dev/null && [[ -d "$UKE_STOW" ]]; then
    cd "$UKE_STOW"
    for pkg in wezterm tmux zsh nvim karabiner; do
        [[ -d "$pkg" ]] && stow -t "$HOME" -D "$pkg" 2>/dev/null && echo "  ‚úì Unstowed: $pkg" || true
    done
else
    # Manual removal if stow not available
    rm -f ~/.wezterm.lua ~/.tmux.conf ~/.zshrc
    rm -rf ~/.config/nvim
    echo "  ‚úì Dotfiles removed (manual)"
fi

# 4. Remove state and backups
echo "Removing state and backups..."
rm -rf ~/.local/state/uke
rm -rf ~/.uke-backups
echo "  ‚úì State removed"

# 5. Stop services (optional)
echo "Stopping services..."
if command -v yabai &>/dev/null; then
    yabai --stop-service 2>/dev/null || true
    skhd --stop-service 2>/dev/null || true
    echo "  ‚úì Services stopped"
fi

echo ""
echo "${GREEN}‚úì UKE removed successfully.${RESET}"
echo ""
echo "To completely remove source:"
echo "  rm -rf $UKE_ROOT"
echo ""
echo "To reinstall later:"
echo "  cd $UKE_ROOT && ./scripts/install.sh"



################################################################################
FILE PATH: uke/scripts/keyd-setup.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE keyd Setup Script
# ==============================================================================
# keyd requires system-level configuration in /etc/keyd/
# This script handles the sudo operations needed for keyd setup.
#
# Usage:
#   ./keyd-setup.sh           # Install and enable keyd config
#   ./keyd-setup.sh --status  # Check keyd status
#   ./keyd-setup.sh --remove  # Remove UKE keyd config
#   ./keyd-setup.sh --reload  # Reload keyd service
# ==============================================================================
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
UKE_ROOT="${SCRIPT_DIR%/scripts}"
KEYD_SOURCE="$UKE_ROOT/stow/keyd/.config/keyd/default.conf"
KEYD_TARGET="/etc/keyd/default.conf"

# Colors
RED=$'\e[31m' GREEN=$'\e[32m' YELLOW=$'\e[33m' BLUE=$'\e[34m'
BOLD=$'\e[1m' RESET=$'\e[0m'

ok()   { echo "${GREEN}‚úì${RESET} $*"; }
fail() { echo "${RED}‚úó${RESET} $*"; }
info() { echo "${BLUE}‚Üí${RESET} $*"; }
warn() { echo "${YELLOW}!${RESET} $*"; }

# ==============================================================================
# Check Prerequisites
# ==============================================================================
check_prereqs() {
    if [[ "$(uname -s)" != "Linux" ]]; then
        fail "keyd is only available on Linux"
        exit 1
    fi
    
    if ! command -v keyd &>/dev/null; then
        fail "keyd not installed"
        echo ""
        echo "Install with:"
        if command -v pacman &>/dev/null; then
            echo "  sudo pacman -S keyd"
        elif command -v apt &>/dev/null; then
            echo "  # Build from source: https://github.com/rvaiya/keyd"
        fi
        exit 1
    fi
    
    if [[ ! -f "$KEYD_SOURCE" ]]; then
        fail "Source config not found: $KEYD_SOURCE"
        exit 1
    fi
}

# ==============================================================================
# Install keyd Config
# ==============================================================================
install_keyd() {
    check_prereqs
    
    info "Installing keyd configuration..."
    
    # Create /etc/keyd if it doesn't exist
    if [[ ! -d /etc/keyd ]]; then
        sudo mkdir -p /etc/keyd
        ok "Created /etc/keyd/"
    fi
    
    # Symlink the config
    sudo ln -sf "$KEYD_SOURCE" "$KEYD_TARGET"
    ok "Linked config to $KEYD_TARGET"
    
    # Enable and start/restart keyd service
    if systemctl is-active keyd &>/dev/null; then
        sudo systemctl restart keyd
        ok "keyd service restarted"
    else
        sudo systemctl enable --now keyd
        ok "keyd service enabled and started"
    fi
    
    echo ""
    echo "${GREEN}keyd setup complete!${RESET}"
    echo ""
    echo "Your Caps Lock key now works as:"
    echo "  ‚Ä¢ Tap: Escape"
    echo "  ‚Ä¢ Hold + hjkl: Arrow keys"
    echo "  ‚Ä¢ Hold + yuio: Home/PageUp/PageDown/End"
    echo "  ‚Ä¢ Hold + wasd: Selection (Shift+Arrow)"
    echo "  ‚Ä¢ Hold + qe:   Word selection (Ctrl+Shift+Arrow)"
    echo ""
}

# ==============================================================================
# Show Status
# ==============================================================================
show_status() {
    echo "${BOLD}keyd Status:${RESET}"
    echo ""
    
    # Check if keyd is installed
    if command -v keyd &>/dev/null; then
        ok "keyd installed: $(keyd --version 2>/dev/null || echo 'version unknown')"
    else
        fail "keyd not installed"
        return 1
    fi
    
    # Check service status
    if systemctl is-active keyd &>/dev/null; then
        ok "keyd service: active"
    else
        fail "keyd service: inactive"
    fi
    
    # Check config symlink
    if [[ -L "$KEYD_TARGET" ]]; then
        local target=$(readlink "$KEYD_TARGET")
        ok "Config symlink: $KEYD_TARGET ‚Üí $target"
    elif [[ -f "$KEYD_TARGET" ]]; then
        warn "Config exists but not a symlink: $KEYD_TARGET"
    else
        fail "Config not found: $KEYD_TARGET"
    fi
    
    echo ""
    
    # Show current config summary
    if [[ -f "$KEYD_TARGET" ]]; then
        info "Current config summary:"
        grep -E "^\[|^[a-z]+ = " "$KEYD_TARGET" 2>/dev/null | head -20 || true
    fi
}

# ==============================================================================
# Remove keyd Config
# ==============================================================================
remove_keyd() {
    info "Removing UKE keyd configuration..."
    
    if [[ -L "$KEYD_TARGET" ]]; then
        sudo rm "$KEYD_TARGET"
        ok "Removed symlink: $KEYD_TARGET"
    elif [[ -f "$KEYD_TARGET" ]]; then
        warn "Config is not a symlink, not removing: $KEYD_TARGET"
    else
        warn "Config not found: $KEYD_TARGET"
    fi
    
    # Restart keyd to use default config (if any)
    if systemctl is-active keyd &>/dev/null; then
        sudo systemctl restart keyd
        ok "keyd service restarted"
    fi
    
    echo ""
    echo "keyd config removed. Your Caps Lock should return to normal after restart."
}

# ==============================================================================
# Reload keyd
# ==============================================================================
reload_keyd() {
    info "Reloading keyd service..."
    
    if ! systemctl is-active keyd &>/dev/null; then
        sudo systemctl start keyd
        ok "keyd service started"
    else
        sudo keyd reload
        ok "keyd reloaded"
    fi
}

# ==============================================================================
# Main
# ==============================================================================
case "${1:-install}" in
    install|--install)
        install_keyd
        ;;
    status|--status)
        show_status
        ;;
    remove|--remove|uninstall|--uninstall)
        remove_keyd
        ;;
    reload|--reload)
        reload_keyd
        ;;
    -h|--help|help)
        echo "UKE keyd Setup Script"
        echo ""
        echo "Usage:"
        echo "  $0 [command]"
        echo ""
        echo "Commands:"
        echo "  install   Install and enable keyd config (default)"
        echo "  status    Show keyd status"
        echo "  remove    Remove UKE keyd config"
        echo "  reload    Reload keyd service"
        echo "  help      Show this help"
        ;;
    *)
        fail "Unknown command: $1"
        echo "Run '$0 --help' for usage"
        exit 1
        ;;
esac



################################################################################
FILE PATH: uke/scripts/arch-packages.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Arch Linux Package Installer
# ==============================================================================
# Run this after fixing sudo permissions to install all required packages
# ==============================================================================
set -euo pipefail

RED=$'\e[31m' GREEN=$'\e[32m' YELLOW=$'\e[33m' BLUE=$'\e[34m'
BOLD=$'\e[1m' RESET=$'\e[0m'

ok()   { echo "${GREEN}‚úì${RESET} $*"; }
info() { echo "${BLUE}‚Üí${RESET} $*"; }
warn() { echo "${YELLOW}!${RESET} $*"; }

echo ""
echo "${BOLD}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${RESET}"
echo "${BOLD}‚ïë  UKE Arch Linux Package Installer    ‚ïë${RESET}"
echo "${BOLD}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${RESET}"
echo ""

# Check if we can sudo
if ! sudo -n true 2>/dev/null && ! sudo true; then
    echo "${RED}Error: Cannot run sudo. Fix permissions first:${RESET}"
    echo ""
    echo "  1. Switch to TTY: Ctrl + Alt + F3"
    echo "  2. Login as root"
    echo "  3. Run: usermod -aG wheel \$USER"
    echo "  4. Run: EDITOR=nano visudo"
    echo "     ‚Üí Uncomment: %wheel ALL=(ALL:ALL) ALL"
    echo "  5. Reboot"
    exit 1
fi

info "Updating system..."
sudo pacman -Syu --noconfirm

info "Installing core packages..."

# Essential: Terminal, Launcher, File Manager
sudo pacman -S --noconfirm --needed \
    wezterm \
    wofi \
    thunar

# System tray & Settings
sudo pacman -S --noconfirm --needed \
    waybar \
    dunst \
    pavucontrol \
    network-manager-applet \
    lxappearance

# Clipboard & Screenshots
sudo pacman -S --noconfirm --needed \
    cliphist \
    wl-clipboard \
    grim \
    slurp

# UKE dependencies
sudo pacman -S --noconfirm --needed \
    stow \
    jq \
    git

# Polkit (for privileged operations)
sudo pacman -S --noconfirm --needed \
    polkit-kde-agent

# Optional but recommended
sudo pacman -S --noconfirm --needed \
    neovim \
    ripgrep \
    fd \
    eza \
    bat \
    htop

# keyd (Caps Lock remapping)
if ! pacman -Qi keyd &>/dev/null; then
    info "Installing keyd..."
    sudo pacman -S --noconfirm keyd
fi

# Enable keyd service
info "Enabling keyd service..."
sudo systemctl enable --now keyd || warn "keyd service may need manual setup"

echo ""
ok "All packages installed!"
echo ""
echo "Next steps:"
echo "  1. Run: cd ~/dotfiles/uke && ./bin/uke gen"
echo "  2. Run: hyprctl reload"
echo "  3. Test Spotlight: Alt + Super + Space"
echo "  4. Test Zoom: Alt + Super + ="
echo ""
echo "System tools:"
echo "  ‚Ä¢ Audio:      pavucontrol"
echo "  ‚Ä¢ Appearance: lxappearance (or Alt+Super+s)"
echo "  ‚Ä¢ Network:    nm-connection-editor"
echo "  ‚Ä¢ Files:      thunar (or Alt+Super+f)"
echo ""



################################################################################
FILE PATH: uke/lib/gen.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Config Generator v6.4.0 - Complete Feature Set
# ==============================================================================
# Generates platform-specific configs from a single source of truth
# Features: Scratchpads, Multi-monitor, Unified colors, Window rules
# ==============================================================================
set -euo pipefail
source "$(dirname "$0")/../lib/core.sh"

# ==============================================================================
# UNIFIED COLORSCHEME (Nord)
# ==============================================================================
declare -A COLORS=(
    [bg]="#2e3440"
    [bg_light]="#3b4252"
    [fg]="#eceff4"
    [accent]="#88c0d0"
    [accent_dim]="#5e81ac"
    [red]="#bf616a"
    [green]="#a3be8c"
    [yellow]="#ebcb8b"
    [border_active]="88c0d0"    # Without # for yabai/hyprland
    [border_inactive]="3b4252"
)

# ==============================================================================
# SKHD Generator (macOS)
# ==============================================================================
gen_skhd() {
    local out="$UKE_GEN/skhd/skhdrc"
    mkdir -p "$(dirname "$out")"
    
    log_info "Generating skhd config..."
    
    cat > "$out" << 'EOF'
# ==============================================================================
# SKHD CONFIG - AUTO-GENERATED BY UKE v6.4
# ==============================================================================

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Smart Focus & Focus History
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - escape : yabai -m window --focus mouse
cmd + shift - 0x32 : yabai -m window --focus recent  # Cmd+Shift+` = previous window

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Focus Navigation (PRIMARY: Cmd + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - h : yabai -m window --focus west
cmd - j : yabai -m window --focus south
cmd - k : yabai -m window --focus north
cmd - l : yabai -m window --focus east

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Movement (PRIMARY + SHIFT: Cmd+Shift + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - h : yabai -m window --warp west
cmd + shift - j : yabai -m window --warp south
cmd + shift - k : yabai -m window --warp north
cmd + shift - l : yabai -m window --warp east

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Resizing (TERTIARY: Alt+Shift + hjkl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
alt + shift - h : yabai -m window --resize left:-50:0
alt + shift - j : yabai -m window --resize bottom:0:50
alt + shift - k : yabai -m window --resize top:0:-50
alt + shift - l : yabai -m window --resize right:50:0

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Launch Terminal
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - return : open -a WezTerm

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Window Controls
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - f : yabai -m window --toggle zoom-fullscreen
cmd + shift - space : yabai -m window --toggle float
cmd + shift - 0x2A : yabai -m window --toggle split

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Advanced Layout Controls
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - s : yabai -m window --insert stack
cmd + shift - r : yabai -m space --rotate 90
cmd + shift - x : yabai -m space --mirror x-axis
cmd + shift - y : yabai -m space --mirror y-axis
cmd + shift - b : yabai -m space --balance
cmd + ctrl - t : yabai -m space --layout $(yabai -m query --spaces --space | jq -r 'if .type == "bsp" then "stack" else "bsp" end')

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Workspace Navigation (PRIMARY + Number)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - 1 : yabai -m space --focus 1
cmd - 2 : yabai -m space --focus 2
cmd - 3 : yabai -m space --focus 3
cmd - 4 : yabai -m space --focus 4
cmd - 5 : yabai -m space --focus 5
cmd - 6 : yabai -m space --focus 6
cmd - 7 : yabai -m space --focus 7
cmd - 8 : yabai -m space --focus 8
cmd - 9 : yabai -m space --focus 9
cmd - 0x1D : yabai -m space --focus 10
cmd - 0x21 : yabai -m space --focus prev
cmd - 0x1E : yabai -m space --focus next

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Move Window to Workspace (PRIMARY + SHIFT + Number)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + shift - 1 : yabai -m window --space 1 --focus
cmd + shift - 2 : yabai -m window --space 2 --focus
cmd + shift - 3 : yabai -m window --space 3 --focus
cmd + shift - 4 : yabai -m window --space 4 --focus
cmd + shift - 5 : yabai -m window --space 5 --focus
cmd + shift - 6 : yabai -m window --space 6 --focus
cmd + shift - 7 : yabai -m window --space 7 --focus
cmd + shift - 8 : yabai -m window --space 8 --focus
cmd + shift - 9 : yabai -m window --space 9 --focus
cmd + shift - 0x1D : yabai -m window --space 10 --focus

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Gather Windows (Cmd + `)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd - 0x32 : $HOME/.local/bin/uke-gather

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Scratchpads
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + alt - 0x32 : $HOME/.local/bin/uke-scratchpad terminal
cmd + alt - n : $HOME/.local/bin/uke-scratchpad notes
cmd + alt - m : $HOME/.local/bin/uke-scratchpad music

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Smart App Launchers (LAUNCHER: Cmd+Alt)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + alt - b : $HOME/.local/bin/uke-launch brave
cmd + alt - o : $HOME/.local/bin/uke-launch obsidian
cmd + alt - c : $HOME/.local/bin/uke-launch code
cmd + alt - r : $HOME/.local/bin/uke-launch raindrop
cmd + alt - t : $HOME/.local/bin/uke-launch wezterm

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Bunches (BUNCH: Cmd+Ctrl)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - 1 : $HOME/.local/bin/uke-bunch study
cmd + ctrl - 2 : $HOME/.local/bin/uke-bunch guitar
cmd + ctrl - 3 : $HOME/.local/bin/uke-bunch coding
cmd + ctrl - 4 : $HOME/.local/bin/uke-bunch email
cmd + ctrl - 5 : $HOME/.local/bin/uke-bunch reading

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Session Management
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cmd + ctrl - s : $HOME/.local/bin/uke-session save quick
cmd + ctrl + shift - s : $HOME/.local/bin/uke-session restore quick
EOF

    chmod +x "$out"
    ok "Generated: $out"
}

# ==============================================================================
# Yabai Generator (macOS)
# ==============================================================================
gen_yabai() {
    local out="$UKE_GEN/yabai/yabairc"
    mkdir -p "$(dirname "$out")"
    
    log_info "Generating yabai config..."
    
    cat > "$out" << EOF
#!/usr/bin/env sh
# ==============================================================================
# YABAI CONFIG - AUTO-GENERATED BY UKE v6.4
# ==============================================================================

# Load Scripting Addition
sudo yabai --load-sa

# Layout Configuration
yabai -m config layout bsp
yabai -m config window_placement second_child
yabai -m config top_padding    4
yabai -m config bottom_padding 4
yabai -m config left_padding   4
yabai -m config right_padding  4
yabai -m config window_gap     4

# Mouse Configuration
yabai -m config mouse_follows_focus off
yabai -m config focus_follows_mouse off
yabai -m config mouse_modifier alt
yabai -m config mouse_action1 move
yabai -m config mouse_action2 resize

# Window Behavior
yabai -m config split_ratio 0.50
yabai -m config auto_balance off

# Window Borders (Nord colorscheme)
pkill -x borders 2>/dev/null || true
borders width=3 active_color=0xff${COLORS[border_active]} inactive_color=0xff${COLORS[border_inactive]} &

# Opacity
yabai -m config window_opacity off
yabai -m rule --add app="^WezTerm\$" opacity=0.92
yabai -m rule --add app="^Alacritty\$" opacity=0.92

# ==============================================================================
# WINDOW RULES
# ==============================================================================
# Float system windows
yabai -m rule --add app="^System Settings\$" manage=off
yabai -m rule --add app="^Calculator\$" manage=off sticky=on
yabai -m rule --add app="^Finder\$" manage=off
yabai -m rule --add app="^App Store\$" manage=off
yabai -m rule --add app="^Karabiner-Elements\$" manage=off
yabai -m rule --add app="^Karabiner-EventViewer\$" manage=off

# Sticky windows (follow across workspaces)
yabai -m rule --add app="^zoom.us\$" manage=off sticky=on opacity=1.0
yabai -m rule --add app="^FaceTime\$" manage=off sticky=on
yabai -m rule --add title="Picture in Picture" manage=off sticky=on layer=above

# Float preferences/settings
yabai -m rule --add app="^Code\$" title="Settings" manage=off
yabai -m rule --add title="Preferences" manage=off
yabai -m rule --add title="Settings" manage=off

# ==============================================================================
# WORKSPACE ASSIGNMENTS
# ==============================================================================
yabai -m rule --add app="^Safari\$" space=^1
yabai -m rule --add app="^Brave Browser\$" space=^1
yabai -m rule --add app="^Firefox\$" space=^1
yabai -m rule --add app="^Obsidian\$" space=^2
yabai -m rule --add app="^WezTerm\$" space=^3
yabai -m rule --add app="^Code\$" space=^3
yabai -m rule --add app="^Xcode\$" space=^3
yabai -m rule --add app="^Cursor\$" space=^3
yabai -m rule --add app="^Preview\$" space=^5
yabai -m rule --add app="^PDF Expert\$" space=^5
yabai -m rule --add app="^Raindrop.io\$" space=^6
yabai -m rule --add app="^Spotify\$" space=^7
yabai -m rule --add app="^Microsoft Word\$" space=^8
yabai -m rule --add app="^Microsoft Excel\$" space=^8
yabai -m rule --add app="^Microsoft PowerPoint\$" space=^8
yabai -m rule --add app="^Pages\$" space=^8
yabai -m rule --add app="^Numbers\$" space=^8
yabai -m rule --add app="^Keynote\$" space=^8
yabai -m rule --add app="^Slack\$" space=^9
yabai -m rule --add app="^Discord\$" space=^9
yabai -m rule --add app="^Mail\$" space=^9
yabai -m rule --add app="^Telegram\$" space=^9
yabai -m rule --add app="^WhatsApp\$" space=^9
yabai -m rule --add app="^Messages\$" space=^9
yabai -m rule --add app="^Claude\$" space=^10
yabai -m rule --add app="^Perplexity\$" space=^10

echo "yabai: Configuration loaded"
EOF

    chmod +x "$out"
    ok "Generated: $out"
}

# ==============================================================================
# Hyprland Generator (Linux) - v6.4 Complete
# ==============================================================================
gen_hyprland() {
    local out="$UKE_GEN/hyprland/hyprland.conf"
    mkdir -p "$(dirname "$out")"
    log_info "Generating Hyprland config..."
    
    cat > "$out" << EOF
# ==============================================================================
# HYPRLAND CONFIG - AUTO-GENERATED BY UKE v6.4
# ==============================================================================
# Unified colorscheme: Nord
# Features: Scratchpads, Multi-monitor, Complete window rules
# ==============================================================================

# ==============================================================================
# MONITORS (Multi-monitor support)
# ==============================================================================
# Default: auto-detect
monitor=,preferred,auto,1

# Example multi-monitor setup (uncomment and customize):
# monitor=eDP-1,1920x1080@60,0x0,1           # Built-in laptop
# monitor=HDMI-A-1,2560x1440@60,1920x0,1     # External right
# monitor=DP-1,2560x1440@60,-2560x0,1        # External left

# Workspace ‚Üí Monitor assignments (uncomment for multi-monitor):
# workspace = 1, monitor:eDP-1
# workspace = 2, monitor:eDP-1
# workspace = 3, monitor:eDP-1
# workspace = 4, monitor:eDP-1
# workspace = 5, monitor:eDP-1
# workspace = 6, monitor:HDMI-A-1
# workspace = 7, monitor:HDMI-A-1
# workspace = 8, monitor:HDMI-A-1
# workspace = 9, monitor:HDMI-A-1
# workspace = 10, monitor:HDMI-A-1

# ==============================================================================
# GENERAL SETTINGS (Nord colorscheme)
# ==============================================================================
general {
    gaps_in = 2
    gaps_out = 4
    border_size = 2
    col.active_border = rgba(${COLORS[border_active]}ff)
    col.inactive_border = rgba(${COLORS[border_inactive]}ff)
    layout = dwindle
    resize_on_border = true
}

# ==============================================================================
# DECORATION
# ==============================================================================
decoration {
    rounding = 4
    blur {
        enabled = true
        size = 6
        passes = 2
    }
    shadow {
        enabled = true
        range = 8
        color = rgba(1a1a1aee)
    }
}

# ==============================================================================
# ANIMATIONS
# ==============================================================================
animations {
    enabled = true
    bezier = easeOutQuint, 0.22, 1, 0.36, 1
    animation = windows, 1, 4, easeOutQuint, slide
    animation = border, 1, 10, default
    animation = fade, 1, 5, default
    animation = workspaces, 1, 4, easeOutQuint, slide
    animation = specialWorkspace, 1, 4, easeOutQuint, slidevert
}

# ==============================================================================
# INPUT
# ==============================================================================
input {
    kb_layout = us
    follow_mouse = 1
    touchpad {
        natural_scroll = true
        tap-to-click = true
    }
}

gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
}

dwindle {
    pseudotile = true
    preserve_split = true
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

# ==============================================================================
# AUTOSTART
# ==============================================================================
exec-once = waybar
exec-once = dunst
exec-once = hyprpaper
exec-once = nm-applet --indicator
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# Clipboard
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# ==============================================================================
# QUALITY OF LIFE
# ==============================================================================
# Spotlight (Wofi)
bind = ALT SUPER, space, exec, wofi --show drun --allow-images

# Zoom (Accessibility)
bind = ALT SUPER, equal, exec, hyprctl keyword cursor:zoom_factor 2.0
bind = ALT SUPER, minus, exec, hyprctl keyword cursor:zoom_factor 1.0

# Clipboard History
bind = ALT, v, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy

# File Manager & Settings
bind = ALT SUPER, f, exec, thunar
bind = ALT SUPER, s, exec, lxappearance

# ==============================================================================
# WINDOW MANAGEMENT
# ==============================================================================
bind = ALT, return, exec, wezterm
bind = ALT, q, killactive
bind = ALT, escape, focuscurrentorlast
bind = ALT SHIFT, escape, focusurgentorlast

# Window Controls
bind = ALT SHIFT, f, fullscreen, 0
bind = ALT SHIFT, space, togglefloating
bind = ALT SHIFT, backslash, togglesplit

# Focus (Alt + hjkl)
bind = ALT, h, movefocus, l
bind = ALT, j, movefocus, d
bind = ALT, k, movefocus, u
bind = ALT, l, movefocus, r

# Move (Alt + Shift + hjkl)
bind = ALT SHIFT, h, movewindow, l
bind = ALT SHIFT, j, movewindow, d
bind = ALT SHIFT, k, movewindow, u
bind = ALT SHIFT, l, movewindow, r

# Resize (Super + Shift + hjkl)
bind = SUPER SHIFT, h, resizeactive, -50 0
bind = SUPER SHIFT, j, resizeactive, 0 50
bind = SUPER SHIFT, k, resizeactive, 0 -50
bind = SUPER SHIFT, l, resizeactive, 50 0

# ==============================================================================
# WORKSPACE NAVIGATION
# ==============================================================================
bind = ALT, 1, workspace, 1
bind = ALT, 2, workspace, 2
bind = ALT, 3, workspace, 3
bind = ALT, 4, workspace, 4
bind = ALT, 5, workspace, 5
bind = ALT, 6, workspace, 6
bind = ALT, 7, workspace, 7
bind = ALT, 8, workspace, 8
bind = ALT, 9, workspace, 9
bind = ALT, 0, workspace, 10
bind = ALT, bracketleft, workspace, e-1
bind = ALT, bracketright, workspace, e+1

# Move to Workspace
bind = ALT SHIFT, 1, movetoworkspace, 1
bind = ALT SHIFT, 2, movetoworkspace, 2
bind = ALT SHIFT, 3, movetoworkspace, 3
bind = ALT SHIFT, 4, movetoworkspace, 4
bind = ALT SHIFT, 5, movetoworkspace, 5
bind = ALT SHIFT, 6, movetoworkspace, 6
bind = ALT SHIFT, 7, movetoworkspace, 7
bind = ALT SHIFT, 8, movetoworkspace, 8
bind = ALT SHIFT, 9, movetoworkspace, 9
bind = ALT SHIFT, 0, movetoworkspace, 10

# ==============================================================================
# SCRATCHPADS (Special Workspaces)
# ==============================================================================
# Terminal scratchpad (Alt + \`)
bind = ALT, grave, togglespecialworkspace, terminal
bind = ALT SHIFT, grave, exec, \$HOME/.local/bin/uke-scratchpad terminal

# Notes scratchpad (Alt + Super + n)
bind = ALT SUPER, n, togglespecialworkspace, notes

# Music scratchpad
bind = ALT SUPER, m, togglespecialworkspace, music

# Scratchpad window rules
windowrulev2 = float, onworkspace:special:terminal
windowrulev2 = size 80% 40%, onworkspace:special:terminal
windowrulev2 = move 10% 5%, onworkspace:special:terminal

windowrulev2 = float, onworkspace:special:notes
windowrulev2 = size 70% 80%, onworkspace:special:notes
windowrulev2 = center, onworkspace:special:notes

windowrulev2 = float, onworkspace:special:music
windowrulev2 = size 60% 70%, onworkspace:special:music
windowrulev2 = center, onworkspace:special:music

# ==============================================================================
# UKE TOOLS
# ==============================================================================
# Gather
bind = ALT, grave, exec, \$HOME/.local/bin/uke-gather

# Smart Launchers
bind = ALT SUPER, b, exec, \$HOME/.local/bin/uke-launch brave
bind = ALT SUPER, o, exec, \$HOME/.local/bin/uke-launch obsidian
bind = ALT SUPER, c, exec, \$HOME/.local/bin/uke-launch code
bind = ALT SUPER, t, exec, \$HOME/.local/bin/uke-launch wezterm

# Bunches
bind = ALT CTRL, F1, exec, \$HOME/.local/bin/uke-bunch study
bind = ALT CTRL, F2, exec, \$HOME/.local/bin/uke-bunch guitar
bind = ALT CTRL, F3, exec, \$HOME/.local/bin/uke-bunch coding
bind = ALT CTRL, F4, exec, \$HOME/.local/bin/uke-bunch email
bind = ALT CTRL, F5, exec, \$HOME/.local/bin/uke-bunch reading

# Session Management
bind = ALT CTRL, s, exec, \$HOME/.local/bin/uke-session save quick
bind = ALT CTRL SHIFT, s, exec, \$HOME/.local/bin/uke-session restore quick

# ==============================================================================
# SCREENSHOT
# ==============================================================================
bind = , Print, exec, grim -g "\$(slurp)" - | wl-copy
bind = SHIFT, Print, exec, grim - | wl-copy

# ==============================================================================
# MOUSE
# ==============================================================================
bindm = ALT, mouse:272, movewindow
bindm = ALT, mouse:273, resizewindow

# ==============================================================================
# WINDOW RULES
# ==============================================================================
# Float system windows
windowrulev2 = float, class:^(pavucontrol)\$
windowrulev2 = float, class:^(nm-connection-editor)\$
windowrulev2 = float, class:^(lxappearance)\$
windowrulev2 = float, class:^(blueman-manager)\$
windowrulev2 = float, class:^(org.gnome.Calculator)\$
windowrulev2 = float, class:^(gnome-calculator)\$
windowrulev2 = float, class:^(thunar)\$,title:^(File Operation Progress)\$
windowrulev2 = float, title:^(Picture-in-Picture)\$

# Sticky (Picture-in-Picture)
windowrulev2 = pin, title:^(Picture-in-Picture)\$

# Terminal opacity
windowrulev2 = opacity 0.92 0.88, class:^(wezterm)\$
windowrulev2 = opacity 0.92 0.88, class:^(Alacritty)\$
windowrulev2 = opacity 0.92 0.88, class:^(kitty)\$

# ==============================================================================
# WORKSPACE ASSIGNMENTS
# ==============================================================================
windowrulev2 = workspace 1, class:^(brave-browser)\$
windowrulev2 = workspace 1, class:^(firefox)\$
windowrulev2 = workspace 1, class:^(chromium)\$
windowrulev2 = workspace 2, class:^(obsidian)\$
windowrulev2 = workspace 3, class:^(wezterm)\$
windowrulev2 = workspace 3, class:^(code)\$
windowrulev2 = workspace 3, class:^(Code)\$
windowrulev2 = workspace 3, class:^(Alacritty)\$
windowrulev2 = workspace 3, class:^(kitty)\$
windowrulev2 = workspace 5, class:^(evince)\$
windowrulev2 = workspace 5, class:^(zathura)\$
windowrulev2 = workspace 5, class:^(okular)\$
windowrulev2 = workspace 6, class:^(raindrop)\$
windowrulev2 = workspace 7, class:^(spotify)\$
windowrulev2 = workspace 7, class:^(Spotify)\$
windowrulev2 = workspace 8, class:^(libreoffice)\$
windowrulev2 = workspace 8, class:^(soffice)\$
windowrulev2 = workspace 9, class:^(slack)\$
windowrulev2 = workspace 9, class:^(Slack)\$
windowrulev2 = workspace 9, class:^(discord)\$
windowrulev2 = workspace 9, class:^(thunderbird)\$
windowrulev2 = workspace 9, class:^(telegram-desktop)\$
windowrulev2 = workspace 10, class:^(claude)\$
EOF

    chmod +x "$out"
    ok "Generated: $out"
}

# ==============================================================================
# Gather Script Generator
# ==============================================================================
gen_gather() {
    local out="$UKE_BIN/uke-gather"
    mkdir -p "$(dirname "$out")"

    log_info "Generating uke-gather..."
    
    cat > "$out" << 'HEADER'
#!/usr/bin/env bash
set -euo pipefail

SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do
  DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
export UKE_ROOT="${SCRIPT_DIR%/bin}"

source "$UKE_ROOT/lib/core.sh"
require_cmd jq

gather_macos() {
    local current_space
    current_space=$(yabai -m query --spaces --space | jq -r '.index')
    log_info "Gathering windows for space $current_space..."
    
    case $current_space in
        1)
            yabai -m query --windows | jq -r '.[] | select(.app == "Safari" or .app == "Brave Browser" or .app == "Firefox") | .id' | \
                xargs -I {} yabai -m window {} --space 1 2>/dev/null || true
            ;;
        2)
            yabai -m query --windows | jq -r '.[] | select(.app == "Obsidian") | .id' | \
                xargs -I {} yabai -m window {} --space 2 2>/dev/null || true
            ;;
        3)
            yabai -m query --windows | jq -r '.[] | select(.app == "WezTerm" or .app == "Code" or .app == "Xcode" or .app == "Cursor") | .id' | \
                xargs -I {} yabai -m window {} --space 3 2>/dev/null || true
            ;;
        5)
            yabai -m query --windows | jq -r '.[] | select(.app == "Preview" or .app == "PDF Expert") | .id' | \
                xargs -I {} yabai -m window {} --space 5 2>/dev/null || true
            ;;
        6)
            yabai -m query --windows | jq -r '.[] | select(.app == "Raindrop.io") | .id' | \
                xargs -I {} yabai -m window {} --space 6 2>/dev/null || true
            ;;
        7)
            yabai -m query --windows | jq -r '.[] | select(.app == "Spotify") | .id' | \
                xargs -I {} yabai -m window {} --space 7 2>/dev/null || true
            ;;
        8)
            yabai -m query --windows | jq -r '.[] | select(.app == "Microsoft Word" or .app == "Microsoft Excel" or .app == "Microsoft PowerPoint" or .app == "Pages" or .app == "Numbers" or .app == "Keynote") | .id' | \
                xargs -I {} yabai -m window {} --space 8 2>/dev/null || true
            ;;
        9)
            yabai -m query --windows | jq -r '.[] | select(.app == "Slack" or .app == "Discord" or .app == "Mail" or .app == "Telegram" or .app == "WhatsApp" or .app == "Messages") | .id' | \
                xargs -I {} yabai -m window {} --space 9 2>/dev/null || true
            ;;
        10)
            yabai -m query --windows | jq -r '.[] | select(.app == "Claude" or .app == "Perplexity") | .id' | \
                xargs -I {} yabai -m window {} --space 10 2>/dev/null || true
            ;;
        *)
            log_info "No gather action for space $current_space"
            ;;
    esac
    ok "Windows gathered"
}

gather_linux() {
    local current_ws
    current_ws=$(hyprctl activeworkspace -j | jq -r '.id')
    log_info "Gathering windows for workspace $current_ws..."
    
    case $current_ws in
        1)
            hyprctl clients -j | jq -r '.[] | select(.class | test("brave|firefox|chromium"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "1,address:$addr" 2>/dev/null; done
            ;;
        2)
            hyprctl clients -j | jq -r '.[] | select(.class | test("obsidian"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "2,address:$addr" 2>/dev/null; done
            ;;
        3)
            hyprctl clients -j | jq -r '.[] | select(.class | test("wezterm|code|alacritty|kitty"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "3,address:$addr" 2>/dev/null; done
            ;;
        5)
            hyprctl clients -j | jq -r '.[] | select(.class | test("evince|zathura|okular"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "5,address:$addr" 2>/dev/null; done
            ;;
        6)
            hyprctl clients -j | jq -r '.[] | select(.class | test("raindrop"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "6,address:$addr" 2>/dev/null; done
            ;;
        7)
            hyprctl clients -j | jq -r '.[] | select(.class | test("spotify"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "7,address:$addr" 2>/dev/null; done
            ;;
        8)
            hyprctl clients -j | jq -r '.[] | select(.class | test("libreoffice|soffice"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "8,address:$addr" 2>/dev/null; done
            ;;
        9)
            hyprctl clients -j | jq -r '.[] | select(.class | test("slack|discord|thunderbird|telegram"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "9,address:$addr" 2>/dev/null; done
            ;;
        10)
            hyprctl clients -j | jq -r '.[] | select(.class | test("claude"; "i")) | .address' | \
                while read -r addr; do hyprctl dispatch movetoworkspacesilent "10,address:$addr" 2>/dev/null; done
            ;;
        *)
            log_info "No gather action for workspace $current_ws"
            ;;
    esac
    ok "Windows gathered"
}

is_macos && gather_macos || gather_linux
HEADER

    chmod +x "$out"
    ok "Generated: $out"
}

# ==============================================================================
# Main
# ==============================================================================
gen_all() {
    log_info "Generating all configs..."
    if is_macos; then
        gen_skhd
        gen_yabai
    else
        gen_hyprland
    fi
    gen_gather
    ok "All configs generated"
}

case "${1:-all}" in
    skhd)     gen_skhd ;;
    yabai)    gen_yabai ;;
    hyprland) gen_hyprland ;;
    gather)   gen_gather ;;
    all)      gen_all ;;
    *)        log_fatal "Unknown target: $1" ;;
esac



################################################################################
FILE PATH: uke/lib/wm.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Window Manager Abstraction v6.1
# ==============================================================================

[[ -n "${_UKE_WM_LOADED:-}" ]] && return 0
readonly _UKE_WM_LOADED=1

source "${UKE_LIB:-$(dirname "$0")/../lib}/core.sh"

# ------------------------------------------------------------------------------
# Status
# ------------------------------------------------------------------------------
wm_name() {
    is_macos && echo "yabai" || echo "hyprland"
}

wm_running() {
    if is_macos; then
        pgrep -q yabai
    else
        [[ -n "${HYPRLAND_INSTANCE_SIGNATURE:-}" ]]
    fi
}

# ------------------------------------------------------------------------------
# Focus
# ------------------------------------------------------------------------------
wm_focus() {
    local dir="$1"
    if is_macos; then
        case "$dir" in
            left)  yabai -m window --focus west ;;
            down)  yabai -m window --focus south ;;
            up)    yabai -m window --focus north ;;
            right) yabai -m window --focus east ;;
        esac
    else
        local d; case "$dir" in left) d=l;; down) d=d;; up) d=u;; right) d=r;; esac
        hyprctl dispatch movefocus "$d"
    fi
}

# ------------------------------------------------------------------------------
# Move Window
# ------------------------------------------------------------------------------
wm_move() {
    local dir="$1"
    if is_macos; then
        case "$dir" in
            left)  yabai -m window --warp west ;;
            down)  yabai -m window --warp south ;;
            up)    yabai -m window --warp north ;;
            right) yabai -m window --warp east ;;
        esac
    else
        local d; case "$dir" in left) d=l;; down) d=d;; up) d=u;; right) d=r;; esac
        hyprctl dispatch movewindow "$d"
    fi
}

# ------------------------------------------------------------------------------
# Resize
# ------------------------------------------------------------------------------
wm_resize() {
    local dir="$1" amt="${2:-50}"
    if is_macos; then
        case "$dir" in
            left)  yabai -m window --resize left:-${amt}:0 ;;
            down)  yabai -m window --resize bottom:0:${amt} ;;
            up)    yabai -m window --resize top:0:-${amt} ;;
            right) yabai -m window --resize right:${amt}:0 ;;
        esac
    else
        case "$dir" in
            left)  hyprctl dispatch resizeactive -${amt} 0 ;;
            down)  hyprctl dispatch resizeactive 0 ${amt} ;;
            up)    hyprctl dispatch resizeactive 0 -${amt} ;;
            right) hyprctl dispatch resizeactive ${amt} 0 ;;
        esac
    fi
}

# ------------------------------------------------------------------------------
# Workspace
# ------------------------------------------------------------------------------
wm_workspace() {
    local ws="$1"
    is_macos && yabai -m space --focus "$ws" || hyprctl dispatch workspace "$ws"
}

wm_move_to_workspace() {
    local ws="$1" follow="${2:-1}"
    if is_macos; then
        [[ "$follow" == "1" ]] && yabai -m window --space "$ws" --focus || yabai -m window --space "$ws"
    else
        [[ "$follow" == "1" ]] && hyprctl dispatch movetoworkspace "$ws" || hyprctl dispatch movetoworkspacesilent "$ws"
    fi
}

wm_current_workspace() {
    if is_macos; then
        yabai -m query --spaces --space 2>/dev/null | grep -o '"index":[0-9]*' | cut -d: -f2
    else
        hyprctl activeworkspace -j 2>/dev/null | grep -o '"id":[0-9]*' | cut -d: -f2
    fi
}

# ------------------------------------------------------------------------------
# Window Controls
# ------------------------------------------------------------------------------
wm_fullscreen() { is_macos && yabai -m window --toggle zoom-fullscreen || hyprctl dispatch fullscreen 0; }
wm_float()      { is_macos && yabai -m window --toggle float || hyprctl dispatch togglefloating; }
wm_split()      { is_macos && yabai -m window --toggle split || hyprctl dispatch togglesplit; }
wm_rotate()     { is_macos && yabai -m space --rotate 90 || hyprctl dispatch layoutmsg orientationcycle; }
wm_balance()    { is_macos && yabai -m space --balance; }
wm_close()      { is_macos && yabai -m window --close || hyprctl dispatch killactive; }

# ------------------------------------------------------------------------------
# Query
# ------------------------------------------------------------------------------
wm_windows() {
    local ws="${1:-}"
    if is_macos; then
        [[ -n "$ws" ]] && yabai -m query --windows --space "$ws" || yabai -m query --windows
    else
        local all; all="$(hyprctl clients -j)"
        [[ -n "$ws" ]] && echo "$all" | jq "[.[] | select(.workspace.id == $ws)]" || echo "$all"
    fi
}

# ------------------------------------------------------------------------------
# Service Management
# ------------------------------------------------------------------------------
wm_reload() {
    log_info "Reloading window manager..."
    if is_macos; then
        yabai --restart-service 2>/dev/null && ok "yabai restarted"
        skhd --restart-service 2>/dev/null && ok "skhd restarted"
    else
        hyprctl reload 2>/dev/null && ok "hyprland reloaded"
    fi
}



################################################################################
FILE PATH: uke/lib/core.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# UKE Core Library v6.1
# ==============================================================================
set -euo pipefail

[[ -n "${_UKE_CORE_LOADED:-}" ]] && return 0
readonly _UKE_CORE_LOADED=1

# ------------------------------------------------------------------------------
# Path Resolution
# ------------------------------------------------------------------------------
_resolve_uke_root() {
    local src="${BASH_SOURCE[1]:-${BASH_SOURCE[0]}}"
    while [[ -L "$src" ]]; do
        local dir="$(cd -P "$(dirname "$src")" && pwd)"
        src="$(readlink "$src")"
        [[ "$src" != /* ]] && src="$dir/$src"
    done
    cd -P "$(dirname "$src")/.." && pwd
}

export UKE_ROOT="${UKE_ROOT:-$(_resolve_uke_root)}"
export UKE_VERSION="6.2.0"

# ------------------------------------------------------------------------------
# Directories
# ------------------------------------------------------------------------------
export UKE_LIB="$UKE_ROOT/lib"
export UKE_BIN="$UKE_ROOT/bin"
export UKE_CONFIG="$UKE_ROOT/config"
export UKE_GEN="$UKE_ROOT/gen"
export UKE_STOW="$UKE_ROOT/stow"
export UKE_BUNCHES="$UKE_ROOT/bunches"
export UKE_SCRIPTS="$UKE_ROOT/scripts"
export UKE_DOCS="$UKE_ROOT/docs"

export UKE_STATE="${XDG_STATE_HOME:-$HOME/.local/state}/uke"
export UKE_LOG_FILE="$UKE_STATE/uke.log"

mkdir -p "$UKE_STATE" 2>/dev/null || true

# ------------------------------------------------------------------------------
# Platform Detection
# ------------------------------------------------------------------------------
case "$(uname -s)" in
    Darwin) export UKE_OS="macos" ;;
    Linux)  export UKE_OS="linux" ;;
    *)      export UKE_OS="unknown" ;;
esac

is_macos() { [[ "$UKE_OS" == "macos" ]]; }
is_linux() { [[ "$UKE_OS" == "linux" ]]; }

# ------------------------------------------------------------------------------
# Colors
# ------------------------------------------------------------------------------
if [[ -t 1 ]]; then
    readonly C_RED=$'\e[31m' C_GREEN=$'\e[32m' C_YELLOW=$'\e[33m'
    readonly C_BLUE=$'\e[34m' C_MAGENTA=$'\e[35m' C_CYAN=$'\e[36m'
    readonly C_BOLD=$'\e[1m' C_DIM=$'\e[2m' C_RESET=$'\e[0m'
else
    readonly C_RED='' C_GREEN='' C_YELLOW='' C_BLUE='' C_MAGENTA='' C_CYAN=''
    readonly C_BOLD='' C_DIM='' C_RESET=''
fi

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------
_log() {
    local level="$1" color="$2"; shift 2
    local ts="$(date '+%H:%M:%S')"
    printf "%s[%s]%s %s%s%s %s\n" "$C_DIM" "$ts" "$C_RESET" "$color" "$level" "$C_RESET" "$*" >&2
    [[ -w "$UKE_STATE" ]] && printf "[%s] [%s] %s\n" "$(date '+%Y-%m-%d %H:%M:%S')" "$level" "$*" >> "$UKE_LOG_FILE"
}

log_debug() { [[ -n "${UKE_DEBUG:-}" ]] && _log "DEBUG" "$C_BLUE" "$@"; }
log_info()  { _log "INFO " "$C_GREEN" "$@"; }
log_warn()  { _log "WARN " "$C_YELLOW" "$@"; }
log_error() { _log "ERROR" "$C_RED" "$@"; }
log_fatal() { _log "FATAL" "$C_RED" "$@"; exit 1; }

ok()   { printf "%s‚úì%s %s\n" "$C_GREEN" "$C_RESET" "$*"; }
fail() { printf "%s‚úó%s %s\n" "$C_RED" "$C_RESET" "$*"; }

# ------------------------------------------------------------------------------
# Utilities
# ------------------------------------------------------------------------------
require_cmd() {
    for cmd in "$@"; do
        command -v "$cmd" &>/dev/null || log_fatal "Required command not found: $cmd"
    done
}

require_file() {
    for f in "$@"; do
        [[ -f "$f" ]] || log_fatal "Required file not found: $f"
    done
}

run() {
    log_debug "exec: $*"
    if [[ -n "${UKE_DRY_RUN:-}" ]]; then
        log_info "[dry-run] $*"
        return 0
    fi
    "$@"
}



################################################################################
FILE PATH: uke/templates/bunch-template.sh
################################################################################

#!/usr/bin/env bash
# ==============================================================================
# BUNCH: [BUNCH_NAME]
# Description: [DESCRIPTION]
# ==============================================================================

# Load OS detection library
source "$(dirname "$0")/../bunches/lib-os-detect.sh"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Configuration
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
BUNCH_NAME="[BUNCH_NAME]"
PRIMARY_SPACE=1  # Main workspace for this bunch

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Startup Sequence
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
echo "üöÄ Starting bunch: $BUNCH_NAME"

# Switch to primary workspace
$WM_FOCUS_SPACE $PRIMARY_SPACE

# Launch applications (uncomment and customize)
# launch_app "browser"
# sleep 1
# launch_app "notes"
# sleep 1
# launch_app "terminal"

echo "‚úÖ Bunch '$BUNCH_NAME' ready!"
echo "   ‚Üí Workspace: $PRIMARY_SPACE"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Optional: Additional Setup
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# cd ~/Projects/my-project
# tmux new-session -d -s $BUNCH_NAME



################################################################################
FILE PATH: uke/.stow-local-ignore
################################################################################

# Stow ignore patterns
\.git
\.gitignore
README.*
LICENSE
\.DS_Store



