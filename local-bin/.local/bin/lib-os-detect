#!/bin/bash

detect_os() {
    if [[ "$OSTYPE" == "darwin"* ]]; then
        echo "macos"
    elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
        echo "linux"
    else
        echo "unknown"
    fi
}

setup_os_commands() {
    OS=$(detect_os)
    if [[ "$OS" == "macos" ]]; then
        export WM_FOCUS_SPACE="yabai -m space --focus"
    elif [[ "$OS" == "linux" ]]; then
        export WM_FOCUS_SPACE="hyprctl dispatch workspace"
    fi
}

launch_app() {
    local app="$1"
    local OS=$(detect_os)

    if [[ "$OS" == "macos" ]]; then
        open -a "$app"
    elif [[ "$OS" == "linux" ]]; then
        # Try running command directly first (better for terminal tools)
        if command -v "$app" &> /dev/null; then
            "$app" &
        else
            # Fallback to gtk-launch for GUI apps if desktop file exists
            gtk-launch "$app" 2>/dev/null || echo "⚠️ Could not launch $app"
        fi
    fi
}
